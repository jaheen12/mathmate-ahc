function Vb(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Mb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Y_={exports:{}},Lu={},J_={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ol=Symbol.for("react.element"),Lb=Symbol.for("react.portal"),Fb=Symbol.for("react.fragment"),Ub=Symbol.for("react.strict_mode"),zb=Symbol.for("react.profiler"),Bb=Symbol.for("react.provider"),$b=Symbol.for("react.context"),Wb=Symbol.for("react.forward_ref"),qb=Symbol.for("react.suspense"),Hb=Symbol.for("react.memo"),Kb=Symbol.for("react.lazy"),R0=Symbol.iterator;function Gb(t){return t===null||typeof t!="object"?null:(t=R0&&t[R0]||t["@@iterator"],typeof t=="function"?t:null)}var X_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z_=Object.assign,ex={};function ro(t,e,n){this.props=t,this.context=e,this.refs=ex,this.updater=n||X_}ro.prototype.isReactComponent={};ro.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ro.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tx(){}tx.prototype=ro.prototype;function Pm(t,e,n){this.props=t,this.context=e,this.refs=ex,this.updater=n||X_}var Rm=Pm.prototype=new tx;Rm.constructor=Pm;Z_(Rm,ro.prototype);Rm.isPureReactComponent=!0;var j0=Array.isArray,nx=Object.prototype.hasOwnProperty,jm={current:null},rx={key:!0,ref:!0,__self:!0,__source:!0};function sx(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)nx.call(e,r)&&!rx.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),d=0;d<a;d++)l[d]=arguments[d+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:ol,type:t,key:i,ref:o,props:s,_owner:jm.current}}function Qb(t,e){return{$$typeof:ol,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Dm(t){return typeof t=="object"&&t!==null&&t.$$typeof===ol}function Yb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var D0=/\/+/g;function ih(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Yb(""+t.key):e.toString(36)}function pc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ol:case Lb:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+ih(o,0):r,j0(s)?(n="",t!=null&&(n=t.replace(D0,"$&/")+"/"),pc(s,e,n,"",function(d){return d})):s!=null&&(Dm(s)&&(s=Qb(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(D0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",j0(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+ih(i,a);o+=pc(i,e,n,l,s)}else if(l=Gb(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+ih(i,a++),o+=pc(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Wl(t,e,n){if(t==null)return t;var r=[],s=0;return pc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Jb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tt={current:null},gc={transition:null},Xb={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:gc,ReactCurrentOwner:jm};function ix(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Wl,forEach:function(t,e,n){Wl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Wl(t,function(){e++}),e},toArray:function(t){return Wl(t,function(e){return e})||[]},only:function(t){if(!Dm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=ro;le.Fragment=Fb;le.Profiler=zb;le.PureComponent=Pm;le.StrictMode=Ub;le.Suspense=qb;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xb;le.act=ix;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Z_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=jm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)nx.call(e,l)&&!rx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var d=0;d<l;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:ol,type:t.type,key:s,ref:i,props:r,_owner:o}};le.createContext=function(t){return t={$$typeof:$b,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Bb,_context:t},t.Consumer=t};le.createElement=sx;le.createFactory=function(t){var e=sx.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:Wb,render:t}};le.isValidElement=Dm;le.lazy=function(t){return{$$typeof:Kb,_payload:{_status:-1,_result:t},_init:Jb}};le.memo=function(t,e){return{$$typeof:Hb,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=gc.transition;gc.transition={};try{t()}finally{gc.transition=e}};le.unstable_act=ix;le.useCallback=function(t,e){return Tt.current.useCallback(t,e)};le.useContext=function(t){return Tt.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return Tt.current.useDeferredValue(t)};le.useEffect=function(t,e){return Tt.current.useEffect(t,e)};le.useId=function(){return Tt.current.useId()};le.useImperativeHandle=function(t,e,n){return Tt.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return Tt.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return Tt.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return Tt.current.useMemo(t,e)};le.useReducer=function(t,e,n){return Tt.current.useReducer(t,e,n)};le.useRef=function(t){return Tt.current.useRef(t)};le.useState=function(t){return Tt.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return Tt.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return Tt.current.useTransition()};le.version="18.3.1";J_.exports=le;var k=J_.exports;const X=Mb(k),Zb=Vb({__proto__:null,default:X},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eT=k,tT=Symbol.for("react.element"),nT=Symbol.for("react.fragment"),rT=Object.prototype.hasOwnProperty,sT=eT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iT={key:!0,ref:!0,__self:!0,__source:!0};function ox(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)rT.call(e,r)&&!iT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:tT,type:t,key:i,ref:o,props:s,_owner:sT.current}}Lu.Fragment=nT;Lu.jsx=ox;Lu.jsxs=ox;Y_.exports=Lu;var u=Y_.exports,Uc={},ax={exports:{}},Qt={},lx={exports:{}},cx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,ee){var ne=U.length;U.push(ee);e:for(;0<ne;){var fe=ne-1>>>1,ge=U[fe];if(0<s(ge,ee))U[fe]=ee,U[ne]=ge,ne=fe;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var ee=U[0],ne=U.pop();if(ne!==ee){U[0]=ne;e:for(var fe=0,ge=U.length,Ue=ge>>>1;fe<Ue;){var Nn=2*(fe+1)-1,kn=U[Nn],Cn=Nn+1,An=U[Cn];if(0>s(kn,ne))Cn<ge&&0>s(An,kn)?(U[fe]=An,U[Cn]=ne,fe=Cn):(U[fe]=kn,U[Nn]=ne,fe=Nn);else if(Cn<ge&&0>s(An,ne))U[fe]=An,U[Cn]=ne,fe=Cn;else break e}}return ee}function s(U,ee){var ne=U.sortIndex-ee.sortIndex;return ne!==0?ne:U.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],d=[],h=1,m=null,p=3,E=!1,N=!1,S=!1,A=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(U){for(var ee=n(d);ee!==null;){if(ee.callback===null)r(d);else if(ee.startTime<=U)r(d),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=n(d)}}function T(U){if(S=!1,y(U),!N)if(n(l)!==null)N=!0,xe(j);else{var ee=n(d);ee!==null&&oe(T,ee.startTime-U)}}function j(U,ee){N=!1,S&&(S=!1,w(_),_=-1),E=!0;var ne=p;try{for(y(ee),m=n(l);m!==null&&(!(m.expirationTime>ee)||U&&!P());){var fe=m.callback;if(typeof fe=="function"){m.callback=null,p=m.priorityLevel;var ge=fe(m.expirationTime<=ee);ee=t.unstable_now(),typeof ge=="function"?m.callback=ge:m===n(l)&&r(l),y(ee)}else r(l);m=n(l)}if(m!==null)var Ue=!0;else{var Nn=n(d);Nn!==null&&oe(T,Nn.startTime-ee),Ue=!1}return Ue}finally{m=null,p=ne,E=!1}}var O=!1,I=null,_=-1,x=5,C=-1;function P(){return!(t.unstable_now()-C<x)}function D(){if(I!==null){var U=t.unstable_now();C=U;var ee=!0;try{ee=I(!0,U)}finally{ee?R():(O=!1,I=null)}}else O=!1}var R;if(typeof v=="function")R=function(){v(D)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ie=Y.port2;Y.port1.onmessage=D,R=function(){ie.postMessage(null)}}else R=function(){A(D,0)};function xe(U){I=U,O||(O=!0,R())}function oe(U,ee){_=A(function(){U(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){N||E||(N=!0,xe(j))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var ee=3;break;default:ee=p}var ne=p;p=ee;try{return U()}finally{p=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,ee){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ne=p;p=U;try{return ee()}finally{p=ne}},t.unstable_scheduleCallback=function(U,ee,ne){var fe=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?fe+ne:fe):ne=fe,U){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=ne+ge,U={id:h++,callback:ee,priorityLevel:U,startTime:ne,expirationTime:ge,sortIndex:-1},ne>fe?(U.sortIndex=ne,e(d,U),n(l)===null&&U===n(d)&&(S?(w(_),_=-1):S=!0,oe(T,ne-fe))):(U.sortIndex=ge,e(l,U),N||E||(N=!0,xe(j))),U},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(U){var ee=p;return function(){var ne=p;p=ee;try{return U.apply(this,arguments)}finally{p=ne}}}})(cx);lx.exports=cx;var oT=lx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT=k,qt=oT;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ux=new Set,Ia={};function Ws(t,e){ji(t,e),ji(t+"Capture",e)}function ji(t,e){for(Ia[t]=e,t=0;t<e.length;t++)ux.add(e[t])}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yh=Object.prototype.hasOwnProperty,lT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O0={},V0={};function cT(t){return Yh.call(V0,t)?!0:Yh.call(O0,t)?!1:lT.test(t)?V0[t]=!0:(O0[t]=!0,!1)}function uT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function dT(t,e,n,r){if(e===null||typeof e>"u"||uT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ot[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ot[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ot[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ot[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ot[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ot[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ot[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ot[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ot[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var Om=/[\-:]([a-z])/g;function Vm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Om,Vm);ot[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Om,Vm);ot[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Om,Vm);ot[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ot[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});ot.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ot[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mm(t,e,n,r){var s=ot.hasOwnProperty(e)?ot[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dT(e,n,s,r)&&(n=null),r||s===null?cT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var er=aT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ql=Symbol.for("react.element"),ui=Symbol.for("react.portal"),di=Symbol.for("react.fragment"),Lm=Symbol.for("react.strict_mode"),Jh=Symbol.for("react.profiler"),dx=Symbol.for("react.provider"),hx=Symbol.for("react.context"),Fm=Symbol.for("react.forward_ref"),Xh=Symbol.for("react.suspense"),Zh=Symbol.for("react.suspense_list"),Um=Symbol.for("react.memo"),hr=Symbol.for("react.lazy"),fx=Symbol.for("react.offscreen"),M0=Symbol.iterator;function jo(t){return t===null||typeof t!="object"?null:(t=M0&&t[M0]||t["@@iterator"],typeof t=="function"?t:null)}var Oe=Object.assign,oh;function Qo(t){if(oh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);oh=e&&e[1]||""}return`
`+oh+t}var ah=!1;function lh(t,e){if(!t||ah)return"";ah=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{ah=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qo(t):""}function hT(t){switch(t.tag){case 5:return Qo(t.type);case 16:return Qo("Lazy");case 13:return Qo("Suspense");case 19:return Qo("SuspenseList");case 0:case 2:case 15:return t=lh(t.type,!1),t;case 11:return t=lh(t.type.render,!1),t;case 1:return t=lh(t.type,!0),t;default:return""}}function ef(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case di:return"Fragment";case ui:return"Portal";case Jh:return"Profiler";case Lm:return"StrictMode";case Xh:return"Suspense";case Zh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hx:return(t.displayName||"Context")+".Consumer";case dx:return(t._context.displayName||"Context")+".Provider";case Fm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Um:return e=t.displayName||null,e!==null?e:ef(t.type)||"Memo";case hr:e=t._payload,t=t._init;try{return ef(t(e))}catch{}}return null}function fT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ef(e);case 8:return e===Lm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function mT(t){var e=mx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Hl(t){t._valueTracker||(t._valueTracker=mT(t))}function px(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=mx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function zc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function tf(t,e){var n=e.checked;return Oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function L0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=zr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gx(t,e){e=e.checked,e!=null&&Mm(t,"checked",e,!1)}function nf(t,e){gx(t,e);var n=zr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rf(t,e.type,n):e.hasOwnProperty("defaultValue")&&rf(t,e.type,zr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function F0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function rf(t,e,n){(e!=="number"||zc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Yo=Array.isArray;function Ii(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+zr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function sf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function U0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Yo(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:zr(n)}}function yx(t,e){var n=zr(e.value),r=zr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function z0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function of(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Kl,_x=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Kl=Kl||document.createElement("div"),Kl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Kl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ba(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var oa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pT=["Webkit","ms","Moz","O"];Object.keys(oa).forEach(function(t){pT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),oa[e]=oa[t]})});function xx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||oa.hasOwnProperty(t)&&oa[t]?(""+e).trim():e+"px"}function wx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=xx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var gT=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function af(t,e){if(e){if(gT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function lf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cf=null;function zm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var uf=null,bi=null,Ti=null;function B0(t){if(t=cl(t)){if(typeof uf!="function")throw Error(B(280));var e=t.stateNode;e&&(e=$u(e),uf(t.stateNode,t.type,e))}}function Ex(t){bi?Ti?Ti.push(t):Ti=[t]:bi=t}function Ix(){if(bi){var t=bi,e=Ti;if(Ti=bi=null,B0(t),e)for(t=0;t<e.length;t++)B0(e[t])}}function bx(t,e){return t(e)}function Tx(){}var ch=!1;function Sx(t,e,n){if(ch)return t(e,n);ch=!0;try{return bx(t,e,n)}finally{ch=!1,(bi!==null||Ti!==null)&&(Tx(),Ix())}}function Ta(t,e){var n=t.stateNode;if(n===null)return null;var r=$u(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var df=!1;if(qn)try{var Do={};Object.defineProperty(Do,"passive",{get:function(){df=!0}}),window.addEventListener("test",Do,Do),window.removeEventListener("test",Do,Do)}catch{df=!1}function yT(t,e,n,r,s,i,o,a,l){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var aa=!1,Bc=null,$c=!1,hf=null,vT={onError:function(t){aa=!0,Bc=t}};function _T(t,e,n,r,s,i,o,a,l){aa=!1,Bc=null,yT.apply(vT,arguments)}function xT(t,e,n,r,s,i,o,a,l){if(_T.apply(this,arguments),aa){if(aa){var d=Bc;aa=!1,Bc=null}else throw Error(B(198));$c||($c=!0,hf=d)}}function qs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Nx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $0(t){if(qs(t)!==t)throw Error(B(188))}function wT(t){var e=t.alternate;if(!e){if(e=qs(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return $0(s),t;if(i===r)return $0(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function kx(t){return t=wT(t),t!==null?Cx(t):null}function Cx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Cx(t);if(e!==null)return e;t=t.sibling}return null}var Ax=qt.unstable_scheduleCallback,W0=qt.unstable_cancelCallback,ET=qt.unstable_shouldYield,IT=qt.unstable_requestPaint,ze=qt.unstable_now,bT=qt.unstable_getCurrentPriorityLevel,Bm=qt.unstable_ImmediatePriority,Px=qt.unstable_UserBlockingPriority,Wc=qt.unstable_NormalPriority,TT=qt.unstable_LowPriority,Rx=qt.unstable_IdlePriority,Fu=null,xn=null;function ST(t){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(Fu,t,void 0,(t.current.flags&128)===128)}catch{}}var un=Math.clz32?Math.clz32:CT,NT=Math.log,kT=Math.LN2;function CT(t){return t>>>=0,t===0?32:31-(NT(t)/kT|0)|0}var Gl=64,Ql=4194304;function Jo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Jo(a):(i&=o,i!==0&&(r=Jo(i)))}else o=n&~s,o!==0?r=Jo(o):i!==0&&(r=Jo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-un(e),s=1<<n,r|=t[n],e&=~s;return r}function AT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-un(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=AT(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function ff(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jx(){var t=Gl;return Gl<<=1,!(Gl&4194240)&&(Gl=64),t}function uh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function al(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-un(e),t[e]=n}function RT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-un(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function $m(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-un(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var _e=0;function Dx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ox,Wm,Vx,Mx,Lx,mf=!1,Yl=[],Tr=null,Sr=null,Nr=null,Sa=new Map,Na=new Map,mr=[],jT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function q0(t,e){switch(t){case"focusin":case"focusout":Tr=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":Nr=null;break;case"pointerover":case"pointerout":Sa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Na.delete(e.pointerId)}}function Oo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=cl(e),e!==null&&Wm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function DT(t,e,n,r,s){switch(e){case"focusin":return Tr=Oo(Tr,t,e,n,r,s),!0;case"dragenter":return Sr=Oo(Sr,t,e,n,r,s),!0;case"mouseover":return Nr=Oo(Nr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Sa.set(i,Oo(Sa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Na.set(i,Oo(Na.get(i)||null,t,e,n,r,s)),!0}return!1}function Fx(t){var e=_s(t.target);if(e!==null){var n=qs(e);if(n!==null){if(e=n.tag,e===13){if(e=Nx(n),e!==null){t.blockedOn=e,Lx(t.priority,function(){Vx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=pf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);cf=r,n.target.dispatchEvent(r),cf=null}else return e=cl(n),e!==null&&Wm(e),t.blockedOn=n,!1;e.shift()}return!0}function H0(t,e,n){yc(t)&&n.delete(e)}function OT(){mf=!1,Tr!==null&&yc(Tr)&&(Tr=null),Sr!==null&&yc(Sr)&&(Sr=null),Nr!==null&&yc(Nr)&&(Nr=null),Sa.forEach(H0),Na.forEach(H0)}function Vo(t,e){t.blockedOn===e&&(t.blockedOn=null,mf||(mf=!0,qt.unstable_scheduleCallback(qt.unstable_NormalPriority,OT)))}function ka(t){function e(s){return Vo(s,t)}if(0<Yl.length){Vo(Yl[0],t);for(var n=1;n<Yl.length;n++){var r=Yl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Tr!==null&&Vo(Tr,t),Sr!==null&&Vo(Sr,t),Nr!==null&&Vo(Nr,t),Sa.forEach(e),Na.forEach(e),n=0;n<mr.length;n++)r=mr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<mr.length&&(n=mr[0],n.blockedOn===null);)Fx(n),n.blockedOn===null&&mr.shift()}var Si=er.ReactCurrentBatchConfig,Hc=!0;function VT(t,e,n,r){var s=_e,i=Si.transition;Si.transition=null;try{_e=1,qm(t,e,n,r)}finally{_e=s,Si.transition=i}}function MT(t,e,n,r){var s=_e,i=Si.transition;Si.transition=null;try{_e=4,qm(t,e,n,r)}finally{_e=s,Si.transition=i}}function qm(t,e,n,r){if(Hc){var s=pf(t,e,n,r);if(s===null)xh(t,e,r,Kc,n),q0(t,r);else if(DT(s,t,e,n,r))r.stopPropagation();else if(q0(t,r),e&4&&-1<jT.indexOf(t)){for(;s!==null;){var i=cl(s);if(i!==null&&Ox(i),i=pf(t,e,n,r),i===null&&xh(t,e,r,Kc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else xh(t,e,r,null,n)}}var Kc=null;function pf(t,e,n,r){if(Kc=null,t=zm(r),t=_s(t),t!==null)if(e=qs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Nx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Kc=t,null}function Ux(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bT()){case Bm:return 1;case Px:return 4;case Wc:case TT:return 16;case Rx:return 536870912;default:return 16}default:return 16}}var wr=null,Hm=null,vc=null;function zx(){if(vc)return vc;var t,e=Hm,n=e.length,r,s="value"in wr?wr.value:wr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return vc=s.slice(t,1<r?1-r:void 0)}function _c(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Jl(){return!0}function K0(){return!1}function Yt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Jl:K0,this.isPropagationStopped=K0,this}return Oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Jl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Jl)},persist:function(){},isPersistent:Jl}),e}var so={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Km=Yt(so),ll=Oe({},so,{view:0,detail:0}),LT=Yt(ll),dh,hh,Mo,Uu=Oe({},ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Mo&&(Mo&&t.type==="mousemove"?(dh=t.screenX-Mo.screenX,hh=t.screenY-Mo.screenY):hh=dh=0,Mo=t),dh)},movementY:function(t){return"movementY"in t?t.movementY:hh}}),G0=Yt(Uu),FT=Oe({},Uu,{dataTransfer:0}),UT=Yt(FT),zT=Oe({},ll,{relatedTarget:0}),fh=Yt(zT),BT=Oe({},so,{animationName:0,elapsedTime:0,pseudoElement:0}),$T=Yt(BT),WT=Oe({},so,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qT=Yt(WT),HT=Oe({},so,{data:0}),Q0=Yt(HT),KT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=QT[t])?!!e[t]:!1}function Gm(){return YT}var JT=Oe({},ll,{key:function(t){if(t.key){var e=KT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_c(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?GT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gm,charCode:function(t){return t.type==="keypress"?_c(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_c(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),XT=Yt(JT),ZT=Oe({},Uu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Y0=Yt(ZT),eS=Oe({},ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gm}),tS=Yt(eS),nS=Oe({},so,{propertyName:0,elapsedTime:0,pseudoElement:0}),rS=Yt(nS),sS=Oe({},Uu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iS=Yt(sS),oS=[9,13,27,32],Qm=qn&&"CompositionEvent"in window,la=null;qn&&"documentMode"in document&&(la=document.documentMode);var aS=qn&&"TextEvent"in window&&!la,Bx=qn&&(!Qm||la&&8<la&&11>=la),J0=" ",X0=!1;function $x(t,e){switch(t){case"keyup":return oS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hi=!1;function lS(t,e){switch(t){case"compositionend":return Wx(e);case"keypress":return e.which!==32?null:(X0=!0,J0);case"textInput":return t=e.data,t===J0&&X0?null:t;default:return null}}function cS(t,e){if(hi)return t==="compositionend"||!Qm&&$x(t,e)?(t=zx(),vc=Hm=wr=null,hi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Bx&&e.locale!=="ko"?null:e.data;default:return null}}var uS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!uS[t.type]:e==="textarea"}function qx(t,e,n,r){Ex(r),e=Gc(e,"onChange"),0<e.length&&(n=new Km("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ca=null,Ca=null;function dS(t){n1(t,0)}function zu(t){var e=pi(t);if(px(e))return t}function hS(t,e){if(t==="change")return e}var Hx=!1;if(qn){var mh;if(qn){var ph="oninput"in document;if(!ph){var ey=document.createElement("div");ey.setAttribute("oninput","return;"),ph=typeof ey.oninput=="function"}mh=ph}else mh=!1;Hx=mh&&(!document.documentMode||9<document.documentMode)}function ty(){ca&&(ca.detachEvent("onpropertychange",Kx),Ca=ca=null)}function Kx(t){if(t.propertyName==="value"&&zu(Ca)){var e=[];qx(e,Ca,t,zm(t)),Sx(dS,e)}}function fS(t,e,n){t==="focusin"?(ty(),ca=e,Ca=n,ca.attachEvent("onpropertychange",Kx)):t==="focusout"&&ty()}function mS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zu(Ca)}function pS(t,e){if(t==="click")return zu(e)}function gS(t,e){if(t==="input"||t==="change")return zu(e)}function yS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hn=typeof Object.is=="function"?Object.is:yS;function Aa(t,e){if(hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Yh.call(e,s)||!hn(t[s],e[s]))return!1}return!0}function ny(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ry(t,e){var n=ny(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ny(n)}}function Gx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Gx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Qx(){for(var t=window,e=zc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=zc(t.document)}return e}function Ym(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vS(t){var e=Qx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Gx(n.ownerDocument.documentElement,n)){if(r!==null&&Ym(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=ry(n,i);var o=ry(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _S=qn&&"documentMode"in document&&11>=document.documentMode,fi=null,gf=null,ua=null,yf=!1;function sy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yf||fi==null||fi!==zc(r)||(r=fi,"selectionStart"in r&&Ym(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ua&&Aa(ua,r)||(ua=r,r=Gc(gf,"onSelect"),0<r.length&&(e=new Km("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=fi)))}function Xl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var mi={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionend:Xl("Transition","TransitionEnd")},gh={},Yx={};qn&&(Yx=document.createElement("div").style,"AnimationEvent"in window||(delete mi.animationend.animation,delete mi.animationiteration.animation,delete mi.animationstart.animation),"TransitionEvent"in window||delete mi.transitionend.transition);function Bu(t){if(gh[t])return gh[t];if(!mi[t])return t;var e=mi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Yx)return gh[t]=e[n];return t}var Jx=Bu("animationend"),Xx=Bu("animationiteration"),Zx=Bu("animationstart"),e1=Bu("transitionend"),t1=new Map,iy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kr(t,e){t1.set(t,e),Ws(e,[t])}for(var yh=0;yh<iy.length;yh++){var vh=iy[yh],xS=vh.toLowerCase(),wS=vh[0].toUpperCase()+vh.slice(1);Kr(xS,"on"+wS)}Kr(Jx,"onAnimationEnd");Kr(Xx,"onAnimationIteration");Kr(Zx,"onAnimationStart");Kr("dblclick","onDoubleClick");Kr("focusin","onFocus");Kr("focusout","onBlur");Kr(e1,"onTransitionEnd");ji("onMouseEnter",["mouseout","mouseover"]);ji("onMouseLeave",["mouseout","mouseover"]);ji("onPointerEnter",["pointerout","pointerover"]);ji("onPointerLeave",["pointerout","pointerover"]);Ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ES=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xo));function oy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,xT(r,e,void 0,t),t.currentTarget=null}function n1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,d=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;oy(s,a,d),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,d=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;oy(s,a,d),i=l}}}if($c)throw t=hf,$c=!1,hf=null,t}function Se(t,e){var n=e[Ef];n===void 0&&(n=e[Ef]=new Set);var r=t+"__bubble";n.has(r)||(r1(e,t,2,!1),n.add(r))}function _h(t,e,n){var r=0;e&&(r|=4),r1(n,t,r,e)}var Zl="_reactListening"+Math.random().toString(36).slice(2);function Pa(t){if(!t[Zl]){t[Zl]=!0,ux.forEach(function(n){n!=="selectionchange"&&(ES.has(n)||_h(n,!1,t),_h(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zl]||(e[Zl]=!0,_h("selectionchange",!1,e))}}function r1(t,e,n,r){switch(Ux(e)){case 1:var s=VT;break;case 4:s=MT;break;default:s=qm}n=s.bind(null,e,n,t),s=void 0,!df||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function xh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=_s(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Sx(function(){var d=i,h=zm(n),m=[];e:{var p=t1.get(t);if(p!==void 0){var E=Km,N=t;switch(t){case"keypress":if(_c(n)===0)break e;case"keydown":case"keyup":E=XT;break;case"focusin":N="focus",E=fh;break;case"focusout":N="blur",E=fh;break;case"beforeblur":case"afterblur":E=fh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=G0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=UT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=tS;break;case Jx:case Xx:case Zx:E=$T;break;case e1:E=rS;break;case"scroll":E=LT;break;case"wheel":E=iS;break;case"copy":case"cut":case"paste":E=qT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=Y0}var S=(e&4)!==0,A=!S&&t==="scroll",w=S?p!==null?p+"Capture":null:p;S=[];for(var v=d,y;v!==null;){y=v;var T=y.stateNode;if(y.tag===5&&T!==null&&(y=T,w!==null&&(T=Ta(v,w),T!=null&&S.push(Ra(v,T,y)))),A)break;v=v.return}0<S.length&&(p=new E(p,N,null,n,h),m.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",p&&n!==cf&&(N=n.relatedTarget||n.fromElement)&&(_s(N)||N[Hn]))break e;if((E||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,E?(N=n.relatedTarget||n.toElement,E=d,N=N?_s(N):null,N!==null&&(A=qs(N),N!==A||N.tag!==5&&N.tag!==6)&&(N=null)):(E=null,N=d),E!==N)){if(S=G0,T="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(S=Y0,T="onPointerLeave",w="onPointerEnter",v="pointer"),A=E==null?p:pi(E),y=N==null?p:pi(N),p=new S(T,v+"leave",E,n,h),p.target=A,p.relatedTarget=y,T=null,_s(h)===d&&(S=new S(w,v+"enter",N,n,h),S.target=y,S.relatedTarget=A,T=S),A=T,E&&N)t:{for(S=E,w=N,v=0,y=S;y;y=Zs(y))v++;for(y=0,T=w;T;T=Zs(T))y++;for(;0<v-y;)S=Zs(S),v--;for(;0<y-v;)w=Zs(w),y--;for(;v--;){if(S===w||w!==null&&S===w.alternate)break t;S=Zs(S),w=Zs(w)}S=null}else S=null;E!==null&&ay(m,p,E,S,!1),N!==null&&A!==null&&ay(m,A,N,S,!0)}}e:{if(p=d?pi(d):window,E=p.nodeName&&p.nodeName.toLowerCase(),E==="select"||E==="input"&&p.type==="file")var j=hS;else if(Z0(p))if(Hx)j=gS;else{j=mS;var O=fS}else(E=p.nodeName)&&E.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(j=pS);if(j&&(j=j(t,d))){qx(m,j,n,h);break e}O&&O(t,p,d),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&rf(p,"number",p.value)}switch(O=d?pi(d):window,t){case"focusin":(Z0(O)||O.contentEditable==="true")&&(fi=O,gf=d,ua=null);break;case"focusout":ua=gf=fi=null;break;case"mousedown":yf=!0;break;case"contextmenu":case"mouseup":case"dragend":yf=!1,sy(m,n,h);break;case"selectionchange":if(_S)break;case"keydown":case"keyup":sy(m,n,h)}var I;if(Qm)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else hi?$x(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Bx&&n.locale!=="ko"&&(hi||_!=="onCompositionStart"?_==="onCompositionEnd"&&hi&&(I=zx()):(wr=h,Hm="value"in wr?wr.value:wr.textContent,hi=!0)),O=Gc(d,_),0<O.length&&(_=new Q0(_,t,null,n,h),m.push({event:_,listeners:O}),I?_.data=I:(I=Wx(n),I!==null&&(_.data=I)))),(I=aS?lS(t,n):cS(t,n))&&(d=Gc(d,"onBeforeInput"),0<d.length&&(h=new Q0("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:d}),h.data=I))}n1(m,e)})}function Ra(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Gc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ta(t,n),i!=null&&r.unshift(Ra(t,i,s)),i=Ta(t,e),i!=null&&r.push(Ra(t,i,s))),t=t.return}return r}function Zs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ay(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,d=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&d!==null&&(a=d,s?(l=Ta(n,i),l!=null&&o.unshift(Ra(n,l,a))):s||(l=Ta(n,i),l!=null&&o.push(Ra(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var IS=/\r\n?/g,bS=/\u0000|\uFFFD/g;function ly(t){return(typeof t=="string"?t:""+t).replace(IS,`
`).replace(bS,"")}function ec(t,e,n){if(e=ly(e),ly(t)!==e&&n)throw Error(B(425))}function Qc(){}var vf=null,_f=null;function xf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wf=typeof setTimeout=="function"?setTimeout:void 0,TS=typeof clearTimeout=="function"?clearTimeout:void 0,cy=typeof Promise=="function"?Promise:void 0,SS=typeof queueMicrotask=="function"?queueMicrotask:typeof cy<"u"?function(t){return cy.resolve(null).then(t).catch(NS)}:wf;function NS(t){setTimeout(function(){throw t})}function wh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ka(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ka(e)}function kr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var io=Math.random().toString(36).slice(2),yn="__reactFiber$"+io,ja="__reactProps$"+io,Hn="__reactContainer$"+io,Ef="__reactEvents$"+io,kS="__reactListeners$"+io,CS="__reactHandles$"+io;function _s(t){var e=t[yn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Hn]||n[yn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=uy(t);t!==null;){if(n=t[yn])return n;t=uy(t)}return e}t=n,n=t.parentNode}return null}function cl(t){return t=t[yn]||t[Hn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function pi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function $u(t){return t[ja]||null}var If=[],gi=-1;function Gr(t){return{current:t}}function Ne(t){0>gi||(t.current=If[gi],If[gi]=null,gi--)}function Ie(t,e){gi++,If[gi]=t.current,t.current=e}var Br={},pt=Gr(Br),jt=Gr(!1),Ns=Br;function Di(t,e){var n=t.type.contextTypes;if(!n)return Br;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Dt(t){return t=t.childContextTypes,t!=null}function Yc(){Ne(jt),Ne(pt)}function dy(t,e,n){if(pt.current!==Br)throw Error(B(168));Ie(pt,e),Ie(jt,n)}function s1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,fT(t)||"Unknown",s));return Oe({},n,r)}function Jc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Br,Ns=pt.current,Ie(pt,t),Ie(jt,jt.current),!0}function hy(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=s1(t,e,Ns),r.__reactInternalMemoizedMergedChildContext=t,Ne(jt),Ne(pt),Ie(pt,t)):Ne(jt),Ie(jt,n)}var Dn=null,Wu=!1,Eh=!1;function i1(t){Dn===null?Dn=[t]:Dn.push(t)}function AS(t){Wu=!0,i1(t)}function Qr(){if(!Eh&&Dn!==null){Eh=!0;var t=0,e=_e;try{var n=Dn;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Dn=null,Wu=!1}catch(s){throw Dn!==null&&(Dn=Dn.slice(t+1)),Ax(Bm,Qr),s}finally{_e=e,Eh=!1}}return null}var yi=[],vi=0,Xc=null,Zc=0,Xt=[],Zt=0,ks=null,Vn=1,Mn="";function us(t,e){yi[vi++]=Zc,yi[vi++]=Xc,Xc=t,Zc=e}function o1(t,e,n){Xt[Zt++]=Vn,Xt[Zt++]=Mn,Xt[Zt++]=ks,ks=t;var r=Vn;t=Mn;var s=32-un(r)-1;r&=~(1<<s),n+=1;var i=32-un(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Vn=1<<32-un(e)+s|n<<s|r,Mn=i+t}else Vn=1<<i|n<<s|r,Mn=t}function Jm(t){t.return!==null&&(us(t,1),o1(t,1,0))}function Xm(t){for(;t===Xc;)Xc=yi[--vi],yi[vi]=null,Zc=yi[--vi],yi[vi]=null;for(;t===ks;)ks=Xt[--Zt],Xt[Zt]=null,Mn=Xt[--Zt],Xt[Zt]=null,Vn=Xt[--Zt],Xt[Zt]=null}var $t=null,zt=null,Ce=!1,cn=null;function a1(t,e){var n=en(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$t=t,zt=kr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$t=t,zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ks!==null?{id:Vn,overflow:Mn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=en(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$t=t,zt=null,!0):!1;default:return!1}}function bf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Tf(t){if(Ce){var e=zt;if(e){var n=e;if(!fy(t,e)){if(bf(t))throw Error(B(418));e=kr(n.nextSibling);var r=$t;e&&fy(t,e)?a1(r,n):(t.flags=t.flags&-4097|2,Ce=!1,$t=t)}}else{if(bf(t))throw Error(B(418));t.flags=t.flags&-4097|2,Ce=!1,$t=t}}}function my(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$t=t}function tc(t){if(t!==$t)return!1;if(!Ce)return my(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xf(t.type,t.memoizedProps)),e&&(e=zt)){if(bf(t))throw l1(),Error(B(418));for(;e;)a1(t,e),e=kr(e.nextSibling)}if(my(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){zt=kr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}zt=null}}else zt=$t?kr(t.stateNode.nextSibling):null;return!0}function l1(){for(var t=zt;t;)t=kr(t.nextSibling)}function Oi(){zt=$t=null,Ce=!1}function Zm(t){cn===null?cn=[t]:cn.push(t)}var PS=er.ReactCurrentBatchConfig;function Lo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function nc(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function py(t){var e=t._init;return e(t._payload)}function c1(t){function e(w,v){if(t){var y=w.deletions;y===null?(w.deletions=[v],w.flags|=16):y.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function s(w,v){return w=Rr(w,v),w.index=0,w.sibling=null,w}function i(w,v,y){return w.index=y,t?(y=w.alternate,y!==null?(y=y.index,y<v?(w.flags|=2,v):y):(w.flags|=2,v)):(w.flags|=1048576,v)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,v,y,T){return v===null||v.tag!==6?(v=Ch(y,w.mode,T),v.return=w,v):(v=s(v,y),v.return=w,v)}function l(w,v,y,T){var j=y.type;return j===di?h(w,v,y.props.children,T,y.key):v!==null&&(v.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===hr&&py(j)===v.type)?(T=s(v,y.props),T.ref=Lo(w,v,y),T.return=w,T):(T=Sc(y.type,y.key,y.props,null,w.mode,T),T.ref=Lo(w,v,y),T.return=w,T)}function d(w,v,y,T){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=Ah(y,w.mode,T),v.return=w,v):(v=s(v,y.children||[]),v.return=w,v)}function h(w,v,y,T,j){return v===null||v.tag!==7?(v=Is(y,w.mode,T,j),v.return=w,v):(v=s(v,y),v.return=w,v)}function m(w,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Ch(""+v,w.mode,y),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ql:return y=Sc(v.type,v.key,v.props,null,w.mode,y),y.ref=Lo(w,null,v),y.return=w,y;case ui:return v=Ah(v,w.mode,y),v.return=w,v;case hr:var T=v._init;return m(w,T(v._payload),y)}if(Yo(v)||jo(v))return v=Is(v,w.mode,y,null),v.return=w,v;nc(w,v)}return null}function p(w,v,y,T){var j=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return j!==null?null:a(w,v,""+y,T);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ql:return y.key===j?l(w,v,y,T):null;case ui:return y.key===j?d(w,v,y,T):null;case hr:return j=y._init,p(w,v,j(y._payload),T)}if(Yo(y)||jo(y))return j!==null?null:h(w,v,y,T,null);nc(w,y)}return null}function E(w,v,y,T,j){if(typeof T=="string"&&T!==""||typeof T=="number")return w=w.get(y)||null,a(v,w,""+T,j);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ql:return w=w.get(T.key===null?y:T.key)||null,l(v,w,T,j);case ui:return w=w.get(T.key===null?y:T.key)||null,d(v,w,T,j);case hr:var O=T._init;return E(w,v,y,O(T._payload),j)}if(Yo(T)||jo(T))return w=w.get(y)||null,h(v,w,T,j,null);nc(v,T)}return null}function N(w,v,y,T){for(var j=null,O=null,I=v,_=v=0,x=null;I!==null&&_<y.length;_++){I.index>_?(x=I,I=null):x=I.sibling;var C=p(w,I,y[_],T);if(C===null){I===null&&(I=x);break}t&&I&&C.alternate===null&&e(w,I),v=i(C,v,_),O===null?j=C:O.sibling=C,O=C,I=x}if(_===y.length)return n(w,I),Ce&&us(w,_),j;if(I===null){for(;_<y.length;_++)I=m(w,y[_],T),I!==null&&(v=i(I,v,_),O===null?j=I:O.sibling=I,O=I);return Ce&&us(w,_),j}for(I=r(w,I);_<y.length;_++)x=E(I,w,_,y[_],T),x!==null&&(t&&x.alternate!==null&&I.delete(x.key===null?_:x.key),v=i(x,v,_),O===null?j=x:O.sibling=x,O=x);return t&&I.forEach(function(P){return e(w,P)}),Ce&&us(w,_),j}function S(w,v,y,T){var j=jo(y);if(typeof j!="function")throw Error(B(150));if(y=j.call(y),y==null)throw Error(B(151));for(var O=j=null,I=v,_=v=0,x=null,C=y.next();I!==null&&!C.done;_++,C=y.next()){I.index>_?(x=I,I=null):x=I.sibling;var P=p(w,I,C.value,T);if(P===null){I===null&&(I=x);break}t&&I&&P.alternate===null&&e(w,I),v=i(P,v,_),O===null?j=P:O.sibling=P,O=P,I=x}if(C.done)return n(w,I),Ce&&us(w,_),j;if(I===null){for(;!C.done;_++,C=y.next())C=m(w,C.value,T),C!==null&&(v=i(C,v,_),O===null?j=C:O.sibling=C,O=C);return Ce&&us(w,_),j}for(I=r(w,I);!C.done;_++,C=y.next())C=E(I,w,_,C.value,T),C!==null&&(t&&C.alternate!==null&&I.delete(C.key===null?_:C.key),v=i(C,v,_),O===null?j=C:O.sibling=C,O=C);return t&&I.forEach(function(D){return e(w,D)}),Ce&&us(w,_),j}function A(w,v,y,T){if(typeof y=="object"&&y!==null&&y.type===di&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case ql:e:{for(var j=y.key,O=v;O!==null;){if(O.key===j){if(j=y.type,j===di){if(O.tag===7){n(w,O.sibling),v=s(O,y.props.children),v.return=w,w=v;break e}}else if(O.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===hr&&py(j)===O.type){n(w,O.sibling),v=s(O,y.props),v.ref=Lo(w,O,y),v.return=w,w=v;break e}n(w,O);break}else e(w,O);O=O.sibling}y.type===di?(v=Is(y.props.children,w.mode,T,y.key),v.return=w,w=v):(T=Sc(y.type,y.key,y.props,null,w.mode,T),T.ref=Lo(w,v,y),T.return=w,w=T)}return o(w);case ui:e:{for(O=y.key;v!==null;){if(v.key===O)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){n(w,v.sibling),v=s(v,y.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else e(w,v);v=v.sibling}v=Ah(y,w.mode,T),v.return=w,w=v}return o(w);case hr:return O=y._init,A(w,v,O(y._payload),T)}if(Yo(y))return N(w,v,y,T);if(jo(y))return S(w,v,y,T);nc(w,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(n(w,v.sibling),v=s(v,y),v.return=w,w=v):(n(w,v),v=Ch(y,w.mode,T),v.return=w,w=v),o(w)):n(w,v)}return A}var Vi=c1(!0),u1=c1(!1),eu=Gr(null),tu=null,_i=null,ep=null;function tp(){ep=_i=tu=null}function np(t){var e=eu.current;Ne(eu),t._currentValue=e}function Sf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ni(t,e){tu=t,ep=_i=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(At=!0),t.firstContext=null)}function nn(t){var e=t._currentValue;if(ep!==t)if(t={context:t,memoizedValue:e,next:null},_i===null){if(tu===null)throw Error(B(308));_i=t,tu.dependencies={lanes:0,firstContext:t}}else _i=_i.next=t;return e}var xs=null;function rp(t){xs===null?xs=[t]:xs.push(t)}function d1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,rp(e)):(n.next=s.next,s.next=n),e.interleaved=n,Kn(t,r)}function Kn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fr=!1;function sp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function h1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $n(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Cr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Kn(t,n)}return s=r.interleaved,s===null?(e.next=e,rp(r)):(e.next=s.next,s.next=e),r.interleaved=e,Kn(t,n)}function xc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$m(t,n)}}function gy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function nu(t,e,n,r){var s=t.updateQueue;fr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,d=l.next;l.next=null,o===null?i=d:o.next=d,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=d:a.next=d,h.lastBaseUpdate=l))}if(i!==null){var m=s.baseState;o=0,h=d=l=null,a=i;do{var p=a.lane,E=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:E,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var N=t,S=a;switch(p=e,E=n,S.tag){case 1:if(N=S.payload,typeof N=="function"){m=N.call(E,m,p);break e}m=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=S.payload,p=typeof N=="function"?N.call(E,m,p):N,p==null)break e;m=Oe({},m,p);break e;case 2:fr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else E={eventTime:E,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(d=h=E,l=m):h=h.next=E,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(l=m),s.baseState=l,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);As|=o,t.lanes=o,t.memoizedState=m}}function yy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var ul={},wn=Gr(ul),Da=Gr(ul),Oa=Gr(ul);function ws(t){if(t===ul)throw Error(B(174));return t}function ip(t,e){switch(Ie(Oa,e),Ie(Da,t),Ie(wn,ul),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:of(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=of(e,t)}Ne(wn),Ie(wn,e)}function Mi(){Ne(wn),Ne(Da),Ne(Oa)}function f1(t){ws(Oa.current);var e=ws(wn.current),n=of(e,t.type);e!==n&&(Ie(Da,t),Ie(wn,n))}function op(t){Da.current===t&&(Ne(wn),Ne(Da))}var Ae=Gr(0);function ru(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ih=[];function ap(){for(var t=0;t<Ih.length;t++)Ih[t]._workInProgressVersionPrimary=null;Ih.length=0}var wc=er.ReactCurrentDispatcher,bh=er.ReactCurrentBatchConfig,Cs=0,je=null,Ke=null,Xe=null,su=!1,da=!1,Va=0,RS=0;function ut(){throw Error(B(321))}function lp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!hn(t[n],e[n]))return!1;return!0}function cp(t,e,n,r,s,i){if(Cs=i,je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wc.current=t===null||t.memoizedState===null?VS:MS,t=n(r,s),da){i=0;do{if(da=!1,Va=0,25<=i)throw Error(B(301));i+=1,Xe=Ke=null,e.updateQueue=null,wc.current=LS,t=n(r,s)}while(da)}if(wc.current=iu,e=Ke!==null&&Ke.next!==null,Cs=0,Xe=Ke=je=null,su=!1,e)throw Error(B(300));return t}function up(){var t=Va!==0;return Va=0,t}function gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?je.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function rn(){if(Ke===null){var t=je.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=Xe===null?je.memoizedState:Xe.next;if(e!==null)Xe=e,Ke=t;else{if(t===null)throw Error(B(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Xe===null?je.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function Ma(t,e){return typeof e=="function"?e(t):e}function Th(t){var e=rn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=Ke,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,d=i;do{var h=d.lane;if((Cs&h)===h)l!==null&&(l=l.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};l===null?(a=l=m,o=r):l=l.next=m,je.lanes|=h,As|=h}d=d.next}while(d!==null&&d!==i);l===null?o=r:l.next=a,hn(r,e.memoizedState)||(At=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,je.lanes|=i,As|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Sh(t){var e=rn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);hn(i,e.memoizedState)||(At=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function m1(){}function p1(t,e){var n=je,r=rn(),s=e(),i=!hn(r.memoizedState,s);if(i&&(r.memoizedState=s,At=!0),r=r.queue,dp(v1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,La(9,y1.bind(null,n,r,s,e),void 0,null),et===null)throw Error(B(349));Cs&30||g1(n,e,s)}return s}function g1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function y1(t,e,n,r){e.value=n,e.getSnapshot=r,_1(e)&&x1(t)}function v1(t,e,n){return n(function(){_1(e)&&x1(t)})}function _1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hn(t,n)}catch{return!0}}function x1(t){var e=Kn(t,1);e!==null&&dn(e,t,1,-1)}function vy(t){var e=gn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:t},e.queue=t,t=t.dispatch=OS.bind(null,je,t),[e.memoizedState,t]}function La(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function w1(){return rn().memoizedState}function Ec(t,e,n,r){var s=gn();je.flags|=t,s.memoizedState=La(1|e,n,void 0,r===void 0?null:r)}function qu(t,e,n,r){var s=rn();r=r===void 0?null:r;var i=void 0;if(Ke!==null){var o=Ke.memoizedState;if(i=o.destroy,r!==null&&lp(r,o.deps)){s.memoizedState=La(e,n,i,r);return}}je.flags|=t,s.memoizedState=La(1|e,n,i,r)}function _y(t,e){return Ec(8390656,8,t,e)}function dp(t,e){return qu(2048,8,t,e)}function E1(t,e){return qu(4,2,t,e)}function I1(t,e){return qu(4,4,t,e)}function b1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function T1(t,e,n){return n=n!=null?n.concat([t]):null,qu(4,4,b1.bind(null,e,t),n)}function hp(){}function S1(t,e){var n=rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function N1(t,e){var n=rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function k1(t,e,n){return Cs&21?(hn(n,e)||(n=jx(),je.lanes|=n,As|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,At=!0),t.memoizedState=n)}function jS(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=bh.transition;bh.transition={};try{t(!1),e()}finally{_e=n,bh.transition=r}}function C1(){return rn().memoizedState}function DS(t,e,n){var r=Pr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},A1(t))P1(e,n);else if(n=d1(t,e,n,r),n!==null){var s=wt();dn(n,t,r,s),R1(n,e,r)}}function OS(t,e,n){var r=Pr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(A1(t))P1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,hn(a,o)){var l=e.interleaved;l===null?(s.next=s,rp(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=d1(t,e,s,r),n!==null&&(s=wt(),dn(n,t,r,s),R1(n,e,r))}}function A1(t){var e=t.alternate;return t===je||e!==null&&e===je}function P1(t,e){da=su=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function R1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$m(t,n)}}var iu={readContext:nn,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useInsertionEffect:ut,useLayoutEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useMutableSource:ut,useSyncExternalStore:ut,useId:ut,unstable_isNewReconciler:!1},VS={readContext:nn,useCallback:function(t,e){return gn().memoizedState=[t,e===void 0?null:e],t},useContext:nn,useEffect:_y,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ec(4194308,4,b1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ec(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ec(4,2,t,e)},useMemo:function(t,e){var n=gn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=gn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=DS.bind(null,je,t),[r.memoizedState,t]},useRef:function(t){var e=gn();return t={current:t},e.memoizedState=t},useState:vy,useDebugValue:hp,useDeferredValue:function(t){return gn().memoizedState=t},useTransition:function(){var t=vy(!1),e=t[0];return t=jS.bind(null,t[1]),gn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=je,s=gn();if(Ce){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),et===null)throw Error(B(349));Cs&30||g1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,_y(v1.bind(null,r,i,t),[t]),r.flags|=2048,La(9,y1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=gn(),e=et.identifierPrefix;if(Ce){var n=Mn,r=Vn;n=(r&~(1<<32-un(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Va++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=RS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},MS={readContext:nn,useCallback:S1,useContext:nn,useEffect:dp,useImperativeHandle:T1,useInsertionEffect:E1,useLayoutEffect:I1,useMemo:N1,useReducer:Th,useRef:w1,useState:function(){return Th(Ma)},useDebugValue:hp,useDeferredValue:function(t){var e=rn();return k1(e,Ke.memoizedState,t)},useTransition:function(){var t=Th(Ma)[0],e=rn().memoizedState;return[t,e]},useMutableSource:m1,useSyncExternalStore:p1,useId:C1,unstable_isNewReconciler:!1},LS={readContext:nn,useCallback:S1,useContext:nn,useEffect:dp,useImperativeHandle:T1,useInsertionEffect:E1,useLayoutEffect:I1,useMemo:N1,useReducer:Sh,useRef:w1,useState:function(){return Sh(Ma)},useDebugValue:hp,useDeferredValue:function(t){var e=rn();return Ke===null?e.memoizedState=t:k1(e,Ke.memoizedState,t)},useTransition:function(){var t=Sh(Ma)[0],e=rn().memoizedState;return[t,e]},useMutableSource:m1,useSyncExternalStore:p1,useId:C1,unstable_isNewReconciler:!1};function an(t,e){if(t&&t.defaultProps){e=Oe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Nf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Oe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Hu={isMounted:function(t){return(t=t._reactInternals)?qs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wt(),s=Pr(t),i=$n(r,s);i.payload=e,n!=null&&(i.callback=n),e=Cr(t,i,s),e!==null&&(dn(e,t,s,r),xc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wt(),s=Pr(t),i=$n(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Cr(t,i,s),e!==null&&(dn(e,t,s,r),xc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wt(),r=Pr(t),s=$n(n,r);s.tag=2,e!=null&&(s.callback=e),e=Cr(t,s,r),e!==null&&(dn(e,t,r,n),xc(e,t,r))}};function xy(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Aa(n,r)||!Aa(s,i):!0}function j1(t,e,n){var r=!1,s=Br,i=e.contextType;return typeof i=="object"&&i!==null?i=nn(i):(s=Dt(e)?Ns:pt.current,r=e.contextTypes,i=(r=r!=null)?Di(t,s):Br),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function wy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Hu.enqueueReplaceState(e,e.state,null)}function kf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},sp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=nn(i):(i=Dt(e)?Ns:pt.current,s.context=Di(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Nf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Hu.enqueueReplaceState(s,s.state,null),nu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Li(t,e){try{var n="",r=e;do n+=hT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Nh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Cf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var FS=typeof WeakMap=="function"?WeakMap:Map;function D1(t,e,n){n=$n(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){au||(au=!0,Ff=r),Cf(t,e)},n}function O1(t,e,n){n=$n(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Cf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Cf(t,e),typeof r!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ey(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new FS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=ZS.bind(null,t,e,n),e.then(t,t))}function Iy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function by(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$n(-1,1),e.tag=2,Cr(n,e,1))),n.lanes|=1),t)}var US=er.ReactCurrentOwner,At=!1;function vt(t,e,n,r){e.child=t===null?u1(e,null,n,r):Vi(e,t.child,n,r)}function Ty(t,e,n,r,s){n=n.render;var i=e.ref;return Ni(e,s),r=cp(t,e,n,r,i,s),n=up(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gn(t,e,s)):(Ce&&n&&Jm(e),e.flags|=1,vt(t,e,r,s),e.child)}function Sy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!xp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,V1(t,e,i,r,s)):(t=Sc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Aa,n(o,r)&&t.ref===e.ref)return Gn(t,e,s)}return e.flags|=1,t=Rr(i,r),t.ref=e.ref,t.return=e,e.child=t}function V1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Aa(i,r)&&t.ref===e.ref)if(At=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(At=!0);else return e.lanes=t.lanes,Gn(t,e,s)}return Af(t,e,n,r,s)}function M1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(wi,Ft),Ft|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(wi,Ft),Ft|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ie(wi,Ft),Ft|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ie(wi,Ft),Ft|=r;return vt(t,e,s,n),e.child}function L1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Af(t,e,n,r,s){var i=Dt(n)?Ns:pt.current;return i=Di(e,i),Ni(e,s),n=cp(t,e,n,r,i,s),r=up(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gn(t,e,s)):(Ce&&r&&Jm(e),e.flags|=1,vt(t,e,n,s),e.child)}function Ny(t,e,n,r,s){if(Dt(n)){var i=!0;Jc(e)}else i=!1;if(Ni(e,s),e.stateNode===null)Ic(t,e),j1(e,n,r),kf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=nn(d):(d=Dt(n)?Ns:pt.current,d=Di(e,d));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==d)&&wy(e,o,r,d),fr=!1;var p=e.memoizedState;o.state=p,nu(e,r,o,s),l=e.memoizedState,a!==r||p!==l||jt.current||fr?(typeof h=="function"&&(Nf(e,n,h,r),l=e.memoizedState),(a=fr||xy(e,n,a,r,p,l,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=d,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,h1(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:an(e.type,a),o.props=d,m=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=nn(l):(l=Dt(n)?Ns:pt.current,l=Di(e,l));var E=n.getDerivedStateFromProps;(h=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||p!==l)&&wy(e,o,r,l),fr=!1,p=e.memoizedState,o.state=p,nu(e,r,o,s);var N=e.memoizedState;a!==m||p!==N||jt.current||fr?(typeof E=="function"&&(Nf(e,n,E,r),N=e.memoizedState),(d=fr||xy(e,n,d,r,p,N,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=l,r=d):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Pf(t,e,n,r,i,s)}function Pf(t,e,n,r,s,i){L1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&hy(e,n,!1),Gn(t,e,i);r=e.stateNode,US.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Vi(e,t.child,null,i),e.child=Vi(e,null,a,i)):vt(t,e,a,i),e.memoizedState=r.state,s&&hy(e,n,!0),e.child}function F1(t){var e=t.stateNode;e.pendingContext?dy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dy(t,e.context,!1),ip(t,e.containerInfo)}function ky(t,e,n,r,s){return Oi(),Zm(s),e.flags|=256,vt(t,e,n,r),e.child}var Rf={dehydrated:null,treeContext:null,retryLane:0};function jf(t){return{baseLanes:t,cachePool:null,transitions:null}}function U1(t,e,n){var r=e.pendingProps,s=Ae.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ie(Ae,s&1),t===null)return Tf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Qu(o,r,0,null),t=Is(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=jf(n),e.memoizedState=Rf,t):fp(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return zS(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Rr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Rr(a,i):(i=Is(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?jf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Rf,r}return i=t.child,t=i.sibling,r=Rr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function fp(t,e){return e=Qu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function rc(t,e,n,r){return r!==null&&Zm(r),Vi(e,t.child,null,n),t=fp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Nh(Error(B(422))),rc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Qu({mode:"visible",children:r.children},s,0,null),i=Is(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Vi(e,t.child,null,o),e.child.memoizedState=jf(o),e.memoizedState=Rf,i);if(!(e.mode&1))return rc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(B(419)),r=Nh(i,r,void 0),rc(t,e,o,r)}if(a=(o&t.childLanes)!==0,At||a){if(r=et,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Kn(t,s),dn(r,t,s,-1))}return _p(),r=Nh(Error(B(421))),rc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=eN.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,zt=kr(s.nextSibling),$t=e,Ce=!0,cn=null,t!==null&&(Xt[Zt++]=Vn,Xt[Zt++]=Mn,Xt[Zt++]=ks,Vn=t.id,Mn=t.overflow,ks=e),e=fp(e,r.children),e.flags|=4096,e)}function Cy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Sf(t.return,e,n)}function kh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function z1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(vt(t,e,r.children,n),r=Ae.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Cy(t,n,e);else if(t.tag===19)Cy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ie(Ae,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ru(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),kh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ru(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}kh(e,!0,n,null,i);break;case"together":kh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ic(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Gn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),As|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Rr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function BS(t,e,n){switch(e.tag){case 3:F1(e),Oi();break;case 5:f1(e);break;case 1:Dt(e.type)&&Jc(e);break;case 4:ip(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ie(eu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ie(Ae,Ae.current&1),e.flags|=128,null):n&e.child.childLanes?U1(t,e,n):(Ie(Ae,Ae.current&1),t=Gn(t,e,n),t!==null?t.sibling:null);Ie(Ae,Ae.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return z1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(Ae,Ae.current),r)break;return null;case 22:case 23:return e.lanes=0,M1(t,e,n)}return Gn(t,e,n)}var B1,Df,$1,W1;B1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Df=function(){};$1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ws(wn.current);var i=null;switch(n){case"input":s=tf(t,s),r=tf(t,r),i=[];break;case"select":s=Oe({},s,{value:void 0}),r=Oe({},r,{value:void 0}),i=[];break;case"textarea":s=sf(t,s),r=sf(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Qc)}af(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var a=s[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ia.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var l=r[d];if(a=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&l!==a&&(l!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(d,n)),n=l;else d==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(d,l)):d==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(d,""+l):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ia.hasOwnProperty(d)?(l!=null&&d==="onScroll"&&Se("scroll",t),i||a===l||(i=[])):(i=i||[]).push(d,l))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};W1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fo(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $S(t,e,n){var r=e.pendingProps;switch(Xm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(e),null;case 1:return Dt(e.type)&&Yc(),dt(e),null;case 3:return r=e.stateNode,Mi(),Ne(jt),Ne(pt),ap(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(tc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,cn!==null&&(Bf(cn),cn=null))),Df(t,e),dt(e),null;case 5:op(e);var s=ws(Oa.current);if(n=e.type,t!==null&&e.stateNode!=null)$1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return dt(e),null}if(t=ws(wn.current),tc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[yn]=e,r[ja]=i,t=(e.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(s=0;s<Xo.length;s++)Se(Xo[s],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":L0(r,i),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Se("invalid",r);break;case"textarea":U0(r,i),Se("invalid",r)}af(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ec(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ec(r.textContent,a,t),s=["children",""+a]):Ia.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Se("scroll",r)}switch(n){case"input":Hl(r),F0(r,i,!0);break;case"textarea":Hl(r),z0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Qc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[yn]=e,t[ja]=r,B1(t,e,!1,!1),e.stateNode=t;e:{switch(o=lf(n,r),n){case"dialog":Se("cancel",t),Se("close",t),s=r;break;case"iframe":case"object":case"embed":Se("load",t),s=r;break;case"video":case"audio":for(s=0;s<Xo.length;s++)Se(Xo[s],t);s=r;break;case"source":Se("error",t),s=r;break;case"img":case"image":case"link":Se("error",t),Se("load",t),s=r;break;case"details":Se("toggle",t),s=r;break;case"input":L0(t,r),s=tf(t,r),Se("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Oe({},r,{value:void 0}),Se("invalid",t);break;case"textarea":U0(t,r),s=sf(t,r),Se("invalid",t);break;default:s=r}af(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?wx(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&_x(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ba(t,l):typeof l=="number"&&ba(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ia.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Se("scroll",t):l!=null&&Mm(t,i,l,o))}switch(n){case"input":Hl(t),F0(t,r,!1);break;case"textarea":Hl(t),z0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+zr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ii(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ii(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Qc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dt(e),null;case 6:if(t&&e.stateNode!=null)W1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=ws(Oa.current),ws(wn.current),tc(e)){if(r=e.stateNode,n=e.memoizedProps,r[yn]=e,(i=r.nodeValue!==n)&&(t=$t,t!==null))switch(t.tag){case 3:ec(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ec(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yn]=e,e.stateNode=r}return dt(e),null;case 13:if(Ne(Ae),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&zt!==null&&e.mode&1&&!(e.flags&128))l1(),Oi(),e.flags|=98560,i=!1;else if(i=tc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[yn]=e}else Oi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dt(e),i=!1}else cn!==null&&(Bf(cn),cn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ae.current&1?Ge===0&&(Ge=3):_p())),e.updateQueue!==null&&(e.flags|=4),dt(e),null);case 4:return Mi(),Df(t,e),t===null&&Pa(e.stateNode.containerInfo),dt(e),null;case 10:return np(e.type._context),dt(e),null;case 17:return Dt(e.type)&&Yc(),dt(e),null;case 19:if(Ne(Ae),i=e.memoizedState,i===null)return dt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Fo(i,!1);else{if(Ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ru(t),o!==null){for(e.flags|=128,Fo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(Ae,Ae.current&1|2),e.child}t=t.sibling}i.tail!==null&&ze()>Fi&&(e.flags|=128,r=!0,Fo(i,!1),e.lanes=4194304)}else{if(!r)if(t=ru(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ce)return dt(e),null}else 2*ze()-i.renderingStartTime>Fi&&n!==1073741824&&(e.flags|=128,r=!0,Fo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ze(),e.sibling=null,n=Ae.current,Ie(Ae,r?n&1|2:n&1),e):(dt(e),null);case 22:case 23:return vp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ft&1073741824&&(dt(e),e.subtreeFlags&6&&(e.flags|=8192)):dt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function WS(t,e){switch(Xm(e),e.tag){case 1:return Dt(e.type)&&Yc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Mi(),Ne(jt),Ne(pt),ap(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return op(e),null;case 13:if(Ne(Ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Oi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ne(Ae),null;case 4:return Mi(),null;case 10:return np(e.type._context),null;case 22:case 23:return vp(),null;case 24:return null;default:return null}}var sc=!1,ft=!1,qS=typeof WeakSet=="function"?WeakSet:Set,H=null;function xi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(t,e,r)}else n.current=null}function Of(t,e,n){try{n()}catch(r){Me(t,e,r)}}var Ay=!1;function HS(t,e){if(vf=Hc,t=Qx(),Ym(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,d=0,h=0,m=t,p=null;t:for(;;){for(var E;m!==n||s!==0&&m.nodeType!==3||(a=o+s),m!==i||r!==0&&m.nodeType!==3||(l=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(E=m.firstChild)!==null;)p=m,m=E;for(;;){if(m===t)break t;if(p===n&&++d===s&&(a=o),p===i&&++h===r&&(l=o),(E=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=E}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(_f={focusedElem:t,selectionRange:n},Hc=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var S=N.memoizedProps,A=N.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?S:an(e.type,S),A);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(T){Me(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return N=Ay,Ay=!1,N}function ha(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Of(e,n,i)}s=s.next}while(s!==r)}}function Ku(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Vf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function q1(t){var e=t.alternate;e!==null&&(t.alternate=null,q1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yn],delete e[ja],delete e[Ef],delete e[kS],delete e[CS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function H1(t){return t.tag===5||t.tag===3||t.tag===4}function Py(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||H1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Qc));else if(r!==4&&(t=t.child,t!==null))for(Mf(t,e,n),t=t.sibling;t!==null;)Mf(t,e,n),t=t.sibling}function Lf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Lf(t,e,n),t=t.sibling;t!==null;)Lf(t,e,n),t=t.sibling}var rt=null,ln=!1;function ar(t,e,n){for(n=n.child;n!==null;)K1(t,e,n),n=n.sibling}function K1(t,e,n){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(Fu,n)}catch{}switch(n.tag){case 5:ft||xi(n,e);case 6:var r=rt,s=ln;rt=null,ar(t,e,n),rt=r,ln=s,rt!==null&&(ln?(t=rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(ln?(t=rt,n=n.stateNode,t.nodeType===8?wh(t.parentNode,n):t.nodeType===1&&wh(t,n),ka(t)):wh(rt,n.stateNode));break;case 4:r=rt,s=ln,rt=n.stateNode.containerInfo,ln=!0,ar(t,e,n),rt=r,ln=s;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Of(n,e,o),s=s.next}while(s!==r)}ar(t,e,n);break;case 1:if(!ft&&(xi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Me(n,e,a)}ar(t,e,n);break;case 21:ar(t,e,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,ar(t,e,n),ft=r):ar(t,e,n);break;default:ar(t,e,n)}}function Ry(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new qS),e.forEach(function(r){var s=tN.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function on(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:rt=a.stateNode,ln=!1;break e;case 3:rt=a.stateNode.containerInfo,ln=!0;break e;case 4:rt=a.stateNode.containerInfo,ln=!0;break e}a=a.return}if(rt===null)throw Error(B(160));K1(i,o,s),rt=null,ln=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(d){Me(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)G1(e,t),e=e.sibling}function G1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(on(e,t),pn(t),r&4){try{ha(3,t,t.return),Ku(3,t)}catch(S){Me(t,t.return,S)}try{ha(5,t,t.return)}catch(S){Me(t,t.return,S)}}break;case 1:on(e,t),pn(t),r&512&&n!==null&&xi(n,n.return);break;case 5:if(on(e,t),pn(t),r&512&&n!==null&&xi(n,n.return),t.flags&32){var s=t.stateNode;try{ba(s,"")}catch(S){Me(t,t.return,S)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&gx(s,i),lf(a,o);var d=lf(a,i);for(o=0;o<l.length;o+=2){var h=l[o],m=l[o+1];h==="style"?wx(s,m):h==="dangerouslySetInnerHTML"?_x(s,m):h==="children"?ba(s,m):Mm(s,h,m,d)}switch(a){case"input":nf(s,i);break;case"textarea":yx(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var E=i.value;E!=null?Ii(s,!!i.multiple,E,!1):p!==!!i.multiple&&(i.defaultValue!=null?Ii(s,!!i.multiple,i.defaultValue,!0):Ii(s,!!i.multiple,i.multiple?[]:"",!1))}s[ja]=i}catch(S){Me(t,t.return,S)}}break;case 6:if(on(e,t),pn(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(S){Me(t,t.return,S)}}break;case 3:if(on(e,t),pn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ka(e.containerInfo)}catch(S){Me(t,t.return,S)}break;case 4:on(e,t),pn(t);break;case 13:on(e,t),pn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(gp=ze())),r&4&&Ry(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ft=(d=ft)||h,on(e,t),ft=d):on(e,t),pn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(H=t,h=t.child;h!==null;){for(m=H=h;H!==null;){switch(p=H,E=p.child,p.tag){case 0:case 11:case 14:case 15:ha(4,p,p.return);break;case 1:xi(p,p.return);var N=p.stateNode;if(typeof N.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(S){Me(r,n,S)}}break;case 5:xi(p,p.return);break;case 22:if(p.memoizedState!==null){Dy(m);continue}}E!==null?(E.return=p,H=E):Dy(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=m.stateNode,l=m.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=xx("display",o))}catch(S){Me(t,t.return,S)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(S){Me(t,t.return,S)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:on(e,t),pn(t),r&4&&Ry(t);break;case 21:break;default:on(e,t),pn(t)}}function pn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(H1(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ba(s,""),r.flags&=-33);var i=Py(t);Lf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Py(t);Mf(t,a,o);break;default:throw Error(B(161))}}catch(l){Me(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function KS(t,e,n){H=t,Q1(t)}function Q1(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||sc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||ft;a=sc;var d=ft;if(sc=o,(ft=l)&&!d)for(H=s;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?Oy(s):l!==null?(l.return=o,H=l):Oy(s);for(;i!==null;)H=i,Q1(i),i=i.sibling;H=s,sc=a,ft=d}jy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):jy(t)}}function jy(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ft||Ku(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ft)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:an(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&yy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}yy(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&ka(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}ft||e.flags&512&&Vf(e)}catch(p){Me(e,e.return,p)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function Dy(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function Oy(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ku(4,e)}catch(l){Me(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Me(e,s,l)}}var i=e.return;try{Vf(e)}catch(l){Me(e,i,l)}break;case 5:var o=e.return;try{Vf(e)}catch(l){Me(e,o,l)}}}catch(l){Me(e,e.return,l)}if(e===t){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var GS=Math.ceil,ou=er.ReactCurrentDispatcher,mp=er.ReactCurrentOwner,tn=er.ReactCurrentBatchConfig,he=0,et=null,qe=null,it=0,Ft=0,wi=Gr(0),Ge=0,Fa=null,As=0,Gu=0,pp=0,fa=null,Ct=null,gp=0,Fi=1/0,jn=null,au=!1,Ff=null,Ar=null,ic=!1,Er=null,lu=0,ma=0,Uf=null,bc=-1,Tc=0;function wt(){return he&6?ze():bc!==-1?bc:bc=ze()}function Pr(t){return t.mode&1?he&2&&it!==0?it&-it:PS.transition!==null?(Tc===0&&(Tc=jx()),Tc):(t=_e,t!==0||(t=window.event,t=t===void 0?16:Ux(t.type)),t):1}function dn(t,e,n,r){if(50<ma)throw ma=0,Uf=null,Error(B(185));al(t,n,r),(!(he&2)||t!==et)&&(t===et&&(!(he&2)&&(Gu|=n),Ge===4&&pr(t,it)),Ot(t,r),n===1&&he===0&&!(e.mode&1)&&(Fi=ze()+500,Wu&&Qr()))}function Ot(t,e){var n=t.callbackNode;PT(t,e);var r=qc(t,t===et?it:0);if(r===0)n!==null&&W0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&W0(n),e===1)t.tag===0?AS(Vy.bind(null,t)):i1(Vy.bind(null,t)),SS(function(){!(he&6)&&Qr()}),n=null;else{switch(Dx(r)){case 1:n=Bm;break;case 4:n=Px;break;case 16:n=Wc;break;case 536870912:n=Rx;break;default:n=Wc}n=rw(n,Y1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Y1(t,e){if(bc=-1,Tc=0,he&6)throw Error(B(327));var n=t.callbackNode;if(ki()&&t.callbackNode!==n)return null;var r=qc(t,t===et?it:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=cu(t,r);else{e=r;var s=he;he|=2;var i=X1();(et!==t||it!==e)&&(jn=null,Fi=ze()+500,Es(t,e));do try{JS();break}catch(a){J1(t,a)}while(!0);tp(),ou.current=i,he=s,qe!==null?e=0:(et=null,it=0,e=Ge)}if(e!==0){if(e===2&&(s=ff(t),s!==0&&(r=s,e=zf(t,s))),e===1)throw n=Fa,Es(t,0),pr(t,r),Ot(t,ze()),n;if(e===6)pr(t,r);else{if(s=t.current.alternate,!(r&30)&&!QS(s)&&(e=cu(t,r),e===2&&(i=ff(t),i!==0&&(r=i,e=zf(t,i))),e===1))throw n=Fa,Es(t,0),pr(t,r),Ot(t,ze()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:ds(t,Ct,jn);break;case 3:if(pr(t,r),(r&130023424)===r&&(e=gp+500-ze(),10<e)){if(qc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){wt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=wf(ds.bind(null,t,Ct,jn),e);break}ds(t,Ct,jn);break;case 4:if(pr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-un(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*GS(r/1960))-r,10<r){t.timeoutHandle=wf(ds.bind(null,t,Ct,jn),r);break}ds(t,Ct,jn);break;case 5:ds(t,Ct,jn);break;default:throw Error(B(329))}}}return Ot(t,ze()),t.callbackNode===n?Y1.bind(null,t):null}function zf(t,e){var n=fa;return t.current.memoizedState.isDehydrated&&(Es(t,e).flags|=256),t=cu(t,e),t!==2&&(e=Ct,Ct=n,e!==null&&Bf(e)),t}function Bf(t){Ct===null?Ct=t:Ct.push.apply(Ct,t)}function QS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!hn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pr(t,e){for(e&=~pp,e&=~Gu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-un(e),r=1<<n;t[n]=-1,e&=~r}}function Vy(t){if(he&6)throw Error(B(327));ki();var e=qc(t,0);if(!(e&1))return Ot(t,ze()),null;var n=cu(t,e);if(t.tag!==0&&n===2){var r=ff(t);r!==0&&(e=r,n=zf(t,r))}if(n===1)throw n=Fa,Es(t,0),pr(t,e),Ot(t,ze()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ds(t,Ct,jn),Ot(t,ze()),null}function yp(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(Fi=ze()+500,Wu&&Qr())}}function Ps(t){Er!==null&&Er.tag===0&&!(he&6)&&ki();var e=he;he|=1;var n=tn.transition,r=_e;try{if(tn.transition=null,_e=1,t)return t()}finally{_e=r,tn.transition=n,he=e,!(he&6)&&Qr()}}function vp(){Ft=wi.current,Ne(wi)}function Es(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,TS(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(Xm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yc();break;case 3:Mi(),Ne(jt),Ne(pt),ap();break;case 5:op(r);break;case 4:Mi();break;case 13:Ne(Ae);break;case 19:Ne(Ae);break;case 10:np(r.type._context);break;case 22:case 23:vp()}n=n.return}if(et=t,qe=t=Rr(t.current,null),it=Ft=e,Ge=0,Fa=null,pp=Gu=As=0,Ct=fa=null,xs!==null){for(e=0;e<xs.length;e++)if(n=xs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}xs=null}return t}function J1(t,e){do{var n=qe;try{if(tp(),wc.current=iu,su){for(var r=je.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}su=!1}if(Cs=0,Xe=Ke=je=null,da=!1,Va=0,mp.current=null,n===null||n.return===null){Ge=1,Fa=e,qe=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=it,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var d=l,h=a,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var E=Iy(o);if(E!==null){E.flags&=-257,by(E,o,a,i,e),E.mode&1&&Ey(i,d,e),e=E,l=d;var N=e.updateQueue;if(N===null){var S=new Set;S.add(l),e.updateQueue=S}else N.add(l);break e}else{if(!(e&1)){Ey(i,d,e),_p();break e}l=Error(B(426))}}else if(Ce&&a.mode&1){var A=Iy(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),by(A,o,a,i,e),Zm(Li(l,a));break e}}i=l=Li(l,a),Ge!==4&&(Ge=2),fa===null?fa=[i]:fa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=D1(i,l,e);gy(i,w);break e;case 1:a=l;var v=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ar===null||!Ar.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var T=O1(i,a,e);gy(i,T);break e}}i=i.return}while(i!==null)}ew(n)}catch(j){e=j,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function X1(){var t=ou.current;return ou.current=iu,t===null?iu:t}function _p(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),et===null||!(As&268435455)&&!(Gu&268435455)||pr(et,it)}function cu(t,e){var n=he;he|=2;var r=X1();(et!==t||it!==e)&&(jn=null,Es(t,e));do try{YS();break}catch(s){J1(t,s)}while(!0);if(tp(),he=n,ou.current=r,qe!==null)throw Error(B(261));return et=null,it=0,Ge}function YS(){for(;qe!==null;)Z1(qe)}function JS(){for(;qe!==null&&!ET();)Z1(qe)}function Z1(t){var e=nw(t.alternate,t,Ft);t.memoizedProps=t.pendingProps,e===null?ew(t):qe=e,mp.current=null}function ew(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=WS(n,e),n!==null){n.flags&=32767,qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ge=6,qe=null;return}}else if(n=$S(n,e,Ft),n!==null){qe=n;return}if(e=e.sibling,e!==null){qe=e;return}qe=e=t}while(e!==null);Ge===0&&(Ge=5)}function ds(t,e,n){var r=_e,s=tn.transition;try{tn.transition=null,_e=1,XS(t,e,n,r)}finally{tn.transition=s,_e=r}return null}function XS(t,e,n,r){do ki();while(Er!==null);if(he&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(RT(t,i),t===et&&(qe=et=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ic||(ic=!0,rw(Wc,function(){return ki(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=tn.transition,tn.transition=null;var o=_e;_e=1;var a=he;he|=4,mp.current=null,HS(t,n),G1(n,t),vS(_f),Hc=!!vf,_f=vf=null,t.current=n,KS(n),IT(),he=a,_e=o,tn.transition=i}else t.current=n;if(ic&&(ic=!1,Er=t,lu=s),i=t.pendingLanes,i===0&&(Ar=null),ST(n.stateNode),Ot(t,ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(au)throw au=!1,t=Ff,Ff=null,t;return lu&1&&t.tag!==0&&ki(),i=t.pendingLanes,i&1?t===Uf?ma++:(ma=0,Uf=t):ma=0,Qr(),null}function ki(){if(Er!==null){var t=Dx(lu),e=tn.transition,n=_e;try{if(tn.transition=null,_e=16>t?16:t,Er===null)var r=!1;else{if(t=Er,Er=null,lu=0,he&6)throw Error(B(331));var s=he;for(he|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var d=a[l];for(H=d;H!==null;){var h=H;switch(h.tag){case 0:case 11:case 15:ha(8,h,i)}var m=h.child;if(m!==null)m.return=h,H=m;else for(;H!==null;){h=H;var p=h.sibling,E=h.return;if(q1(h),h===d){H=null;break}if(p!==null){p.return=E,H=p;break}H=E}}}var N=i.alternate;if(N!==null){var S=N.child;if(S!==null){N.child=null;do{var A=S.sibling;S.sibling=null,S=A}while(S!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ha(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,H=w;break e}H=i.return}}var v=t.current;for(H=v;H!==null;){o=H;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,H=y;else e:for(o=v;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ku(9,a)}}catch(j){Me(a,a.return,j)}if(a===o){H=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,H=T;break e}H=a.return}}if(he=s,Qr(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(Fu,t)}catch{}r=!0}return r}finally{_e=n,tn.transition=e}}return!1}function My(t,e,n){e=Li(n,e),e=D1(t,e,1),t=Cr(t,e,1),e=wt(),t!==null&&(al(t,1,e),Ot(t,e))}function Me(t,e,n){if(t.tag===3)My(t,t,n);else for(;e!==null;){if(e.tag===3){My(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ar===null||!Ar.has(r))){t=Li(n,t),t=O1(e,t,1),e=Cr(e,t,1),t=wt(),e!==null&&(al(e,1,t),Ot(e,t));break}}e=e.return}}function ZS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wt(),t.pingedLanes|=t.suspendedLanes&n,et===t&&(it&n)===n&&(Ge===4||Ge===3&&(it&130023424)===it&&500>ze()-gp?Es(t,0):pp|=n),Ot(t,e)}function tw(t,e){e===0&&(t.mode&1?(e=Ql,Ql<<=1,!(Ql&130023424)&&(Ql=4194304)):e=1);var n=wt();t=Kn(t,e),t!==null&&(al(t,e,n),Ot(t,n))}function eN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),tw(t,n)}function tN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),tw(t,n)}var nw;nw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jt.current)At=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return At=!1,BS(t,e,n);At=!!(t.flags&131072)}else At=!1,Ce&&e.flags&1048576&&o1(e,Zc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ic(t,e),t=e.pendingProps;var s=Di(e,pt.current);Ni(e,n),s=cp(null,e,r,t,s,n);var i=up();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dt(r)?(i=!0,Jc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,sp(e),s.updater=Hu,e.stateNode=s,s._reactInternals=e,kf(e,r,t,n),e=Pf(null,e,r,!0,i,n)):(e.tag=0,Ce&&i&&Jm(e),vt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ic(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=rN(r),t=an(r,t),s){case 0:e=Af(null,e,r,t,n);break e;case 1:e=Ny(null,e,r,t,n);break e;case 11:e=Ty(null,e,r,t,n);break e;case 14:e=Sy(null,e,r,an(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:an(r,s),Af(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:an(r,s),Ny(t,e,r,s,n);case 3:e:{if(F1(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,h1(t,e),nu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Li(Error(B(423)),e),e=ky(t,e,r,n,s);break e}else if(r!==s){s=Li(Error(B(424)),e),e=ky(t,e,r,n,s);break e}else for(zt=kr(e.stateNode.containerInfo.firstChild),$t=e,Ce=!0,cn=null,n=u1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Oi(),r===s){e=Gn(t,e,n);break e}vt(t,e,r,n)}e=e.child}return e;case 5:return f1(e),t===null&&Tf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,xf(r,s)?o=null:i!==null&&xf(r,i)&&(e.flags|=32),L1(t,e),vt(t,e,o,n),e.child;case 6:return t===null&&Tf(e),null;case 13:return U1(t,e,n);case 4:return ip(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Vi(e,null,r,n):vt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:an(r,s),Ty(t,e,r,s,n);case 7:return vt(t,e,e.pendingProps,n),e.child;case 8:return vt(t,e,e.pendingProps.children,n),e.child;case 12:return vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ie(eu,r._currentValue),r._currentValue=o,i!==null)if(hn(i.value,o)){if(i.children===s.children&&!jt.current){e=Gn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=$n(-1,n&-n),l.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?l.next=l:(l.next=h.next,h.next=l),d.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Sf(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Sf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ni(e,n),s=nn(s),r=r(s),e.flags|=1,vt(t,e,r,n),e.child;case 14:return r=e.type,s=an(r,e.pendingProps),s=an(r.type,s),Sy(t,e,r,s,n);case 15:return V1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:an(r,s),Ic(t,e),e.tag=1,Dt(r)?(t=!0,Jc(e)):t=!1,Ni(e,n),j1(e,r,s),kf(e,r,s,n),Pf(null,e,r,!0,t,n);case 19:return z1(t,e,n);case 22:return M1(t,e,n)}throw Error(B(156,e.tag))};function rw(t,e){return Ax(t,e)}function nN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(t,e,n,r){return new nN(t,e,n,r)}function xp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rN(t){if(typeof t=="function")return xp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fm)return 11;if(t===Um)return 14}return 2}function Rr(t,e){var n=t.alternate;return n===null?(n=en(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Sc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")xp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case di:return Is(n.children,s,i,e);case Lm:o=8,s|=8;break;case Jh:return t=en(12,n,e,s|2),t.elementType=Jh,t.lanes=i,t;case Xh:return t=en(13,n,e,s),t.elementType=Xh,t.lanes=i,t;case Zh:return t=en(19,n,e,s),t.elementType=Zh,t.lanes=i,t;case fx:return Qu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dx:o=10;break e;case hx:o=9;break e;case Fm:o=11;break e;case Um:o=14;break e;case hr:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=en(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Is(t,e,n,r){return t=en(7,t,r,e),t.lanes=n,t}function Qu(t,e,n,r){return t=en(22,t,r,e),t.elementType=fx,t.lanes=n,t.stateNode={isHidden:!1},t}function Ch(t,e,n){return t=en(6,t,null,e),t.lanes=n,t}function Ah(t,e,n){return e=en(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sN(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uh(0),this.expirationTimes=uh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function wp(t,e,n,r,s,i,o,a,l){return t=new sN(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=en(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sp(i),t}function iN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ui,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function sw(t){if(!t)return Br;t=t._reactInternals;e:{if(qs(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Dt(n))return s1(t,n,e)}return e}function iw(t,e,n,r,s,i,o,a,l){return t=wp(n,r,!0,t,s,i,o,a,l),t.context=sw(null),n=t.current,r=wt(),s=Pr(n),i=$n(r,s),i.callback=e??null,Cr(n,i,s),t.current.lanes=s,al(t,s,r),Ot(t,r),t}function Yu(t,e,n,r){var s=e.current,i=wt(),o=Pr(s);return n=sw(n),e.context===null?e.context=n:e.pendingContext=n,e=$n(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Cr(s,e,o),t!==null&&(dn(t,s,o,i),xc(t,s,o)),o}function uu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ly(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ep(t,e){Ly(t,e),(t=t.alternate)&&Ly(t,e)}function oN(){return null}var ow=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ip(t){this._internalRoot=t}Ju.prototype.render=Ip.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Yu(t,e,null,null)};Ju.prototype.unmount=Ip.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ps(function(){Yu(null,t,null,null)}),e[Hn]=null}};function Ju(t){this._internalRoot=t}Ju.prototype.unstable_scheduleHydration=function(t){if(t){var e=Mx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<mr.length&&e!==0&&e<mr[n].priority;n++);mr.splice(n,0,t),n===0&&Fx(t)}};function bp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Fy(){}function aN(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=uu(o);i.call(d)}}var o=iw(e,r,t,0,null,!1,!1,"",Fy);return t._reactRootContainer=o,t[Hn]=o.current,Pa(t.nodeType===8?t.parentNode:t),Ps(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var d=uu(l);a.call(d)}}var l=wp(t,0,!1,null,null,!1,!1,"",Fy);return t._reactRootContainer=l,t[Hn]=l.current,Pa(t.nodeType===8?t.parentNode:t),Ps(function(){Yu(e,l,n,r)}),l}function Zu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=uu(o);a.call(l)}}Yu(e,o,t,s)}else o=aN(n,e,t,s,r);return uu(o)}Ox=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Jo(e.pendingLanes);n!==0&&($m(e,n|1),Ot(e,ze()),!(he&6)&&(Fi=ze()+500,Qr()))}break;case 13:Ps(function(){var r=Kn(t,1);if(r!==null){var s=wt();dn(r,t,1,s)}}),Ep(t,1)}};Wm=function(t){if(t.tag===13){var e=Kn(t,134217728);if(e!==null){var n=wt();dn(e,t,134217728,n)}Ep(t,134217728)}};Vx=function(t){if(t.tag===13){var e=Pr(t),n=Kn(t,e);if(n!==null){var r=wt();dn(n,t,e,r)}Ep(t,e)}};Mx=function(){return _e};Lx=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};uf=function(t,e,n){switch(e){case"input":if(nf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=$u(r);if(!s)throw Error(B(90));px(r),nf(r,s)}}}break;case"textarea":yx(t,n);break;case"select":e=n.value,e!=null&&Ii(t,!!n.multiple,e,!1)}};bx=yp;Tx=Ps;var lN={usingClientEntryPoint:!1,Events:[cl,pi,$u,Ex,Ix,yp]},Uo={findFiberByHostInstance:_s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cN={bundleType:Uo.bundleType,version:Uo.version,rendererPackageName:Uo.rendererPackageName,rendererConfig:Uo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:er.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=kx(t),t===null?null:t.stateNode},findFiberByHostInstance:Uo.findFiberByHostInstance||oN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oc.isDisabled&&oc.supportsFiber)try{Fu=oc.inject(cN),xn=oc}catch{}}Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lN;Qt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bp(e))throw Error(B(200));return iN(t,e,null,n)};Qt.createRoot=function(t,e){if(!bp(t))throw Error(B(299));var n=!1,r="",s=ow;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=wp(t,1,!1,null,null,n,!1,r,s),t[Hn]=e.current,Pa(t.nodeType===8?t.parentNode:t),new Ip(e)};Qt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=kx(e),t=t===null?null:t.stateNode,t};Qt.flushSync=function(t){return Ps(t)};Qt.hydrate=function(t,e,n){if(!Xu(e))throw Error(B(200));return Zu(null,t,e,!0,n)};Qt.hydrateRoot=function(t,e,n){if(!bp(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=ow;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=iw(e,null,t,1,n??null,s,!1,i,o),t[Hn]=e.current,Pa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ju(e)};Qt.render=function(t,e,n){if(!Xu(e))throw Error(B(200));return Zu(null,t,e,!1,n)};Qt.unmountComponentAtNode=function(t){if(!Xu(t))throw Error(B(40));return t._reactRootContainer?(Ps(function(){Zu(null,null,t,!1,function(){t._reactRootContainer=null,t[Hn]=null})}),!0):!1};Qt.unstable_batchedUpdates=yp;Qt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Xu(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Zu(t,e,n,!1,r)};Qt.version="18.3.1-next-f1338f8080-20240426";function aw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aw)}catch(t){console.error(t)}}aw(),ax.exports=Qt;var uN=ax.exports,Uy=uN;Uc.createRoot=Uy.createRoot,Uc.hydrateRoot=Uy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ua(){return Ua=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ua.apply(this,arguments)}var Ir;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ir||(Ir={}));const zy="popstate";function dN(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return $f("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:du(s)}return fN(e,n,null,t)}function Fe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function lw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hN(){return Math.random().toString(36).substr(2,8)}function By(t,e){return{usr:t.state,key:t.key,idx:e}}function $f(t,e,n,r){return n===void 0&&(n=null),Ua({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?oo(e):e,{state:n,key:e&&e.key||r||hN()})}function du(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function oo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function fN(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Ir.Pop,l=null,d=h();d==null&&(d=0,o.replaceState(Ua({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function m(){a=Ir.Pop;let A=h(),w=A==null?null:A-d;d=A,l&&l({action:a,location:S.location,delta:w})}function p(A,w){a=Ir.Push;let v=$f(S.location,A,w);d=h()+1;let y=By(v,d),T=S.createHref(v);try{o.pushState(y,"",T)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(T)}i&&l&&l({action:a,location:S.location,delta:1})}function E(A,w){a=Ir.Replace;let v=$f(S.location,A,w);d=h();let y=By(v,d),T=S.createHref(v);o.replaceState(y,"",T),i&&l&&l({action:a,location:S.location,delta:0})}function N(A){let w=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof A=="string"?A:du(A);return v=v.replace(/ $/,"%20"),Fe(w,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,w)}let S={get action(){return a},get location(){return t(s,o)},listen(A){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(zy,m),l=A,()=>{s.removeEventListener(zy,m),l=null}},createHref(A){return e(s,A)},createURL:N,encodeLocation(A){let w=N(A);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:E,go(A){return o.go(A)}};return S}var $y;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})($y||($y={}));function mN(t,e,n){return n===void 0&&(n="/"),pN(t,e,n)}function pN(t,e,n,r){let s=typeof e=="string"?oo(e):e,i=Ui(s.pathname||"/",n);if(i==null)return null;let o=cw(t);gN(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let d=NN(i);a=TN(o[l],d)}return a}function cw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Fe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let d=jr([r,l.relativePath]),h=n.concat(l);i.children&&i.children.length>0&&(Fe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),cw(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:IN(d,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of uw(i.path))s(i,o,l)}),e}function uw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=uw(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function gN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:bN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const yN=/^:[\w-]+$/,vN=3,_N=2,xN=1,wN=10,EN=-2,Wy=t=>t==="*";function IN(t,e){let n=t.split("/"),r=n.length;return n.some(Wy)&&(r+=EN),e&&(r+=_N),n.filter(s=>!Wy(s)).reduce((s,i)=>s+(yN.test(i)?vN:i===""?xN:wN),r)}function bN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function TN(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],d=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",m=Wf({path:l.relativePath,caseSensitive:l.caseSensitive,end:d},h),p=l.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:jr([i,m.pathname]),pathnameBase:PN(jr([i,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(i=jr([i,m.pathnameBase]))}return o}function Wf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=SN(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((d,h,m)=>{let{paramName:p,isOptional:E}=h;if(p==="*"){let S=a[m]||"";o=i.slice(0,i.length-S.length).replace(/(.)\/+$/,"$1")}const N=a[m];return E&&!N?d[p]=void 0:d[p]=(N||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function SN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),lw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function NN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return lw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ui(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function kN(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?oo(t):t;return{pathname:n?n.startsWith("/")?n:CN(n,e):e,search:RN(r),hash:jN(s)}}function CN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ph(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function AN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function dw(t,e){let n=AN(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function hw(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=oo(t):(s=Ua({},t),Fe(!s.pathname||!s.pathname.includes("?"),Ph("?","pathname","search",s)),Fe(!s.pathname||!s.pathname.includes("#"),Ph("#","pathname","hash",s)),Fe(!s.search||!s.search.includes("#"),Ph("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),m-=1;s.pathname=p.join("/")}a=m>=0?e[m]:"/"}let l=kN(s,a),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(d||h)&&(l.pathname+="/"),l}const jr=t=>t.join("/").replace(/\/\/+/g,"/"),PN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),RN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,jN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function DN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const fw=["post","put","patch","delete"];new Set(fw);const ON=["get",...fw];new Set(ON);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function za(){return za=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},za.apply(this,arguments)}const ed=k.createContext(null),mw=k.createContext(null),Yr=k.createContext(null),td=k.createContext(null),Jr=k.createContext({outlet:null,matches:[],isDataRoute:!1}),pw=k.createContext(null);function VN(t,e){let{relative:n}=e===void 0?{}:e;dl()||Fe(!1);let{basename:r,navigator:s}=k.useContext(Yr),{hash:i,pathname:o,search:a}=nd(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:jr([r,o])),s.createHref({pathname:l,search:a,hash:i})}function dl(){return k.useContext(td)!=null}function ao(){return dl()||Fe(!1),k.useContext(td).location}function gw(t){k.useContext(Yr).static||k.useLayoutEffect(t)}function Nt(){let{isDataRoute:t}=k.useContext(Jr);return t?QN():MN()}function MN(){dl()||Fe(!1);let t=k.useContext(ed),{basename:e,future:n,navigator:r}=k.useContext(Yr),{matches:s}=k.useContext(Jr),{pathname:i}=ao(),o=JSON.stringify(dw(s,n.v7_relativeSplatPath)),a=k.useRef(!1);return gw(()=>{a.current=!0}),k.useCallback(function(d,h){if(h===void 0&&(h={}),!a.current)return;if(typeof d=="number"){r.go(d);return}let m=hw(d,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:jr([e,m.pathname])),(h.replace?r.replace:r.push)(m,h.state,h)},[e,r,o,i,t])}function Xr(){let{matches:t}=k.useContext(Jr),e=t[t.length-1];return e?e.params:{}}function nd(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=k.useContext(Yr),{matches:s}=k.useContext(Jr),{pathname:i}=ao(),o=JSON.stringify(dw(s,r.v7_relativeSplatPath));return k.useMemo(()=>hw(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function LN(t,e){return FN(t,e)}function FN(t,e,n,r){dl()||Fe(!1);let{navigator:s}=k.useContext(Yr),{matches:i}=k.useContext(Jr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let d=ao(),h;if(e){var m;let A=typeof e=="string"?oo(e):e;l==="/"||(m=A.pathname)!=null&&m.startsWith(l)||Fe(!1),h=A}else h=d;let p=h.pathname||"/",E=p;if(l!=="/"){let A=l.replace(/^\//,"").split("/");E="/"+p.replace(/^\//,"").split("/").slice(A.length).join("/")}let N=mN(t,{pathname:E}),S=WN(N&&N.map(A=>Object.assign({},A,{params:Object.assign({},a,A.params),pathname:jr([l,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?l:jr([l,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),i,n,r);return e&&S?k.createElement(td.Provider,{value:{location:za({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ir.Pop}},S):S}function UN(){let t=GN(),e=DN(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:s},n):null,null)}const zN=k.createElement(UN,null);class BN extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(Jr.Provider,{value:this.props.routeContext},k.createElement(pw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $N(t){let{routeContext:e,match:n,children:r}=t,s=k.useContext(ed);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(Jr.Provider,{value:e},r)}function WN(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);h>=0||Fe(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let m=o[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=h),m.route.id){let{loaderData:p,errors:E}=n,N=m.route.loader&&p[m.route.id]===void 0&&(!E||E[m.route.id]===void 0);if(m.route.lazy||N){l=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,m,p)=>{let E,N=!1,S=null,A=null;n&&(E=a&&m.route.id?a[m.route.id]:void 0,S=m.route.errorElement||zN,l&&(d<0&&p===0?(YN("route-fallback"),N=!0,A=null):d===p&&(N=!0,A=m.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,p+1)),v=()=>{let y;return E?y=S:N?y=A:m.route.Component?y=k.createElement(m.route.Component,null):m.route.element?y=m.route.element:y=h,k.createElement($N,{match:m,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:y})};return n&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?k.createElement(BN,{location:n.location,revalidation:n.revalidation,component:S,error:E,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}var yw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(yw||{}),vw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(vw||{});function qN(t){let e=k.useContext(ed);return e||Fe(!1),e}function HN(t){let e=k.useContext(mw);return e||Fe(!1),e}function KN(t){let e=k.useContext(Jr);return e||Fe(!1),e}function _w(t){let e=KN(),n=e.matches[e.matches.length-1];return n.route.id||Fe(!1),n.route.id}function GN(){var t;let e=k.useContext(pw),n=HN(),r=_w();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function QN(){let{router:t}=qN(yw.UseNavigateStable),e=_w(vw.UseNavigateStable),n=k.useRef(!1);return gw(()=>{n.current=!0}),k.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,za({fromRouteId:e},i)))},[t,e])}const qy={};function YN(t,e,n){qy[t]||(qy[t]=!0)}function JN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function He(t){Fe(!1)}function XN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ir.Pop,navigator:i,static:o=!1,future:a}=t;dl()&&Fe(!1);let l=e.replace(/^\/*/,"/"),d=k.useMemo(()=>({basename:l,navigator:i,static:o,future:za({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=oo(r));let{pathname:h="/",search:m="",hash:p="",state:E=null,key:N="default"}=r,S=k.useMemo(()=>{let A=Ui(h,l);return A==null?null:{location:{pathname:A,search:m,hash:p,state:E,key:N},navigationType:s}},[l,h,m,p,E,N,s]);return S==null?null:k.createElement(Yr.Provider,{value:d},k.createElement(td.Provider,{children:n,value:S}))}function Hy(t){let{children:e,location:n}=t;return LN(qf(e),n)}new Promise(()=>{});function qf(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(r,s)=>{if(!k.isValidElement(r))return;let i=[...e,s];if(r.type===k.Fragment){n.push.apply(n,qf(r.props.children,i));return}r.type!==He&&Fe(!1),!r.props.index||!r.props.children||Fe(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=qf(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hu(){return hu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hu.apply(this,arguments)}function xw(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function ZN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ek(t,e){return t.button===0&&(!e||e==="_self")&&!ZN(t)}const tk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],nk=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],rk="6";try{window.__reactRouterVersion=rk}catch{}const sk=k.createContext({isTransitioning:!1}),ik="startTransition",Ky=Zb[ik];function ww(t){let{basename:e,children:n,future:r,window:s}=t,i=k.useRef();i.current==null&&(i.current=dN({window:s,v5Compat:!0}));let o=i.current,[a,l]=k.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=k.useCallback(m=>{d&&Ky?Ky(()=>l(m)):l(m)},[l,d]);return k.useLayoutEffect(()=>o.listen(h),[o,h]),k.useEffect(()=>JN(r),[r]),k.createElement(XN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const ok=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ak=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Et=k.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:d,preventScrollReset:h,viewTransition:m}=e,p=xw(e,tk),{basename:E}=k.useContext(Yr),N,S=!1;if(typeof d=="string"&&ak.test(d)&&(N=d,ok))try{let y=new URL(window.location.href),T=d.startsWith("//")?new URL(y.protocol+d):new URL(d),j=Ui(T.pathname,E);T.origin===y.origin&&j!=null?d=j+T.search+T.hash:S=!0}catch{}let A=VN(d,{relative:s}),w=ck(d,{replace:o,state:a,target:l,preventScrollReset:h,relative:s,viewTransition:m});function v(y){r&&r(y),y.defaultPrevented||w(y)}return k.createElement("a",hu({},p,{href:N||A,onClick:S||i?r:v,ref:n,target:l}))}),Rh=k.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:l,viewTransition:d,children:h}=e,m=xw(e,nk),p=nd(l,{relative:m.relative}),E=ao(),N=k.useContext(mw),{navigator:S,basename:A}=k.useContext(Yr),w=N!=null&&uk(p)&&d===!0,v=S.encodeLocation?S.encodeLocation(p).pathname:p.pathname,y=E.pathname,T=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;s||(y=y.toLowerCase(),T=T?T.toLowerCase():null,v=v.toLowerCase()),T&&A&&(T=Ui(T,A)||T);const j=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let O=y===v||!o&&y.startsWith(v)&&y.charAt(j)==="/",I=T!=null&&(T===v||!o&&T.startsWith(v)&&T.charAt(v.length)==="/"),_={isActive:O,isPending:I,isTransitioning:w},x=O?r:void 0,C;typeof i=="function"?C=i(_):C=[i,O?"active":null,I?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(_):a;return k.createElement(Et,hu({},m,{"aria-current":x,className:C,ref:n,style:P,to:l,viewTransition:d}),typeof h=="function"?h(_):h)});var Hf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Hf||(Hf={}));var Gy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Gy||(Gy={}));function lk(t){let e=k.useContext(ed);return e||Fe(!1),e}function ck(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Nt(),d=ao(),h=nd(t,{relative:o});return k.useCallback(m=>{if(ek(m,n)){m.preventDefault();let p=r!==void 0?r:du(d)===du(h);l(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[d,l,h,r,s,n,t,i,o,a])}function uk(t,e){e===void 0&&(e={});let n=k.useContext(sk);n==null&&Fe(!1);let{basename:r}=lk(Hf.useViewTransitionState),s=nd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Ui(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Ui(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Wf(s.pathname,o)!=null||Wf(s.pathname,i)!=null}class dk extends X.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("--- ERROR BOUNDARY CAUGHT AN ERROR ---"),console.error("Component Stack:",n.componentStack),console.error("The Error:",e),console.error("--------------------------------------")}render(){return this.state.hasError?u.jsxs("div",{style:{padding:"20px",margin:"20px",border:"2px solid red",borderRadius:"8px",backgroundColor:"#fff0f0"},children:[u.jsx("h2",{children:"Something went wrong."}),u.jsx("p",{children:"This part of the app has crashed. Please check the developer console for the specific error message."}),u.jsx("pre",{style:{whiteSpace:"pre-wrap",color:"red",marginTop:"10px"},children:this.state.error&&this.state.error.toString()})]}):this.props.children}}var Qy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},hk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Iw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,d=l?t[s+2]:0,h=i>>2,m=(i&3)<<4|a>>4;let p=(a&15)<<2|d>>6,E=d&63;l||(E=64,o||(p=64)),r.push(n[h],n[m],n[p],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ew(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):hk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||d==null||m==null)throw new fk;const p=i<<2|a>>4;if(r.push(p),d!==64){const E=a<<4&240|d>>2;if(r.push(E),m!==64){const N=d<<6&192|m;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mk=function(t){const e=Ew(t);return Iw.encodeByteArray(e,!0)},fu=function(t){return mk(t).replace(/\./g,"")},bw=function(t){try{return Iw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=()=>pk().__FIREBASE_DEFAULTS__,yk=()=>{if(typeof process>"u"||typeof Qy>"u")return;const t=Qy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bw(t[1]);return e&&JSON.parse(e)},rd=()=>{try{return gk()||yk()||vk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Tw=t=>{var e,n;return(n=(e=rd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},_k=t=>{const e=Tw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Sw=()=>{var t;return(t=rd())===null||t===void 0?void 0:t.config},Nw=t=>{var e;return(e=rd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fu(JSON.stringify(n)),fu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ek(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function Ik(){var t;const e=(t=rd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Tk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Sk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Nk(){const t=Qe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kw(){return!Ik()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Cw(){try{return typeof indexedDB=="object"}catch{return!1}}function kk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck="FirebaseError";class tr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Ck,Object.setPrototypeOf(this,tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hl.prototype.create)}}class hl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Ak(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new tr(s,a,r)}}function Ak(t,e){return t.replace(Pk,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Pk=/\{\$([^}]+)}/g;function Rk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function mu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Yy(i)&&Yy(o)){if(!mu(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Yy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Zo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ea(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function jk(t,e){const n=new Dk(t,e);return n.subscribe.bind(n)}class Dk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Ok(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=jh),s.error===void 0&&(s.error=jh),s.complete===void 0&&(s.complete=jh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ok(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t){return t&&t._delegate?t._delegate:t}class Rs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new xk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Lk(e))try{this.getOrInitializeService({instanceIdentifier:hs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hs){return this.instances.has(e)}getOptions(e=hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Mk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=hs){return this.component?this.component.multipleInstances?e:hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Mk(t){return t===hs?void 0:t}function Lk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Vk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ce||(ce={}));const Uk={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},zk=ce.INFO,Bk={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},$k=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Bk[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tp{constructor(e){this.name=e,this._logLevel=zk,this._logHandler=$k,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Uk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}}const Wk=(t,e)=>e.some(n=>t instanceof n);let Jy,Xy;function qk(){return Jy||(Jy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Hk(){return Xy||(Xy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Aw=new WeakMap,Kf=new WeakMap,Pw=new WeakMap,Dh=new WeakMap,Sp=new WeakMap;function Kk(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Dr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Aw.set(n,t)}).catch(()=>{}),Sp.set(e,t),e}function Gk(t){if(Kf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Kf.set(t,e)}let Gf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Kf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Pw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Qk(t){Gf=t(Gf)}function Yk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Oh(this),e,...n);return Pw.set(r,e.sort?e.sort():[e]),Dr(r)}:Hk().includes(t)?function(...e){return t.apply(Oh(this),e),Dr(Aw.get(this))}:function(...e){return Dr(t.apply(Oh(this),e))}}function Jk(t){return typeof t=="function"?Yk(t):(t instanceof IDBTransaction&&Gk(t),Wk(t,qk())?new Proxy(t,Gf):t)}function Dr(t){if(t instanceof IDBRequest)return Kk(t);if(Dh.has(t))return Dh.get(t);const e=Jk(t);return e!==t&&(Dh.set(t,e),Sp.set(e,t)),e}const Oh=t=>Sp.get(t);function Xk(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Dr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Dr(o.result),l.oldVersion,l.newVersion,Dr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}const Zk=["get","getKey","getAll","getAllKeys","count"],e4=["put","add","delete","clear"],Vh=new Map;function Zy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vh.get(e))return Vh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=e4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Zk.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let d=l.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[n](...a),s&&l.done]))[0]};return Vh.set(e,i),i}Qk(t=>({...t,get:(e,n,r)=>Zy(e,n)||t.get(e,n,r),has:(e,n)=>!!Zy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(n4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function n4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qf="@firebase/app",ev="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new Tp("@firebase/app"),r4="@firebase/app-compat",s4="@firebase/analytics-compat",i4="@firebase/analytics",o4="@firebase/app-check-compat",a4="@firebase/app-check",l4="@firebase/auth",c4="@firebase/auth-compat",u4="@firebase/database",d4="@firebase/data-connect",h4="@firebase/database-compat",f4="@firebase/functions",m4="@firebase/functions-compat",p4="@firebase/installations",g4="@firebase/installations-compat",y4="@firebase/messaging",v4="@firebase/messaging-compat",_4="@firebase/performance",x4="@firebase/performance-compat",w4="@firebase/remote-config",E4="@firebase/remote-config-compat",I4="@firebase/storage",b4="@firebase/storage-compat",T4="@firebase/firestore",S4="@firebase/vertexai-preview",N4="@firebase/firestore-compat",k4="firebase",C4="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf="[DEFAULT]",A4={[Qf]:"fire-core",[r4]:"fire-core-compat",[i4]:"fire-analytics",[s4]:"fire-analytics-compat",[a4]:"fire-app-check",[o4]:"fire-app-check-compat",[l4]:"fire-auth",[c4]:"fire-auth-compat",[u4]:"fire-rtdb",[d4]:"fire-data-connect",[h4]:"fire-rtdb-compat",[f4]:"fire-fn",[m4]:"fire-fn-compat",[p4]:"fire-iid",[g4]:"fire-iid-compat",[y4]:"fire-fcm",[v4]:"fire-fcm-compat",[_4]:"fire-perf",[x4]:"fire-perf-compat",[w4]:"fire-rc",[E4]:"fire-rc-compat",[I4]:"fire-gcs",[b4]:"fire-gcs-compat",[T4]:"fire-fst",[N4]:"fire-fst-compat",[S4]:"fire-vertex","fire-js":"fire-js",[k4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=new Map,P4=new Map,Jf=new Map;function tv(t,e){try{t.container.addComponent(e)}catch(n){Qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zi(t){const e=t.name;if(Jf.has(e))return Qn.debug(`There were multiple attempts to register component ${e}.`),!1;Jf.set(e,t);for(const n of pu.values())tv(n,t);for(const n of P4.values())tv(n,t);return!0}function Np(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ln(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Or=new hl("app","Firebase",R4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Or.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=C4;function Rw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Yf,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Or.create("bad-app-name",{appName:String(s)});if(n||(n=Sw()),!n)throw Or.create("no-options");const i=pu.get(s);if(i){if(mu(n,i.options)&&mu(r,i.config))return i;throw Or.create("duplicate-app",{appName:s})}const o=new Fk(s);for(const l of Jf.values())o.addComponent(l);const a=new j4(n,r,o);return pu.set(s,a),a}function jw(t=Yf){const e=pu.get(t);if(!e&&t===Yf&&Sw())return Rw();if(!e)throw Or.create("no-app",{appName:t});return e}function Vr(t,e,n){var r;let s=(r=A4[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qn.warn(a.join(" "));return}zi(new Rs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4="firebase-heartbeat-database",O4=1,Ba="firebase-heartbeat-store";let Mh=null;function Dw(){return Mh||(Mh=Xk(D4,O4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ba)}catch(n){console.warn(n)}}}}).catch(t=>{throw Or.create("idb-open",{originalErrorMessage:t.message})})),Mh}async function V4(t){try{const n=(await Dw()).transaction(Ba),r=await n.objectStore(Ba).get(Ow(t));return await n.done,r}catch(e){if(e instanceof tr)Qn.warn(e.message);else{const n=Or.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qn.warn(n.message)}}}async function nv(t,e){try{const r=(await Dw()).transaction(Ba,"readwrite");await r.objectStore(Ba).put(e,Ow(t)),await r.done}catch(n){if(n instanceof tr)Qn.warn(n.message);else{const r=Or.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qn.warn(r.message)}}}function Ow(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4=1024,L4=30*24*60*60*1e3;class F4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new z4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=rv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=L4}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Qn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rv(),{heartbeatsToSend:r,unsentEntries:s}=U4(this._heartbeatsCache.heartbeats),i=fu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Qn.warn(n),""}}}function rv(){return new Date().toISOString().substring(0,10)}function U4(t,e=M4){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),sv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),sv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class z4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Cw()?kk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await V4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return nv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return nv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function sv(t){return fu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(t){zi(new Rs("platform-logger",e=>new t4(e),"PRIVATE")),zi(new Rs("heartbeat",e=>new F4(e),"PRIVATE")),Vr(Qf,ev,t),Vr(Qf,ev,"esm2017"),Vr("fire-js","")}B4("");var $4="firebase",W4="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr($4,W4,"app");var iv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bs,Vw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,_){function x(){}x.prototype=_.prototype,I.D=_.prototype,I.prototype=new x,I.prototype.constructor=I,I.C=function(C,P,D){for(var R=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)R[Y-2]=arguments[Y];return _.prototype[P].apply(C,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,_,x){x||(x=0);var C=Array(16);if(typeof _=="string")for(var P=0;16>P;++P)C[P]=_.charCodeAt(x++)|_.charCodeAt(x++)<<8|_.charCodeAt(x++)<<16|_.charCodeAt(x++)<<24;else for(P=0;16>P;++P)C[P]=_[x++]|_[x++]<<8|_[x++]<<16|_[x++]<<24;_=I.g[0],x=I.g[1],P=I.g[2];var D=I.g[3],R=_+(D^x&(P^D))+C[0]+3614090360&4294967295;_=x+(R<<7&4294967295|R>>>25),R=D+(P^_&(x^P))+C[1]+3905402710&4294967295,D=_+(R<<12&4294967295|R>>>20),R=P+(x^D&(_^x))+C[2]+606105819&4294967295,P=D+(R<<17&4294967295|R>>>15),R=x+(_^P&(D^_))+C[3]+3250441966&4294967295,x=P+(R<<22&4294967295|R>>>10),R=_+(D^x&(P^D))+C[4]+4118548399&4294967295,_=x+(R<<7&4294967295|R>>>25),R=D+(P^_&(x^P))+C[5]+1200080426&4294967295,D=_+(R<<12&4294967295|R>>>20),R=P+(x^D&(_^x))+C[6]+2821735955&4294967295,P=D+(R<<17&4294967295|R>>>15),R=x+(_^P&(D^_))+C[7]+4249261313&4294967295,x=P+(R<<22&4294967295|R>>>10),R=_+(D^x&(P^D))+C[8]+1770035416&4294967295,_=x+(R<<7&4294967295|R>>>25),R=D+(P^_&(x^P))+C[9]+2336552879&4294967295,D=_+(R<<12&4294967295|R>>>20),R=P+(x^D&(_^x))+C[10]+4294925233&4294967295,P=D+(R<<17&4294967295|R>>>15),R=x+(_^P&(D^_))+C[11]+2304563134&4294967295,x=P+(R<<22&4294967295|R>>>10),R=_+(D^x&(P^D))+C[12]+1804603682&4294967295,_=x+(R<<7&4294967295|R>>>25),R=D+(P^_&(x^P))+C[13]+4254626195&4294967295,D=_+(R<<12&4294967295|R>>>20),R=P+(x^D&(_^x))+C[14]+2792965006&4294967295,P=D+(R<<17&4294967295|R>>>15),R=x+(_^P&(D^_))+C[15]+1236535329&4294967295,x=P+(R<<22&4294967295|R>>>10),R=_+(P^D&(x^P))+C[1]+4129170786&4294967295,_=x+(R<<5&4294967295|R>>>27),R=D+(x^P&(_^x))+C[6]+3225465664&4294967295,D=_+(R<<9&4294967295|R>>>23),R=P+(_^x&(D^_))+C[11]+643717713&4294967295,P=D+(R<<14&4294967295|R>>>18),R=x+(D^_&(P^D))+C[0]+3921069994&4294967295,x=P+(R<<20&4294967295|R>>>12),R=_+(P^D&(x^P))+C[5]+3593408605&4294967295,_=x+(R<<5&4294967295|R>>>27),R=D+(x^P&(_^x))+C[10]+38016083&4294967295,D=_+(R<<9&4294967295|R>>>23),R=P+(_^x&(D^_))+C[15]+3634488961&4294967295,P=D+(R<<14&4294967295|R>>>18),R=x+(D^_&(P^D))+C[4]+3889429448&4294967295,x=P+(R<<20&4294967295|R>>>12),R=_+(P^D&(x^P))+C[9]+568446438&4294967295,_=x+(R<<5&4294967295|R>>>27),R=D+(x^P&(_^x))+C[14]+3275163606&4294967295,D=_+(R<<9&4294967295|R>>>23),R=P+(_^x&(D^_))+C[3]+4107603335&4294967295,P=D+(R<<14&4294967295|R>>>18),R=x+(D^_&(P^D))+C[8]+1163531501&4294967295,x=P+(R<<20&4294967295|R>>>12),R=_+(P^D&(x^P))+C[13]+2850285829&4294967295,_=x+(R<<5&4294967295|R>>>27),R=D+(x^P&(_^x))+C[2]+4243563512&4294967295,D=_+(R<<9&4294967295|R>>>23),R=P+(_^x&(D^_))+C[7]+1735328473&4294967295,P=D+(R<<14&4294967295|R>>>18),R=x+(D^_&(P^D))+C[12]+2368359562&4294967295,x=P+(R<<20&4294967295|R>>>12),R=_+(x^P^D)+C[5]+4294588738&4294967295,_=x+(R<<4&4294967295|R>>>28),R=D+(_^x^P)+C[8]+2272392833&4294967295,D=_+(R<<11&4294967295|R>>>21),R=P+(D^_^x)+C[11]+1839030562&4294967295,P=D+(R<<16&4294967295|R>>>16),R=x+(P^D^_)+C[14]+4259657740&4294967295,x=P+(R<<23&4294967295|R>>>9),R=_+(x^P^D)+C[1]+2763975236&4294967295,_=x+(R<<4&4294967295|R>>>28),R=D+(_^x^P)+C[4]+1272893353&4294967295,D=_+(R<<11&4294967295|R>>>21),R=P+(D^_^x)+C[7]+4139469664&4294967295,P=D+(R<<16&4294967295|R>>>16),R=x+(P^D^_)+C[10]+3200236656&4294967295,x=P+(R<<23&4294967295|R>>>9),R=_+(x^P^D)+C[13]+681279174&4294967295,_=x+(R<<4&4294967295|R>>>28),R=D+(_^x^P)+C[0]+3936430074&4294967295,D=_+(R<<11&4294967295|R>>>21),R=P+(D^_^x)+C[3]+3572445317&4294967295,P=D+(R<<16&4294967295|R>>>16),R=x+(P^D^_)+C[6]+76029189&4294967295,x=P+(R<<23&4294967295|R>>>9),R=_+(x^P^D)+C[9]+3654602809&4294967295,_=x+(R<<4&4294967295|R>>>28),R=D+(_^x^P)+C[12]+3873151461&4294967295,D=_+(R<<11&4294967295|R>>>21),R=P+(D^_^x)+C[15]+530742520&4294967295,P=D+(R<<16&4294967295|R>>>16),R=x+(P^D^_)+C[2]+3299628645&4294967295,x=P+(R<<23&4294967295|R>>>9),R=_+(P^(x|~D))+C[0]+4096336452&4294967295,_=x+(R<<6&4294967295|R>>>26),R=D+(x^(_|~P))+C[7]+1126891415&4294967295,D=_+(R<<10&4294967295|R>>>22),R=P+(_^(D|~x))+C[14]+2878612391&4294967295,P=D+(R<<15&4294967295|R>>>17),R=x+(D^(P|~_))+C[5]+4237533241&4294967295,x=P+(R<<21&4294967295|R>>>11),R=_+(P^(x|~D))+C[12]+1700485571&4294967295,_=x+(R<<6&4294967295|R>>>26),R=D+(x^(_|~P))+C[3]+2399980690&4294967295,D=_+(R<<10&4294967295|R>>>22),R=P+(_^(D|~x))+C[10]+4293915773&4294967295,P=D+(R<<15&4294967295|R>>>17),R=x+(D^(P|~_))+C[1]+2240044497&4294967295,x=P+(R<<21&4294967295|R>>>11),R=_+(P^(x|~D))+C[8]+1873313359&4294967295,_=x+(R<<6&4294967295|R>>>26),R=D+(x^(_|~P))+C[15]+4264355552&4294967295,D=_+(R<<10&4294967295|R>>>22),R=P+(_^(D|~x))+C[6]+2734768916&4294967295,P=D+(R<<15&4294967295|R>>>17),R=x+(D^(P|~_))+C[13]+1309151649&4294967295,x=P+(R<<21&4294967295|R>>>11),R=_+(P^(x|~D))+C[4]+4149444226&4294967295,_=x+(R<<6&4294967295|R>>>26),R=D+(x^(_|~P))+C[11]+3174756917&4294967295,D=_+(R<<10&4294967295|R>>>22),R=P+(_^(D|~x))+C[2]+718787259&4294967295,P=D+(R<<15&4294967295|R>>>17),R=x+(D^(P|~_))+C[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(P+(R<<21&4294967295|R>>>11))&4294967295,I.g[2]=I.g[2]+P&4294967295,I.g[3]=I.g[3]+D&4294967295}r.prototype.u=function(I,_){_===void 0&&(_=I.length);for(var x=_-this.blockSize,C=this.B,P=this.h,D=0;D<_;){if(P==0)for(;D<=x;)s(this,I,D),D+=this.blockSize;if(typeof I=="string"){for(;D<_;)if(C[P++]=I.charCodeAt(D++),P==this.blockSize){s(this,C),P=0;break}}else for(;D<_;)if(C[P++]=I[D++],P==this.blockSize){s(this,C),P=0;break}}this.h=P,this.o+=_},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;var x=8*this.o;for(_=I.length-8;_<I.length;++_)I[_]=x&255,x/=256;for(this.u(I),I=Array(16),_=x=0;4>_;++_)for(var C=0;32>C;C+=8)I[x++]=this.g[_]>>>C&255;return I};function i(I,_){var x=a;return Object.prototype.hasOwnProperty.call(x,I)?x[I]:x[I]=_(I)}function o(I,_){this.h=_;for(var x=[],C=!0,P=I.length-1;0<=P;P--){var D=I[P]|0;C&&D==_||(x[P]=D,C=!1)}this.g=x}var a={};function l(I){return-128<=I&&128>I?i(I,function(_){return new o([_|0],0>_?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return m;if(0>I)return A(d(-I));for(var _=[],x=1,C=0;I>=x;C++)_[C]=I/x|0,x*=4294967296;return new o(_,0)}function h(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return A(h(I.substring(1),_));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=d(Math.pow(_,8)),C=m,P=0;P<I.length;P+=8){var D=Math.min(8,I.length-P),R=parseInt(I.substring(P,P+D),_);8>D?(D=d(Math.pow(_,D)),C=C.j(D).add(d(R))):(C=C.j(x),C=C.add(d(R)))}return C}var m=l(0),p=l(1),E=l(16777216);t=o.prototype,t.m=function(){if(S(this))return-A(this).m();for(var I=0,_=1,x=0;x<this.g.length;x++){var C=this.i(x);I+=(0<=C?C:4294967296+C)*_,_*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N(this))return"0";if(S(this))return"-"+A(this).toString(I);for(var _=d(Math.pow(I,6)),x=this,C="";;){var P=T(x,_).g;x=w(x,P.j(_));var D=((0<x.g.length?x.g[0]:x.h)>>>0).toString(I);if(x=P,N(x))return D+C;for(;6>D.length;)D="0"+D;C=D+C}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function N(I){if(I.h!=0)return!1;for(var _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function S(I){return I.h==-1}t.l=function(I){return I=w(this,I),S(I)?-1:N(I)?0:1};function A(I){for(var _=I.g.length,x=[],C=0;C<_;C++)x[C]=~I.g[C];return new o(x,~I.h).add(p)}t.abs=function(){return S(this)?A(this):this},t.add=function(I){for(var _=Math.max(this.g.length,I.g.length),x=[],C=0,P=0;P<=_;P++){var D=C+(this.i(P)&65535)+(I.i(P)&65535),R=(D>>>16)+(this.i(P)>>>16)+(I.i(P)>>>16);C=R>>>16,D&=65535,R&=65535,x[P]=R<<16|D}return new o(x,x[x.length-1]&-2147483648?-1:0)};function w(I,_){return I.add(A(_))}t.j=function(I){if(N(this)||N(I))return m;if(S(this))return S(I)?A(this).j(A(I)):A(A(this).j(I));if(S(I))return A(this.j(A(I)));if(0>this.l(E)&&0>I.l(E))return d(this.m()*I.m());for(var _=this.g.length+I.g.length,x=[],C=0;C<2*_;C++)x[C]=0;for(C=0;C<this.g.length;C++)for(var P=0;P<I.g.length;P++){var D=this.i(C)>>>16,R=this.i(C)&65535,Y=I.i(P)>>>16,ie=I.i(P)&65535;x[2*C+2*P]+=R*ie,v(x,2*C+2*P),x[2*C+2*P+1]+=D*ie,v(x,2*C+2*P+1),x[2*C+2*P+1]+=R*Y,v(x,2*C+2*P+1),x[2*C+2*P+2]+=D*Y,v(x,2*C+2*P+2)}for(C=0;C<_;C++)x[C]=x[2*C+1]<<16|x[2*C];for(C=_;C<2*_;C++)x[C]=0;return new o(x,0)};function v(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function y(I,_){this.g=I,this.h=_}function T(I,_){if(N(_))throw Error("division by zero");if(N(I))return new y(m,m);if(S(I))return _=T(A(I),_),new y(A(_.g),A(_.h));if(S(_))return _=T(I,A(_)),new y(A(_.g),_.h);if(30<I.g.length){if(S(I)||S(_))throw Error("slowDivide_ only works with positive integers.");for(var x=p,C=_;0>=C.l(I);)x=j(x),C=j(C);var P=O(x,1),D=O(C,1);for(C=O(C,2),x=O(x,2);!N(C);){var R=D.add(C);0>=R.l(I)&&(P=P.add(x),D=R),C=O(C,1),x=O(x,1)}return _=w(I,P.j(_)),new y(P,_)}for(P=m;0<=I.l(_);){for(x=Math.max(1,Math.floor(I.m()/_.m())),C=Math.ceil(Math.log(x)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),D=d(x),R=D.j(_);S(R)||0<R.l(I);)x-=C,D=d(x),R=D.j(_);N(D)&&(D=p),P=P.add(D),I=w(I,R)}return new y(P,I)}t.A=function(I){return T(this,I).h},t.and=function(I){for(var _=Math.max(this.g.length,I.g.length),x=[],C=0;C<_;C++)x[C]=this.i(C)&I.i(C);return new o(x,this.h&I.h)},t.or=function(I){for(var _=Math.max(this.g.length,I.g.length),x=[],C=0;C<_;C++)x[C]=this.i(C)|I.i(C);return new o(x,this.h|I.h)},t.xor=function(I){for(var _=Math.max(this.g.length,I.g.length),x=[],C=0;C<_;C++)x[C]=this.i(C)^I.i(C);return new o(x,this.h^I.h)};function j(I){for(var _=I.g.length+1,x=[],C=0;C<_;C++)x[C]=I.i(C)<<1|I.i(C-1)>>>31;return new o(x,I.h)}function O(I,_){var x=_>>5;_%=32;for(var C=I.g.length-x,P=[],D=0;D<C;D++)P[D]=0<_?I.i(D+x)>>>_|I.i(D+x+1)<<32-_:I.i(D+x);return new o(P,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Vw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,bs=o}).apply(typeof iv<"u"?iv:typeof self<"u"?self:typeof window<"u"?window:{});var ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mw,ta,Lw,Nc,Xf,Fw,Uw,zw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,g){return c==Array.prototype||c==Object.prototype||(c[f]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ac=="object"&&ac];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(c,f){if(f)e:{var g=r;c=c.split(".");for(var b=0;b<c.length-1;b++){var V=c[b];if(!(V in g))break e;g=g[V]}c=c[c.length-1],b=g[c],f=f(b),f!=b&&f!=null&&e(g,c,{configurable:!0,writable:!0,value:f})}}function i(c,f){c instanceof String&&(c+="");var g=0,b=!1,V={next:function(){if(!b&&g<c.length){var L=g++;return{value:f(L,c[L]),done:!1}}return b=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(c){return c||function(){return i(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function d(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function h(c,f,g){return c.call.apply(c.bind,arguments)}function m(c,f,g){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,b),c.apply(f,V)}}return function(){return c.apply(f,arguments)}}function p(c,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,p.apply(null,arguments)}function E(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var b=g.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function N(c,f){function g(){}g.prototype=f.prototype,c.aa=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(b,V,L){for(var $=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)$[Ee-2]=arguments[Ee];return f.prototype[V].apply(b,$)}}function S(c){const f=c.length;if(0<f){const g=Array(f);for(let b=0;b<f;b++)g[b]=c[b];return g}return[]}function A(c,f){for(let g=1;g<arguments.length;g++){const b=arguments[g];if(l(b)){const V=c.length||0,L=b.length||0;c.length=V+L;for(let $=0;$<L;$++)c[V+$]=b[$]}else c.push(b)}}class w{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function v(c){return/^[\s\xa0]*$/.test(c)}function y(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function T(c){return T[" "](c),c}T[" "]=function(){};var j=y().indexOf("Gecko")!=-1&&!(y().toLowerCase().indexOf("webkit")!=-1&&y().indexOf("Edge")==-1)&&!(y().indexOf("Trident")!=-1||y().indexOf("MSIE")!=-1)&&y().indexOf("Edge")==-1;function O(c,f,g){for(const b in c)f.call(g,c[b],b,c)}function I(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function _(c){const f={};for(const g in c)f[g]=c[g];return f}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(c,f){let g,b;for(let V=1;V<arguments.length;V++){b=arguments[V];for(g in b)c[g]=b[g];for(let L=0;L<x.length;L++)g=x[L],Object.prototype.hasOwnProperty.call(b,g)&&(c[g]=b[g])}}function P(c){var f=1;c=c.split(":");const g=[];for(;0<f&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function D(c){a.setTimeout(()=>{throw c},0)}function R(){var c=ee;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class Y{constructor(){this.h=this.g=null}add(f,g){const b=ie.get();b.set(f,g),this.h?this.h.next=b:this.g=b,this.h=b}}var ie=new w(()=>new xe,c=>c.reset());class xe{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,U=!1,ee=new Y,ne=()=>{const c=a.Promise.resolve(void 0);oe=()=>{c.then(fe)}};var fe=()=>{for(var c;c=R();){try{c.h.call(c.g)}catch(g){D(g)}var f=ie;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}U=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ue(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}Ue.prototype.h=function(){this.defaultPrevented=!0};var Nn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return c}();function kn(c,f){if(Ue.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(j){e:{try{T(f.nodeName);var V=!0;break e}catch{}V=!1}V||(f=null)}}else g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement);this.relatedTarget=f,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Cn[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&kn.aa.h.call(this)}}N(kn,Ue);var Cn={2:"touch",3:"pen",4:"mouse"};kn.prototype.h=function(){kn.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var An="closure_listenable_"+(1e6*Math.random()|0),ib=0;function ob(c,f,g,b,V){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!b,this.ha=V,this.key=++ib,this.da=this.fa=!1}function Sl(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Nl(c){this.src=c,this.g={},this.h=0}Nl.prototype.add=function(c,f,g,b,V){var L=c.toString();c=this.g[L],c||(c=this.g[L]=[],this.h++);var $=Md(c,f,b,V);return-1<$?(f=c[$],g||(f.fa=!1)):(f=new ob(f,this.src,L,!!b,V),f.fa=g,c.push(f)),f};function Vd(c,f){var g=f.type;if(g in c.g){var b=c.g[g],V=Array.prototype.indexOf.call(b,f,void 0),L;(L=0<=V)&&Array.prototype.splice.call(b,V,1),L&&(Sl(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function Md(c,f,g,b){for(var V=0;V<c.length;++V){var L=c[V];if(!L.da&&L.listener==f&&L.capture==!!g&&L.ha==b)return V}return-1}var Ld="closure_lm_"+(1e6*Math.random()|0),Fd={};function jg(c,f,g,b,V){if(Array.isArray(f)){for(var L=0;L<f.length;L++)jg(c,f[L],g,b,V);return null}return g=Vg(g),c&&c[An]?c.K(f,g,d(b)?!!b.capture:!1,V):ab(c,f,g,!1,b,V)}function ab(c,f,g,b,V,L){if(!f)throw Error("Invalid event type");var $=d(V)?!!V.capture:!!V,Ee=zd(c);if(Ee||(c[Ld]=Ee=new Nl(c)),g=Ee.add(f,g,b,$,L),g.proxy)return g;if(b=lb(),g.proxy=b,b.src=c,b.listener=g,c.addEventListener)Nn||(V=$),V===void 0&&(V=!1),c.addEventListener(f.toString(),b,V);else if(c.attachEvent)c.attachEvent(Og(f.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return g}function lb(){function c(g){return f.call(c.src,c.listener,g)}const f=cb;return c}function Dg(c,f,g,b,V){if(Array.isArray(f))for(var L=0;L<f.length;L++)Dg(c,f[L],g,b,V);else b=d(b)?!!b.capture:!!b,g=Vg(g),c&&c[An]?(c=c.i,f=String(f).toString(),f in c.g&&(L=c.g[f],g=Md(L,g,b,V),-1<g&&(Sl(L[g]),Array.prototype.splice.call(L,g,1),L.length==0&&(delete c.g[f],c.h--)))):c&&(c=zd(c))&&(f=c.g[f.toString()],c=-1,f&&(c=Md(f,g,b,V)),(g=-1<c?f[c]:null)&&Ud(g))}function Ud(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[An])Vd(f.i,c);else{var g=c.type,b=c.proxy;f.removeEventListener?f.removeEventListener(g,b,c.capture):f.detachEvent?f.detachEvent(Og(g),b):f.addListener&&f.removeListener&&f.removeListener(b),(g=zd(f))?(Vd(g,c),g.h==0&&(g.src=null,f[Ld]=null)):Sl(c)}}}function Og(c){return c in Fd?Fd[c]:Fd[c]="on"+c}function cb(c,f){if(c.da)c=!0;else{f=new kn(f,this);var g=c.listener,b=c.ha||c.src;c.fa&&Ud(c),c=g.call(b,f)}return c}function zd(c){return c=c[Ld],c instanceof Nl?c:null}var Bd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vg(c){return typeof c=="function"?c:(c[Bd]||(c[Bd]=function(f){return c.handleEvent(f)}),c[Bd])}function at(){ge.call(this),this.i=new Nl(this),this.M=this,this.F=null}N(at,ge),at.prototype[An]=!0,at.prototype.removeEventListener=function(c,f,g,b){Dg(this,c,f,g,b)};function gt(c,f){var g,b=c.F;if(b)for(g=[];b;b=b.F)g.push(b);if(c=c.M,b=f.type||f,typeof f=="string")f=new Ue(f,c);else if(f instanceof Ue)f.target=f.target||c;else{var V=f;f=new Ue(b,c),C(f,V)}if(V=!0,g)for(var L=g.length-1;0<=L;L--){var $=f.g=g[L];V=kl($,b,!0,f)&&V}if($=f.g=c,V=kl($,b,!0,f)&&V,V=kl($,b,!1,f)&&V,g)for(L=0;L<g.length;L++)$=f.g=g[L],V=kl($,b,!1,f)&&V}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var g=c.g[f],b=0;b<g.length;b++)Sl(g[b]);delete c.g[f],c.h--}}this.F=null},at.prototype.K=function(c,f,g,b){return this.i.add(String(c),f,!1,g,b)},at.prototype.L=function(c,f,g,b){return this.i.add(String(c),f,!0,g,b)};function kl(c,f,g,b){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var V=!0,L=0;L<f.length;++L){var $=f[L];if($&&!$.da&&$.capture==g){var Ee=$.listener,nt=$.ha||$.src;$.fa&&Vd(c.i,$),V=Ee.call(nt,b)!==!1&&V}}return V&&!b.defaultPrevented}function Mg(c,f,g){if(typeof c=="function")g&&(c=p(c,g));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function Lg(c){c.g=Mg(()=>{c.g=null,c.i&&(c.i=!1,Lg(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class ub extends ge{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Lg(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xo(c){ge.call(this),this.h=c,this.g={}}N(xo,ge);var Fg=[];function Ug(c){O(c.g,function(f,g){this.g.hasOwnProperty(g)&&Ud(f)},c),c.g={}}xo.prototype.N=function(){xo.aa.N.call(this),Ug(this)},xo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $d=a.JSON.stringify,db=a.JSON.parse,hb=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Wd(){}Wd.prototype.h=null;function zg(c){return c.h||(c.h=c.i())}function Bg(){}var wo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qd(){Ue.call(this,"d")}N(qd,Ue);function Hd(){Ue.call(this,"c")}N(Hd,Ue);var is={},$g=null;function Cl(){return $g=$g||new at}is.La="serverreachability";function Wg(c){Ue.call(this,is.La,c)}N(Wg,Ue);function Eo(c){const f=Cl();gt(f,new Wg(f))}is.STAT_EVENT="statevent";function qg(c,f){Ue.call(this,is.STAT_EVENT,c),this.stat=f}N(qg,Ue);function yt(c){const f=Cl();gt(f,new qg(f,c))}is.Ma="timingevent";function Hg(c,f){Ue.call(this,is.Ma,c),this.size=f}N(Hg,Ue);function Io(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function bo(){this.g=!0}bo.prototype.xa=function(){this.g=!1};function fb(c,f,g,b,V,L){c.info(function(){if(c.g)if(L)for(var $="",Ee=L.split("&"),nt=0;nt<Ee.length;nt++){var me=Ee[nt].split("=");if(1<me.length){var lt=me[0];me=me[1];var ct=lt.split("_");$=2<=ct.length&&ct[1]=="type"?$+(lt+"="+me+"&"):$+(lt+"=redacted&")}}else $=null;else $=L;return"XMLHTTP REQ ("+b+") [attempt "+V+"]: "+f+`
`+g+`
`+$})}function mb(c,f,g,b,V,L,$){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+V+"]: "+f+`
`+g+`
`+L+" "+$})}function Qs(c,f,g,b){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+gb(c,g)+(b?" "+b:"")})}function pb(c,f){c.info(function(){return"TIMEOUT: "+f})}bo.prototype.info=function(){};function gb(c,f){if(!c.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var b=g[c];if(!(2>b.length)){var V=b[1];if(Array.isArray(V)&&!(1>V.length)){var L=V[0];if(L!="noop"&&L!="stop"&&L!="close")for(var $=1;$<V.length;$++)V[$]=""}}}}return $d(g)}catch{return f}}var Al={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kd;function Pl(){}N(Pl,Wd),Pl.prototype.g=function(){return new XMLHttpRequest},Pl.prototype.i=function(){return{}},Kd=new Pl;function sr(c,f,g,b){this.j=c,this.i=f,this.l=g,this.R=b||1,this.U=new xo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gg}function Gg(){this.i=null,this.g="",this.h=!1}var Qg={},Gd={};function Qd(c,f,g){c.L=1,c.v=Ol(Pn(f)),c.m=g,c.P=!0,Yg(c,null)}function Yg(c,f){c.F=Date.now(),Rl(c),c.A=Pn(c.v);var g=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),u0(g.i,"t",b),c.C=0,g=c.j.J,c.h=new Gg,c.g=k0(c.j,g?f:null,!c.m),0<c.O&&(c.M=new ub(p(c.Y,c,c.g),c.O)),f=c.U,g=c.g,b=c.ca;var V="readystatechange";Array.isArray(V)||(V&&(Fg[0]=V.toString()),V=Fg);for(var L=0;L<V.length;L++){var $=jg(g,V[L],b||f.handleEvent,!1,f.h||f);if(!$)break;f.g[$.key]=$}f=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),Eo(),fb(c.i,c.u,c.A,c.l,c.R,c.m)}sr.prototype.ca=function(c){c=c.target;const f=this.M;f&&Rn(c)==3?f.j():this.Y(c)},sr.prototype.Y=function(c){try{if(c==this.g)e:{const ct=Rn(this.g);var f=this.g.Ba();const Xs=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||y0(this.g)))){this.J||ct!=4||f==7||(f==8||0>=Xs?Eo(3):Eo(2)),Yd(this);var g=this.g.Z();this.X=g;t:if(Jg(this)){var b=y0(this.g);c="";var V=b.length,L=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){os(this),To(this);var $="";break t}this.h.i=new a.TextDecoder}for(f=0;f<V;f++)this.h.h=!0,c+=this.h.i.decode(b[f],{stream:!(L&&f==V-1)});b.length=0,this.h.g+=c,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=g==200,mb(this.i,this.u,this.A,this.l,this.R,ct,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,nt=this.g;if((Ee=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ee)){var me=Ee;break t}}me=null}if(g=me)Qs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jd(this,g);else{this.o=!1,this.s=3,yt(12),os(this),To(this);break e}}if(this.P){g=!0;let sn;for(;!this.J&&this.C<$.length;)if(sn=yb(this,$),sn==Gd){ct==4&&(this.s=4,yt(14),g=!1),Qs(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==Qg){this.s=4,yt(15),Qs(this.i,this.l,$,"[Invalid Chunk]"),g=!1;break}else Qs(this.i,this.l,sn,null),Jd(this,sn);if(Jg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||$.length!=0||this.h.h||(this.s=1,yt(16),g=!1),this.o=this.o&&g,!g)Qs(this.i,this.l,$,"[Invalid Chunked Response]"),os(this),To(this);else if(0<$.length&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.ba&&!lt.M&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),rh(lt),lt.M=!0,yt(11))}}else Qs(this.i,this.l,$,null),Jd(this,$);ct==4&&os(this),this.o&&!this.J&&(ct==4?b0(this.j,this):(this.o=!1,Rl(this)))}else Db(this.g),g==400&&0<$.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),os(this),To(this)}}}catch{}finally{}};function Jg(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function yb(c,f){var g=c.C,b=f.indexOf(`
`,g);return b==-1?Gd:(g=Number(f.substring(g,b)),isNaN(g)?Qg:(b+=1,b+g>f.length?Gd:(f=f.slice(b,b+g),c.C=b+g,f)))}sr.prototype.cancel=function(){this.J=!0,os(this)};function Rl(c){c.S=Date.now()+c.I,Xg(c,c.I)}function Xg(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Io(p(c.ba,c),f)}function Yd(c){c.B&&(a.clearTimeout(c.B),c.B=null)}sr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(pb(this.i,this.A),this.L!=2&&(Eo(),yt(17)),os(this),this.s=2,To(this)):Xg(this,this.S-c)};function To(c){c.j.G==0||c.J||b0(c.j,c)}function os(c){Yd(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,Ug(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function Jd(c,f){try{var g=c.j;if(g.G!=0&&(g.g==c||Xd(g.h,c))){if(!c.K&&Xd(g.h,c)&&g.G==3){try{var b=g.Da.g.parse(f)}catch{b=null}if(Array.isArray(b)&&b.length==3){var V=b;if(V[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)zl(g),Fl(g);else break e;nh(g),yt(18)}}else g.za=V[1],0<g.za-g.T&&37500>V[2]&&g.F&&g.v==0&&!g.C&&(g.C=Io(p(g.Za,g),6e3));if(1>=t0(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ls(g,11)}else if((c.K||g.g==c)&&zl(g),!v(f))for(V=g.Da.g.parse(f),f=0;f<V.length;f++){let me=V[f];if(g.T=me[0],me=me[1],g.G==2)if(me[0]=="c"){g.K=me[1],g.ia=me[2];const lt=me[3];lt!=null&&(g.la=lt,g.j.info("VER="+g.la));const ct=me[4];ct!=null&&(g.Aa=ct,g.j.info("SVER="+g.Aa));const Xs=me[5];Xs!=null&&typeof Xs=="number"&&0<Xs&&(b=1.5*Xs,g.L=b,g.j.info("backChannelRequestTimeoutMs_="+b)),b=g;const sn=c.g;if(sn){const $l=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($l){var L=b.h;L.g||$l.indexOf("spdy")==-1&&$l.indexOf("quic")==-1&&$l.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Zd(L,L.h),L.h=null))}if(b.D){const sh=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;sh&&(b.ya=sh,Te(b.I,b.D,sh))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),b=g;var $=c;if(b.qa=N0(b,b.J?b.ia:null,b.W),$.K){n0(b.h,$);var Ee=$,nt=b.L;nt&&(Ee.I=nt),Ee.B&&(Yd(Ee),Rl(Ee)),b.g=$}else E0(b);0<g.i.length&&Ul(g)}else me[0]!="stop"&&me[0]!="close"||ls(g,7);else g.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?ls(g,7):th(g):me[0]!="noop"&&g.l&&g.l.ta(me),g.v=0)}}Eo(4)}catch{}}var vb=class{constructor(c,f){this.g=c,this.map=f}};function Zg(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function e0(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function t0(c){return c.h?1:c.g?c.g.size:0}function Xd(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function Zd(c,f){c.g?c.g.add(f):c.h=f}function n0(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}Zg.prototype.cancel=function(){if(this.i=r0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function r0(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.D);return f}return S(c.i)}function _b(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var f=[],g=c.length,b=0;b<g;b++)f.push(c[b]);return f}f=[],g=0;for(b in c)f[g++]=c[b];return f}function xb(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var f=[];c=c.length;for(var g=0;g<c;g++)f.push(g);return f}f=[],g=0;for(const b in c)f[g++]=b;return f}}}function s0(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var g=xb(c),b=_b(c),V=b.length,L=0;L<V;L++)f.call(void 0,b[L],g&&g[L],c)}var i0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wb(c,f){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var b=c[g].indexOf("="),V=null;if(0<=b){var L=c[g].substring(0,b);V=c[g].substring(b+1)}else L=c[g];f(L,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function as(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof as){this.h=c.h,jl(this,c.j),this.o=c.o,this.g=c.g,Dl(this,c.s),this.l=c.l;var f=c.i,g=new ko;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),o0(this,g),this.m=c.m}else c&&(f=String(c).match(i0))?(this.h=!1,jl(this,f[1]||"",!0),this.o=So(f[2]||""),this.g=So(f[3]||"",!0),Dl(this,f[4]),this.l=So(f[5]||"",!0),o0(this,f[6]||"",!0),this.m=So(f[7]||"")):(this.h=!1,this.i=new ko(null,this.h))}as.prototype.toString=function(){var c=[],f=this.j;f&&c.push(No(f,a0,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push(No(f,a0,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(No(g,g.charAt(0)=="/"?bb:Ib,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",No(g,Sb)),c.join("")};function Pn(c){return new as(c)}function jl(c,f,g){c.j=g?So(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Dl(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function o0(c,f,g){f instanceof ko?(c.i=f,Nb(c.i,c.h)):(g||(f=No(f,Tb)),c.i=new ko(f,c.h))}function Te(c,f,g){c.i.set(f,g)}function Ol(c){return Te(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function So(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function No(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,Eb),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Eb(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var a0=/[#\/\?@]/g,Ib=/[#\?:]/g,bb=/[#\?]/g,Tb=/[#\?@]/g,Sb=/#/g;function ko(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function ir(c){c.g||(c.g=new Map,c.h=0,c.i&&wb(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=ko.prototype,t.add=function(c,f){ir(this),this.i=null,c=Ys(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function l0(c,f){ir(c),f=Ys(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function c0(c,f){return ir(c),f=Ys(c,f),c.g.has(f)}t.forEach=function(c,f){ir(this),this.g.forEach(function(g,b){g.forEach(function(V){c.call(f,V,b,this)},this)},this)},t.na=function(){ir(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let b=0;b<f.length;b++){const V=c[b];for(let L=0;L<V.length;L++)g.push(f[b])}return g},t.V=function(c){ir(this);let f=[];if(typeof c=="string")c0(this,c)&&(f=f.concat(this.g.get(Ys(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)f=f.concat(c[g])}return f},t.set=function(c,f){return ir(this),this.i=null,c=Ys(this,c),c0(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function u0(c,f,g){l0(c,f),0<g.length&&(c.i=null,c.g.set(Ys(c,f),S(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var b=f[g];const L=encodeURIComponent(String(b)),$=this.V(b);for(b=0;b<$.length;b++){var V=L;$[b]!==""&&(V+="="+encodeURIComponent(String($[b]))),c.push(V)}}return this.i=c.join("&")};function Ys(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function Nb(c,f){f&&!c.j&&(ir(c),c.i=null,c.g.forEach(function(g,b){var V=b.toLowerCase();b!=V&&(l0(this,b),u0(this,V,g))},c)),c.j=f}function kb(c,f){const g=new bo;if(a.Image){const b=new Image;b.onload=E(or,g,"TestLoadImage: loaded",!0,f,b),b.onerror=E(or,g,"TestLoadImage: error",!1,f,b),b.onabort=E(or,g,"TestLoadImage: abort",!1,f,b),b.ontimeout=E(or,g,"TestLoadImage: timeout",!1,f,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else f(!1)}function Cb(c,f){const g=new bo,b=new AbortController,V=setTimeout(()=>{b.abort(),or(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:b.signal}).then(L=>{clearTimeout(V),L.ok?or(g,"TestPingServer: ok",!0,f):or(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(V),or(g,"TestPingServer: error",!1,f)})}function or(c,f,g,b,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),b(g)}catch{}}function Ab(){this.g=new hb}function Pb(c,f,g){const b=g||"";try{s0(c,function(V,L){let $=V;d(V)&&($=$d(V)),f.push(b+L+"="+encodeURIComponent($))})}catch(V){throw f.push(b+"type="+encodeURIComponent("_badmap")),V}}function Vl(c){this.l=c.Ub||null,this.j=c.eb||!1}N(Vl,Wd),Vl.prototype.g=function(){return new Ml(this.l,this.j)},Vl.prototype.i=function(c){return function(){return c}}({});function Ml(c,f){at.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Ml,at),t=Ml.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,Ao(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Co(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ao(this)),this.g&&(this.readyState=3,Ao(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;d0(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function d0(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?Co(this):Ao(this),this.readyState==3&&d0(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Co(this))},t.Qa=function(c){this.g&&(this.response=c,Co(this))},t.ga=function(){this.g&&Co(this)};function Co(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ao(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function Ao(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ml.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function h0(c){let f="";return O(c,function(g,b){f+=b,f+=":",f+=g,f+=`\r
`}),f}function eh(c,f,g){e:{for(b in g){var b=!1;break e}b=!0}b||(g=h0(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):Te(c,f,g))}function Ve(c){at.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Ve,at);var Rb=/^https?$/i,jb=["POST","PUT"];t=Ve.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,g,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kd.g(),this.v=this.o?zg(this.o):zg(Kd),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(L){f0(this,L);return}if(c=g||"",g=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var V in b)g.set(V,b[V]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const L of b.keys())g.set(L,b.get(L));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(g.keys()).find(L=>L.toLowerCase()=="content-type"),V=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(jb,f,void 0))||b||V||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,$]of g)this.g.setRequestHeader(L,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{g0(this),this.u=!0,this.g.send(c),this.u=!1}catch(L){f0(this,L)}};function f0(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,m0(c),Ll(c)}function m0(c){c.A||(c.A=!0,gt(c,"complete"),gt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,gt(this,"complete"),gt(this,"abort"),Ll(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ll(this,!0)),Ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?p0(this):this.bb())},t.bb=function(){p0(this)};function p0(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Rn(c)!=4||c.Z()!=2)){if(c.u&&Rn(c)==4)Mg(c.Ea,0,c);else if(gt(c,"readystatechange"),Rn(c)==4){c.h=!1;try{const $=c.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var b;if(b=$===0){var V=String(c.D).match(i0)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),b=!Rb.test(V?V.toLowerCase():"")}g=b}if(g)gt(c,"complete"),gt(c,"success");else{c.m=6;try{var L=2<Rn(c)?c.g.statusText:""}catch{L=""}c.l=L+" ["+c.Z()+"]",m0(c)}}finally{Ll(c)}}}}function Ll(c,f){if(c.g){g0(c);const g=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||gt(c,"ready");try{g.onreadystatechange=b}catch{}}}function g0(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Rn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),db(f)}};function y0(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Db(c){const f={};c=(c.g&&2<=Rn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(v(c[b]))continue;var g=P(c[b]);const V=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const L=f[V]||[];f[V]=L,L.push(g)}I(f,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Po(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function v0(c){this.Aa=0,this.i=[],this.j=new bo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Po("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Po("baseRetryDelayMs",5e3,c),this.cb=Po("retryDelaySeedMs",1e4,c),this.Wa=Po("forwardChannelMaxRetries",2,c),this.wa=Po("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Zg(c&&c.concurrentRequestLimit),this.Da=new Ab,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=v0.prototype,t.la=8,t.G=1,t.connect=function(c,f,g,b){yt(0),this.W=c,this.H=f||{},g&&b!==void 0&&(this.H.OSID=g,this.H.OAID=b),this.F=this.X,this.I=N0(this,null,this.W),Ul(this)};function th(c){if(_0(c),c.G==3){var f=c.U++,g=Pn(c.I);if(Te(g,"SID",c.K),Te(g,"RID",f),Te(g,"TYPE","terminate"),Ro(c,g),f=new sr(c,c.j,f),f.L=2,f.v=Ol(Pn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=k0(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Rl(f)}S0(c)}function Fl(c){c.g&&(rh(c),c.g.cancel(),c.g=null)}function _0(c){Fl(c),c.u&&(a.clearTimeout(c.u),c.u=null),zl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Ul(c){if(!e0(c.h)&&!c.s){c.s=!0;var f=c.Ga;oe||ne(),U||(oe(),U=!0),ee.add(f,c),c.B=0}}function Ob(c,f){return t0(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Io(p(c.Ga,c,f),T0(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const V=new sr(this,this.j,c);let L=this.o;if(this.S&&(L?(L=_(L),C(L,this.S)):L=this.S),this.m!==null||this.O||(V.H=L,L=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var b=this.i[g];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(f+=b,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=w0(this,V,f),g=Pn(this.I),Te(g,"RID",c),Te(g,"CVER",22),this.D&&Te(g,"X-HTTP-Session-Id",this.D),Ro(this,g),L&&(this.O?f="headers="+encodeURIComponent(String(h0(L)))+"&"+f:this.m&&eh(g,this.m,L)),Zd(this.h,V),this.Ua&&Te(g,"TYPE","init"),this.P?(Te(g,"$req",f),Te(g,"SID","null"),V.T=!0,Qd(V,g,null)):Qd(V,g,f),this.G=2}}else this.G==3&&(c?x0(this,c):this.i.length==0||e0(this.h)||x0(this))};function x0(c,f){var g;f?g=f.l:g=c.U++;const b=Pn(c.I);Te(b,"SID",c.K),Te(b,"RID",g),Te(b,"AID",c.T),Ro(c,b),c.m&&c.o&&eh(b,c.m,c.o),g=new sr(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),f&&(c.i=f.D.concat(c.i)),f=w0(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Zd(c.h,g),Qd(g,b,f)}function Ro(c,f){c.H&&O(c.H,function(g,b){Te(f,b,g)}),c.l&&s0({},function(g,b){Te(f,b,g)})}function w0(c,f,g){g=Math.min(c.i.length,g);var b=c.l?p(c.l.Na,c.l,c):null;e:{var V=c.i;let L=-1;for(;;){const $=["count="+g];L==-1?0<g?(L=V[0].g,$.push("ofs="+L)):L=0:$.push("ofs="+L);let Ee=!0;for(let nt=0;nt<g;nt++){let me=V[nt].g;const lt=V[nt].map;if(me-=L,0>me)L=Math.max(0,V[nt].g-100),Ee=!1;else try{Pb(lt,$,"req"+me+"_")}catch{b&&b(lt)}}if(Ee){b=$.join("&");break e}}}return c=c.i.splice(0,g),f.D=c,b}function E0(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;oe||ne(),U||(oe(),U=!0),ee.add(f,c),c.v=0}}function nh(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Io(p(c.Fa,c),T0(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,I0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Io(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),Fl(this),I0(this))};function rh(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function I0(c){c.g=new sr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=Pn(c.qa);Te(f,"RID","rpc"),Te(f,"SID",c.K),Te(f,"AID",c.T),Te(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&Te(f,"TO",c.ja),Te(f,"TYPE","xmlhttp"),Ro(c,f),c.m&&c.o&&eh(f,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=Ol(Pn(f)),g.m=null,g.P=!0,Yg(g,c)}t.Za=function(){this.C!=null&&(this.C=null,Fl(this),nh(this),yt(19))};function zl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function b0(c,f){var g=null;if(c.g==f){zl(c),rh(c),c.g=null;var b=2}else if(Xd(c.h,f))g=f.D,n0(c.h,f),b=1;else return;if(c.G!=0){if(f.o)if(b==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var V=c.B;b=Cl(),gt(b,new Hg(b,g)),Ul(c)}else E0(c);else if(V=f.s,V==3||V==0&&0<f.X||!(b==1&&Ob(c,f)||b==2&&nh(c)))switch(g&&0<g.length&&(f=c.h,f.i=f.i.concat(g)),V){case 1:ls(c,5);break;case 4:ls(c,10);break;case 3:ls(c,6);break;default:ls(c,2)}}}function T0(c,f){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*f}function ls(c,f){if(c.j.info("Error code "+f),f==2){var g=p(c.fb,c),b=c.Xa;const V=!b;b=new as(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||jl(b,"https"),Ol(b),V?kb(b.toString(),g):Cb(b.toString(),g)}else yt(2);c.G=0,c.l&&c.l.sa(f),S0(c),_0(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function S0(c){if(c.G=0,c.ka=[],c.l){const f=r0(c.h);(f.length!=0||c.i.length!=0)&&(A(c.ka,f),A(c.ka,c.i),c.h.i.length=0,S(c.i),c.i.length=0),c.l.ra()}}function N0(c,f,g){var b=g instanceof as?Pn(g):new as(g);if(b.g!="")f&&(b.g=f+"."+b.g),Dl(b,b.s);else{var V=a.location;b=V.protocol,f=f?f+"."+V.hostname:V.hostname,V=+V.port;var L=new as(null);b&&jl(L,b),f&&(L.g=f),V&&Dl(L,V),g&&(L.l=g),b=L}return g=c.D,f=c.ya,g&&f&&Te(b,g,f),Te(b,"VER",c.la),Ro(c,b),b}function k0(c,f,g){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new Ve(new Vl({eb:g})):new Ve(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function C0(){}t=C0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Bl(){}Bl.prototype.g=function(c,f){return new Lt(c,f)};function Lt(c,f){at.call(this),this.g=new v0(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!v(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!v(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Js(this)}N(Lt,at),Lt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){th(this.g)},Lt.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=$d(c),c=g);f.i.push(new vb(f.Ya++,c)),f.G==3&&Ul(f)},Lt.prototype.N=function(){this.g.l=null,delete this.j,th(this.g),delete this.g,Lt.aa.N.call(this)};function A0(c){qd.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const g in f){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}N(A0,qd);function P0(){Hd.call(this),this.status=1}N(P0,Hd);function Js(c){this.g=c}N(Js,C0),Js.prototype.ua=function(){gt(this.g,"a")},Js.prototype.ta=function(c){gt(this.g,new A0(c))},Js.prototype.sa=function(c){gt(this.g,new P0)},Js.prototype.ra=function(){gt(this.g,"b")},Bl.prototype.createWebChannel=Bl.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,zw=function(){return new Bl},Uw=function(){return Cl()},Fw=is,Xf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Al.NO_ERROR=0,Al.TIMEOUT=8,Al.HTTP_ERROR=6,Nc=Al,Kg.COMPLETE="complete",Lw=Kg,Bg.EventType=wo,wo.OPEN="a",wo.CLOSE="b",wo.ERROR="c",wo.MESSAGE="d",at.prototype.listen=at.prototype.K,ta=Bg,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,Mw=Ve}).apply(typeof ac<"u"?ac:typeof self<"u"?self:typeof window<"u"?window:{});const ov="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ze.UNAUTHENTICATED=new Ze(null),Ze.GOOGLE_CREDENTIALS=new Ze("google-credentials-uid"),Ze.FIRST_PARTY=new Ze("first-party-uid"),Ze.MOCK_USER=new Ze("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let co="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new Tp("@firebase/firestore");function ii(){return js.logLevel}function z(t,...e){if(js.logLevel<=ce.DEBUG){const n=e.map(kp);js.debug(`Firestore (${co}): ${t}`,...n)}}function Be(t,...e){if(js.logLevel<=ce.ERROR){const n=e.map(kp);js.error(`Firestore (${co}): ${t}`,...n)}}function $r(t,...e){if(js.logLevel<=ce.WARN){const n=e.map(kp);js.warn(`Firestore (${co}): ${t}`,...n)}}function kp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(t="Unexpected state"){const e=`FIRESTORE (${co}) INTERNAL ASSERTION FAILED: `+t;throw Be(e),new Error(e)}function J(t,e){t||K()}function G(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends tr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class q4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ze.UNAUTHENTICATED))}shutdown(){}}class H4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class K4{constructor(e){this.t=e,this.currentUser=Ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){J(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Mr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Mr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(J(typeof r.accessToken=="string"),new Bw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return J(e===null||typeof e=="string"),new Ze(e)}}class G4{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ze.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Q4{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new G4(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Y4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class J4{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){J(this.o===void 0);const r=i=>{i.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(J(typeof n.token=="string"),this.R=n.token,new Y4(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=X4(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function se(t,e){return t<e?-1:t>e?1:0}function Bi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function Ww(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return De.fromMillis(Date.now())}static fromDate(e){return De.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new De(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Z(e)}static min(){return new Z(new De(0,0))}static max(){return new Z(new De(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,n,r){n===void 0?n=0:n>e.length&&K(),r===void 0?r=e.length-n:r>e.length-n&&K(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return $a.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $a?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class pe extends $a{construct(e,n,r){return new pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const Z4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pe extends $a{construct(e,n,r){return new Pe(e,n,r)}static isValidIdentifier(e){return Z4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pe(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new W(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new W(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new W(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new W(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pe(n)}static emptyPath(){return new Pe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(pe.fromString(e))}static fromName(e){return new q(pe.fromString(e).popFirst(5))}static empty(){return new q(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new pe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Zf(t){return t.fields.find(e=>e.kind===2)}function fs(t){return t.fields.filter(e=>e.kind!==2)}gu.UNKNOWN_ID=-1;class kc{constructor(e,n){this.fieldPath=e,this.kind=n}}class Wa{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Wa(0,Ht.min())}}function qw(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Z.fromTimestamp(r===1e9?new De(n+1,0):new De(n,r));return new Ht(s,q.empty(),e)}function Hw(t){return new Ht(t.readTime,t.key,-1)}class Ht{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ht(Z.min(),q.empty(),-1)}static max(){return new Ht(Z.max(),q.empty(),-1)}}function Cp(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zr(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==Kw)throw t;z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(s=>s?M.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new M((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const d=l;n(e[d]).next(h=>{o[d]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new M((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Mr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new pa(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=Ap(r.target.error);this.V.reject(new pa(e,s))}}static open(e,n,r,s){try{return new sd(n,e.transaction(s,r))}catch(i){throw new pa(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(z("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new tC(n)}}class Lr{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Lr.S(Qe())===12.2&&Be("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return z("SimpleDb","Removing database:",e),ps(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Cw())return!1;if(Lr.v())return!0;const e=Qe(),n=Lr.S(e),r=0<n&&n<10,s=Qw(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(z("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new pa(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new W(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new W(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new pa(e,o))},s.onupgradeneeded=i=>{z("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.O(o,s.transaction,i.oldVersion,this.version).next(()=>{z("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=sd.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(d=>(a.g(),d)).catch(d=>(a.abort(d),M.reject(d))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,d=l.name!=="FirebaseError"&&o<3;if(z("SimpleDb","Transaction failed with error:",l.message,"Retrying:",d),this.close(),!d)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Qw(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class eC{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ps(this.B.delete())}}class pa extends W{constructor(e,n){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function es(t){return t.name==="IndexedDbTransactionError"}class tC{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(z("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(z("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ps(r)}add(e){return z("SimpleDb","ADD",this.store.name,e,e),ps(this.store.add(e))}get(e){return ps(this.store.get(e)).next(n=>(n===void 0&&(n=null),z("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return z("SimpleDb","DELETE",this.store.name,e),ps(this.store.delete(e))}count(){return z("SimpleDb","COUNT",this.store.name),ps(this.store.count())}U(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new M((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.W(i,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}j(e,n){z("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const s=this.cursor(r);return this.W(s,(i,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.W(s,n)}Y(e){const n=this.cursor({});return new M((r,s)=>{n.onerror=i=>{const o=Ap(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new M((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new eC(a),d=n(a.primaryKey,a.value,l);if(d instanceof M){const h=d.catch(m=>(l.done(),M.reject(m)));r.push(h)}l.isDone?s():l.K===null?a.continue():a.continue(l.K)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ps(t){return new M((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=Ap(r.target.error);n(s)}})}let av=!1;function Ap(t){const e=Lr.S(Qe());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new W("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return av||(av=!0,setTimeout(()=>{throw r},0)),r}}return t}class nC{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){z("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{z("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){es(n)?z("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Zr(n)}await this.X(6e4)})}}class rC{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let s=n,i=!0;return M.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return z("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(s,i)).next(a=>(z("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=Hw(i);Cp(o,r)>0&&(r=o)}),new Ht(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Pt.oe=-1;function id(t){return t==null}function qa(t){return t===0&&1/t==-1/0}function Yw(t){return typeof t=="number"&&Number.isInteger(t)&&!qa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=lv(e)),e=sC(t.get(n),e);return lv(e)}function sC(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function lv(t){return t+""}function vn(t){const e=t.length;if(J(e>=2),e===2)return J(t.charAt(0)===""&&t.charAt(1)===""),pe.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&K(),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:K()}i=o+2}return new pe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(t,e){return[t,It(e)]}function Jw(t,e,n){return[t,It(e),n]}const iC={},oC=["prefixPath","collectionGroup","readTime","documentId"],aC=["prefixPath","collectionGroup","documentId"],lC=["collectionGroup","readTime","prefixPath","documentId"],cC=["canonicalId","targetId"],uC=["targetId","path"],dC=["path","targetId"],hC=["collectionId","parent"],fC=["indexId","uid"],mC=["uid","sequenceNumber"],pC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],gC=["indexId","uid","orderedDocumentKey"],yC=["userId","collectionPath","documentId"],vC=["userId","collectionPath","largestBatchId"],_C=["userId","collectionGroup","largestBatchId"],Xw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],xC=[...Xw,"documentOverlays"],Zw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],e2=Zw,Pp=[...e2,"indexConfiguration","indexState","indexEntries"],wC=Pp,EC=[...Pp,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em extends Gw{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function Ye(t,e){const n=G(t);return Lr.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function t2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.comparator=e,this.root=n||st.EMPTY}insert(e,n){return new be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,st.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,st.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lc(this.root,e,this.comparator,!1)}getReverseIterator(){return new lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lc(this.root,e,this.comparator,!0)}}class lc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class st{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??st.RED,this.left=s??st.EMPTY,this.right=i??st.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new st(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return st.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return st.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();const e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}}st.EMPTY=null,st.RED=!0,st.BLACK=!1;st.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,n,r,s,i){return this}insert(e,n,r){return new st(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new dv(this.data.getIterator())}getIteratorFrom(e){return new dv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof we)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new we(this.comparator);return n.data=e,n}}class dv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ei(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.fields=e,e.sort(Pe.comparator)}static empty(){return new Rt([])}unionWith(e){let n=new we(Pe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Rt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Bi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new n2("Invalid base64 string: "+i):i}}(e);return new $e(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new $e(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$e.EMPTY_BYTE_STRING=new $e("");const IC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yn(t){if(J(!!t),typeof t=="string"){let e=0;const n=IC.exec(t);if(J(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(t.seconds),nanos:ke(t.nanos)}}function ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wr(t){return typeof t=="string"?$e.fromBase64String(t):$e.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function jp(t){const e=t.mapValue.fields.__previous_value__;return Rp(e)?jp(e):e}function Ha(t){const e=Yn(t.mapValue.fields.__local_write_time__.timestampValue);return new De(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,n,r,s,i,o,a,l,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=d}}class Ds{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ds("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ds&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ac={nullValue:"NULL_VALUE"};function Os(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rp(t)?4:r2(t)?9007199254740991:od(t)?10:11:K()}function bn(t,e){if(t===e)return!0;const n=Os(t);if(n!==Os(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ha(t).isEqual(Ha(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Yn(s.timestampValue),a=Yn(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Wr(s.bytesValue).isEqual(Wr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return ke(s.geoPointValue.latitude)===ke(i.geoPointValue.latitude)&&ke(s.geoPointValue.longitude)===ke(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ke(s.integerValue)===ke(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ke(s.doubleValue),a=ke(i.doubleValue);return o===a?qa(o)===qa(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Bi(t.arrayValue.values||[],e.arrayValue.values||[],bn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(uv(o)!==uv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!bn(o[l],a[l])))return!1;return!0}(t,e);default:return K()}}function Ka(t,e){return(t.values||[]).find(n=>bn(n,e))!==void 0}function qr(t,e){if(t===e)return 0;const n=Os(t),r=Os(e);if(n!==r)return se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=ke(i.integerValue||i.doubleValue),l=ke(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return hv(t.timestampValue,e.timestampValue);case 4:return hv(Ha(t),Ha(e));case 5:return se(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Wr(i),l=Wr(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let d=0;d<a.length&&d<l.length;d++){const h=se(a[d],l[d]);if(h!==0)return h}return se(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=se(ke(i.latitude),ke(o.latitude));return a!==0?a:se(ke(i.longitude),ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return fv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,d,h;const m=i.fields||{},p=o.fields||{},E=(a=m.value)===null||a===void 0?void 0:a.arrayValue,N=(l=p.value)===null||l===void 0?void 0:l.arrayValue,S=se(((d=E==null?void 0:E.values)===null||d===void 0?void 0:d.length)||0,((h=N==null?void 0:N.values)===null||h===void 0?void 0:h.length)||0);return S!==0?S:fv(E,N)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===br.mapValue&&o===br.mapValue)return 0;if(i===br.mapValue)return 1;if(o===br.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),d=o.fields||{},h=Object.keys(d);l.sort(),h.sort();for(let m=0;m<l.length&&m<h.length;++m){const p=se(l[m],h[m]);if(p!==0)return p;const E=qr(a[l[m]],d[h[m]]);if(E!==0)return E}return se(l.length,h.length)}(t.mapValue,e.mapValue);default:throw K()}}function hv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);const n=Yn(t),r=Yn(e),s=se(n.seconds,r.seconds);return s!==0?s:se(n.nanos,r.nanos)}function fv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=qr(n[s],r[s]);if(i)return i}return se(n.length,r.length)}function $i(t){return tm(t)}function tm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Yn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Wr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=tm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${tm(n.fields[o])}`;return s+"}"}(t.mapValue):K()}function Ga(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function nm(t){return!!t&&"integerValue"in t}function Qa(t){return!!t&&"arrayValue"in t}function mv(t){return!!t&&"nullValue"in t}function pv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pc(t){return!!t&&"mapValue"in t}function od(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ga(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Hs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ga(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ga(t.arrayValue.values[n]);return e}return Object.assign({},t)}function r2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const s2={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function TC(t){return"nullValue"in t?Ac:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ga(Ds.empty(),q.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?od(t)?s2:{mapValue:{}}:K()}function SC(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ga(Ds.empty(),q.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?s2:"mapValue"in t?od(t)?{mapValue:{}}:br:K()}function gv(t,e){const n=qr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function yv(t,e){const n=qr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.value=e}static empty(){return new mt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Pc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ga(n)}setAll(e){let n=Pe.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ga(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Pc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Pc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Hs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new mt(ga(this.value))}}function i2(t){const e=[];return Hs(t.fields,(n,r)=>{const s=new Pe([n]);if(Pc(r)){const i=i2(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Rt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Le(e,0,Z.min(),Z.min(),Z.min(),mt.empty(),0)}static newFoundDocument(e,n,r,s){return new Le(e,1,n,Z.min(),r,s,0)}static newNoDocument(e,n){return new Le(e,2,n,Z.min(),Z.min(),mt.empty(),0)}static newUnknownDocument(e,n){return new Le(e,3,n,Z.min(),Z.min(),mt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Le&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Le(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n){this.position=e,this.inclusive=n}}function vv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),n.key):r=qr(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function _v(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n="asc"){this.field=e,this.dir=n}}function NC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{}class ue extends o2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new kC(e,n,r):n==="array-contains"?new PC(e,r):n==="in"?new h2(e,r):n==="not-in"?new RC(e,r):n==="array-contains-any"?new jC(e,r):new ue(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new CC(e,r):new AC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(qr(n,this.value)):n!==null&&Os(this.value)===Os(n)&&this.matchesComparison(qr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ve extends o2{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ve(e,n)}matches(e){return qi(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function qi(t){return t.op==="and"}function rm(t){return t.op==="or"}function Dp(t){return a2(t)&&qi(t)}function a2(t){for(const e of t.filters)if(e instanceof ve)return!1;return!0}function sm(t){if(t instanceof ue)return t.field.canonicalString()+t.op.toString()+$i(t.value);if(Dp(t))return t.filters.map(e=>sm(e)).join(",");{const e=t.filters.map(n=>sm(n)).join(",");return`${t.op}(${e})`}}function l2(t,e){return t instanceof ue?function(r,s){return s instanceof ue&&r.op===s.op&&r.field.isEqual(s.field)&&bn(r.value,s.value)}(t,e):t instanceof ve?function(r,s){return s instanceof ve&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&l2(o,s.filters[a]),!0):!1}(t,e):void K()}function c2(t,e){const n=t.filters.concat(e);return ve.create(n,t.op)}function u2(t){return t instanceof ue?function(n){return`${n.field.canonicalString()} ${n.op} ${$i(n.value)}`}(t):t instanceof ve?function(n){return n.op.toString()+" {"+n.getFilters().map(u2).join(" ,")+"}"}(t):"Filter"}class kC extends ue{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class CC extends ue{constructor(e,n){super(e,"in",n),this.keys=d2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class AC extends ue{constructor(e,n){super(e,"not-in",n),this.keys=d2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function d2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class PC extends ue{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Qa(n)&&Ka(n.arrayValue,this.value)}}class h2 extends ue{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ka(this.value.arrayValue,n)}}class RC extends ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ka(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ka(this.value.arrayValue,n)}}class jC extends ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Qa(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ka(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function im(t,e=null,n=[],r=[],s=null,i=null,o=null){return new DC(t,e,n,r,s,i,o)}function Vs(t){const e=G(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>sm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),id(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>$i(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>$i(r)).join(",")),e.ue=n}return e.ue}function ml(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!NC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!l2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_v(t.startAt,e.startAt)&&_v(t.endAt,e.endAt)}function yu(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function vu(t,e){return t.filters.filter(n=>n instanceof ue&&n.field.isEqual(e))}function xv(t,e,n){let r=Ac,s=!0;for(const i of vu(t,e)){let o=Ac,a=!0;switch(i.op){case"<":case"<=":o=TC(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Ac}gv({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];gv({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function wv(t,e,n){let r=br,s=!0;for(const i of vu(t,e)){let o=br,a=!0;switch(i.op){case">=":case">":o=SC(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=br}yv({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];yv({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function f2(t,e,n,r,s,i,o,a){return new uo(t,e,n,r,s,i,o,a)}function ad(t){return new uo(t)}function Ev(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function m2(t){return t.collectionGroup!==null}function ya(t){const e=G(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new we(Pe.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ya(i,r))}),n.has(Pe.keyField().canonicalString())||e.ce.push(new Ya(Pe.keyField(),r))}return e.ce}function Wt(t){const e=G(t);return e.le||(e.le=OC(e,ya(t))),e.le}function OC(t,e){if(t.limitType==="F")return im(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ya(s.field,i)});const n=t.endAt?new Wi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Wi(t.startAt.position,t.startAt.inclusive):null;return im(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function om(t,e){const n=t.filters.concat([e]);return new uo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _u(t,e,n){return new uo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ld(t,e){return ml(Wt(t),Wt(e))&&t.limitType===e.limitType}function p2(t){return`${Vs(Wt(t))}|lt:${t.limitType}`}function oi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>u2(s)).join(", ")}]`),id(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>$i(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>$i(s)).join(",")),`Target(${r})`}(Wt(t))}; limitType=${t.limitType})`}function pl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):q.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ya(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const d=vv(o,a,l);return o.inclusive?d<=0:d<0}(r.startAt,ya(r),s)||r.endAt&&!function(o,a,l){const d=vv(o,a,l);return o.inclusive?d>=0:d>0}(r.endAt,ya(r),s))}(t,e)}function g2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function y2(t){return(e,n)=>{let r=!1;for(const s of ya(t)){const i=VC(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function VC(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),d=a.data.field(i);return l!==null&&d!==null?qr(l,d):K()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return t2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=new be(q.comparator);function Bt(){return MC}const v2=new be(q.comparator);function na(...t){let e=v2;for(const n of t)e=e.insert(n.key,n);return e}function _2(t){let e=v2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function _n(){return va()}function x2(){return va()}function va(){return new ts(t=>t.toString(),(t,e)=>t.isEqual(e))}const LC=new be(q.comparator),FC=new we(q.comparator);function ae(...t){let e=FC;for(const n of t)e=e.add(n);return e}const UC=new we(se);function Op(){return UC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qa(e)?"-0":e}}function w2(t){return{integerValue:""+t}}function zC(t,e){return Yw(e)?w2(e):Vp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(){this._=void 0}}function BC(t,e,n){return t instanceof Hi?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Rp(i)&&(i=jp(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Ki?I2(t,e):t instanceof Gi?b2(t,e):function(s,i){const o=E2(s,i),a=Iv(o)+Iv(s.Pe);return nm(o)&&nm(s.Pe)?w2(a):Vp(s.serializer,a)}(t,e)}function $C(t,e,n){return t instanceof Ki?I2(t,e):t instanceof Gi?b2(t,e):n}function E2(t,e){return t instanceof Ja?function(r){return nm(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Hi extends cd{}class Ki extends cd{constructor(e){super(),this.elements=e}}function I2(t,e){const n=T2(e);for(const r of t.elements)n.some(s=>bn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Gi extends cd{constructor(e){super(),this.elements=e}}function b2(t,e){let n=T2(e);for(const r of t.elements)n=n.filter(s=>!bn(s,r));return{arrayValue:{values:n}}}class Ja extends cd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Iv(t){return ke(t.integerValue||t.doubleValue)}function T2(t){return Qa(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,n){this.field=e,this.transform=n}}function WC(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ki&&s instanceof Ki||r instanceof Gi&&s instanceof Gi?Bi(r.elements,s.elements,bn):r instanceof Ja&&s instanceof Ja?bn(r.Pe,s.Pe):r instanceof Hi&&s instanceof Hi}(t.transform,e.transform)}class qC{constructor(e,n){this.version=e,this.transformResults=n}}class _t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _t}static exists(e){return new _t(void 0,e)}static updateTime(e){return new _t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ud{}function N2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new dd(t.key,_t.none()):new ho(t.key,t.data,_t.none());{const n=t.data,r=mt.empty();let s=new we(Pe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new nr(t.key,r,new Rt(s.toArray()),_t.none())}}function HC(t,e,n){t instanceof ho?function(s,i,o){const a=s.value.clone(),l=Tv(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof nr?function(s,i,o){if(!Rc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Tv(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(k2(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function _a(t,e,n,r){return t instanceof ho?function(i,o,a,l){if(!Rc(i.precondition,o))return a;const d=i.value.clone(),h=Sv(i.fieldTransforms,l,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof nr?function(i,o,a,l){if(!Rc(i.precondition,o))return a;const d=Sv(i.fieldTransforms,l,o),h=o.data;return h.setAll(k2(i)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,a){return Rc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function KC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=E2(r.transform,s||null);i!=null&&(n===null&&(n=mt.empty()),n.set(r.field,i))}return n||null}function bv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Bi(r,s,(i,o)=>WC(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ho extends ud{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class nr extends ud{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function k2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Tv(t,e,n){const r=new Map;J(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,$C(o,a,n[s]))}return r}function Sv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,BC(i,o,e))}return r}class dd extends ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class C2 extends ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&HC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_a(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_a(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=x2();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=N2(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&Bi(this.mutations,e.mutations,(n,r)=>bv(n,r))&&Bi(this.baseMutations,e.baseMutations,(n,r)=>bv(n,r))}}class Lp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){J(e.mutations.length===r.length);let s=function(){return LC}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Lp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We,de;function QC(t){switch(t){default:return K();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function A2(t){if(t===void 0)return Be("GRPC error has no .code"),F.UNKNOWN;switch(t){case We.OK:return F.OK;case We.CANCELLED:return F.CANCELLED;case We.UNKNOWN:return F.UNKNOWN;case We.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case We.INTERNAL:return F.INTERNAL;case We.UNAVAILABLE:return F.UNAVAILABLE;case We.UNAUTHENTICATED:return F.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case We.NOT_FOUND:return F.NOT_FOUND;case We.ALREADY_EXISTS:return F.ALREADY_EXISTS;case We.PERMISSION_DENIED:return F.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case We.ABORTED:return F.ABORTED;case We.OUT_OF_RANGE:return F.OUT_OF_RANGE;case We.UNIMPLEMENTED:return F.UNIMPLEMENTED;case We.DATA_LOSS:return F.DATA_LOSS;default:return K()}}(de=We||(We={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=new bs([4294967295,4294967295],0);function Nv(t){const e=YC().encode(t),n=new Vw;return n.update(e),new Uint8Array(n.digest())}function kv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new bs([n,r],0),new bs([s,i],0)]}class Up{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ra(`Invalid padding: ${n}`);if(r<0)throw new ra(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ra(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ra(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=bs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(bs.fromNumber(r)));return s.compare(JC)===1&&(s=new bs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Nv(e),[r,s]=kv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Up(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Nv(e),[r,s]=kv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ra extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,yl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new gl(Z.min(),s,new be(se),Bt(),ae())}}class yl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new yl(r,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class P2{constructor(e,n){this.targetId=e,this.me=n}}class R2{constructor(e,n,r=$e.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Cv{constructor(){this.fe=0,this.ge=Pv(),this.pe=$e.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ae(),n=ae(),r=ae();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:K()}}),new yl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Pv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,J(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class XC{constructor(e){this.Le=e,this.Be=new Map,this.ke=Bt(),this.qe=Av(),this.Qe=new be(se)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(yu(i))if(r===0){const o=new q(i.path);this.Ue(n,o,Le.newNoDocument(o,Z.min()))}else J(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Wr(r).toUint8Array()}catch(l){if(l instanceof n2)return $r("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Up(o,s,i)}catch(l){return $r(l instanceof ra?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&yu(a.target)){const l=new q(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Le.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ae();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const d=this.Je(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new gl(e,n,this.Qe,this.ke,r);return this.ke=Bt(),this.qe=Av(),this.Qe=new be(se),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Cv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new we(se),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||z("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Cv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Av(){return new be(q.comparator)}function Pv(){return new be(q.comparator)}const ZC={asc:"ASCENDING",desc:"DESCENDING"},eA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tA={and:"AND",or:"OR"};class nA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function am(t,e){return t.useProto3Json||id(e)?e:{value:e}}function Qi(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function j2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rA(t,e){return Qi(t,e.toTimestamp())}function bt(t){return J(!!t),Z.fromTimestamp(function(n){const r=Yn(n);return new De(r.seconds,r.nanos)}(t))}function zp(t,e){return lm(t,e).canonicalString()}function lm(t,e){const n=function(s){return new pe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function D2(t){const e=pe.fromString(t);return J($2(e)),e}function xu(t,e){return zp(t.databaseId,e.path)}function Ts(t,e){const n=D2(e);if(n.get(1)!==t.databaseId.projectId)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(M2(n))}function O2(t,e){return zp(t.databaseId,e)}function V2(t){const e=D2(t);return e.length===4?pe.emptyPath():M2(e)}function cm(t){return new pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function M2(t){return J(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Rv(t,e,n){return{name:xu(t,e),fields:n.value.mapValue.fields}}function sA(t,e,n){const r=Ts(t,e.name),s=bt(e.updateTime),i=e.createTime?bt(e.createTime):Z.min(),o=new mt({mapValue:{fields:e.fields}}),a=Le.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function iA(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(J(h===void 0||typeof h=="string"),$e.fromBase64String(h||"")):(J(h===void 0||h instanceof Buffer||h instanceof Uint8Array),$e.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const h=d.code===void 0?F.UNKNOWN:A2(d.code);return new W(h,d.message||"")}(o);n=new R2(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ts(t,r.document.name),i=bt(r.document.updateTime),o=r.document.createTime?bt(r.document.createTime):Z.min(),a=new mt({mapValue:{fields:r.document.fields}}),l=Le.newFoundDocument(s,i,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];n=new jc(d,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ts(t,r.document),i=r.readTime?bt(r.readTime):Z.min(),o=Le.newNoDocument(s,i),a=r.removedTargetIds||[];n=new jc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ts(t,r.document),i=r.removedTargetIds||[];n=new jc([],i,s,null)}else{if(!("filter"in e))return K();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new GC(s,i),a=r.targetId;n=new P2(a,o)}}return n}function wu(t,e){let n;if(e instanceof ho)n={update:Rv(t,e.key,e.value)};else if(e instanceof dd)n={delete:xu(t,e.key)};else if(e instanceof nr)n={update:Rv(t,e.key,e.data),updateMask:dA(e.fieldMask)};else{if(!(e instanceof C2))return K();n={verify:xu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Hi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ki)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ja)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw K()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:rA(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:K()}(t,e.precondition)),n}function um(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?_t.updateTime(bt(i.updateTime)):i.exists!==void 0?_t.exists(i.exists):_t.none()}(e.currentDocument):_t.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)J(a.setToServerValue==="REQUEST_TIME"),l=new Hi;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];l=new Ki(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];l=new Gi(h)}else"increment"in a?l=new Ja(o,a.increment):K();const d=Pe.fromServerFormat(a.fieldPath);return new S2(d,l)}(t,s)):[];if(e.update){e.update.name;const s=Ts(t,e.update.name),i=new mt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const d=l.fieldPaths||[];return new Rt(d.map(h=>Pe.fromServerFormat(h)))}(e.updateMask);return new nr(s,i,o,n,r)}return new ho(s,i,n,r)}if(e.delete){const s=Ts(t,e.delete);return new dd(s,n)}if(e.verify){const s=Ts(t,e.verify);return new C2(s,n)}return K()}function oA(t,e){return t&&t.length>0?(J(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?bt(s.updateTime):bt(i);return o.isEqual(Z.min())&&(o=bt(i)),new qC(o,s.transformResults||[])}(n,e))):[]}function L2(t,e){return{documents:[O2(t,e.path)]}}function F2(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=O2(t,s);const i=function(d){if(d.length!==0)return B2(ve.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:ai(p.field),direction:lA(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=am(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function U2(t){let e=V2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){J(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(m){const p=z2(m);return p instanceof ve&&Dp(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(p=>function(N){return new Ya(li(N.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(m){let p;return p=typeof m=="object"?m.value:m,id(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(m){const p=!!m.before,E=m.values||[];return new Wi(E,p)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const p=!m.before,E=m.values||[];return new Wi(E,p)}(n.endAt)),f2(e,s,o,i,a,"F",l,d)}function aA(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function z2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=li(n.unaryFilter.field);return ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=li(n.unaryFilter.field);return ue.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=li(n.unaryFilter.field);return ue.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=li(n.unaryFilter.field);return ue.create(o,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(t):t.fieldFilter!==void 0?function(n){return ue.create(li(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ve.create(n.compositeFilter.filters.map(r=>z2(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return K()}}(n.compositeFilter.op))}(t):K()}function lA(t){return ZC[t]}function cA(t){return eA[t]}function uA(t){return tA[t]}function ai(t){return{fieldPath:t.canonicalString()}}function li(t){return Pe.fromServerFormat(t.fieldPath)}function B2(t){return t instanceof ue?function(n){if(n.op==="=="){if(pv(n.value))return{unaryFilter:{field:ai(n.field),op:"IS_NAN"}};if(mv(n.value))return{unaryFilter:{field:ai(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(pv(n.value))return{unaryFilter:{field:ai(n.field),op:"IS_NOT_NAN"}};if(mv(n.value))return{unaryFilter:{field:ai(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ai(n.field),op:cA(n.op),value:n.value}}}(t):t instanceof ve?function(n){const r=n.getFilters().map(s=>B2(s));return r.length===1?r[0]:{compositeFilter:{op:uA(n.op),filters:r}}}(t):K()}function dA(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,n,r,s,i=Z.min(),o=Z.min(),a=$e.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Fn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e){this.ct=e}}function hA(t,e){let n;if(e.document)n=sA(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=q.fromSegments(e.noDocument.path),s=Ls(e.noDocument.readTime);n=Le.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return K();{const r=q.fromSegments(e.unknownDocument.path),s=Ls(e.unknownDocument.version);n=Le.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new De(s[0],s[1]);return Z.fromTimestamp(i)}(e.readTime)),n}function jv(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Eu(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:xu(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Qi(i,o.version.toTimestamp()),createTime:Qi(i,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ms(e.version)};else{if(!e.isUnknownDocument())return K();r.unknownDocument={path:n.path.toArray(),version:Ms(e.version)}}return r}function Eu(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ms(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ls(t){const e=new De(t.seconds,t.nanoseconds);return Z.fromTimestamp(e)}function gs(t,e){const n=(e.baseMutations||[]).map(i=>um(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>um(t.ct,i)),s=De.fromMillis(e.localWriteTimeMs);return new Mp(e.batchId,s,n,r)}function sa(t){const e=Ls(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ls(t.lastLimboFreeSnapshotVersion):Z.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){return J(i.documents.length===1),Wt(ad(V2(i.documents[0])))}(t.query):function(i){return Wt(U2(i))}(t.query),new Fn(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,$e.fromBase64String(t.resumeToken))}function q2(t,e){const n=Ms(e.snapshotVersion),r=Ms(e.lastLimboFreeSnapshotVersion);let s;s=yu(e.target)?L2(t.ct,e.target):F2(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vs(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function H2(t){const e=U2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_u(e,e.limit,"L"):e}function Lh(t,e){return new Fp(e.largestBatchId,um(t.ct,e.overlayMutation))}function Dv(t,e){const n=e.path.lastSegment();return[t,It(e.path.popLast()),n]}function Ov(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ms(r.readTime),documentKey:It(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{getBundleMetadata(e,n){return Vv(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Ls(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return Vv(e).put(function(s){return{bundleId:s.id,createTime:Ms(bt(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return Mv(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:H2(i.bundledQuery),readTime:Ls(i.readTime)}}(r)})}saveNamedQuery(e,n){return Mv(e).put(function(s){return{name:s.name,readTime:Ms(bt(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function Vv(t){return Ye(t,"bundles")}function Mv(t){return Ye(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new hd(e,r)}getOverlay(e,n){return zo(e).get(Dv(this.userId,n)).next(r=>r?Lh(this.serializer,r):null)}getOverlays(e,n){const r=_n();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new Fp(n,o);s.push(this.ht(e,a))}),M.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(It(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(zo(e).j("collectionPathOverlayIndex",a))}),M.waitFor(i)}getOverlaysForCollection(e,n,r){const s=_n(),i=It(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return zo(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const d=Lh(this.serializer,l);s.set(d.getKey(),d)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=_n();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return zo(e).J({index:"collectionGroupOverlayIndex",range:a},(l,d,h)=>{const m=Lh(this.serializer,d);i.size()<s||m.largestBatchId===o?(i.set(m.getKey(),m),o=m.largestBatchId):h.done()}).next(()=>i)}ht(e,n){return zo(e).put(function(s,i,o){const[a,l,d]=Dv(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:wu(s.ct,o.mutation)}}(this.serializer,this.userId,n))}}function zo(t){return Ye(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{Pt(e){return Ye(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?$e.fromUint8Array(r):$e.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(ke(e.integerValue));else if("doubleValue"in e){const r=ke(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),qa(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Yn(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Wr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?r2(e)?this.dt(n,Number.MAX_SAFE_INTEGER):od(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):K()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const s of Object.keys(r))this.Vt(s,n),this.Tt(r[s],n)}wt(e,n){var r,s;const i=e.fields||{};this.dt(n,53);const o="value",a=((s=(r=i[o].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(n,15),n.At(ke(a)),this.Vt(o,n),this.Tt(i[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const s of r)this.Tt(s,n)}yt(e,n){this.dt(n,37),q.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}ys.vt=new ys;function pA(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Lv(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=pA(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class gA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=n.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=n.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const n=this.qt(e),r=Lv(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Kt(e){const n=this.qt(e),r=Lv(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class yA{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class vA{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Bo{constructor(){this.jt=new gA,this.Ht=new yA(this.jt),this.Jt=new vA(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new vs(this.indexId,this.documentKey,this.arrayValue,r)}}function lr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=Fv(t.arrayValue,e.arrayValue),n!==0?n:(n=Fv(t.directionalValue,e.directionalValue),n!==0?n:q.comparator(t.documentKey,e.documentKey)))}function Fv(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e){this.Xt=new we((n,r)=>Pe.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(J(e.collectionGroup===this.collectionId),this.nn)return!1;const n=Zf(e);if(n!==void 0&&!this.sn(n))return!1;const r=fs(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.sn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new we(Pe.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new kc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new kc(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new kc(r.field,r.dir==="asc"?0:1)));return new gu(gu.UNKNOWN_ID,this.collectionId,n,Wa.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(t){var e,n;if(J(t instanceof ue||t instanceof ve),t instanceof ue){if(t instanceof h2){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>ue.create(t.field,"==",i)))||[];return ve.create(s,"or")}return t}const r=t.filters.map(s=>K2(s));return ve.create(r,t.op)}function _A(t){if(t.getFilters().length===0)return[];const e=fm(K2(t));return J(G2(e)),dm(e)||hm(e)?[e]:e.getFilters()}function dm(t){return t instanceof ue}function hm(t){return t instanceof ve&&Dp(t)}function G2(t){return dm(t)||hm(t)||function(n){if(n instanceof ve&&rm(n)){for(const r of n.getFilters())if(!dm(r)&&!hm(r))return!1;return!0}return!1}(t)}function fm(t){if(J(t instanceof ue||t instanceof ve),t instanceof ue)return t;if(t.filters.length===1)return fm(t.filters[0]);const e=t.filters.map(r=>fm(r));let n=ve.create(e,t.op);return n=Iu(n),G2(n)?n:(J(n instanceof ve),J(qi(n)),J(n.filters.length>1),n.filters.reduce((r,s)=>Bp(r,s)))}function Bp(t,e){let n;return J(t instanceof ue||t instanceof ve),J(e instanceof ue||e instanceof ve),n=t instanceof ue?e instanceof ue?function(s,i){return ve.create([s,i],"and")}(t,e):zv(t,e):e instanceof ue?zv(e,t):function(s,i){if(J(s.filters.length>0&&i.filters.length>0),qi(s)&&qi(i))return c2(s,i.getFilters());const o=rm(s)?s:i,a=rm(s)?i:s,l=o.filters.map(d=>Bp(d,a));return ve.create(l,"or")}(t,e),Iu(n)}function zv(t,e){if(qi(e))return c2(e,t.getFilters());{const n=e.filters.map(r=>Bp(t,r));return ve.create(n,"or")}}function Iu(t){if(J(t instanceof ue||t instanceof ve),t instanceof ue)return t;const e=t.getFilters();if(e.length===1)return Iu(e[0]);if(a2(t))return t;const n=e.map(s=>Iu(s)),r=[];return n.forEach(s=>{s instanceof ue?r.push(s):s instanceof ve&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:ve.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(){this.un=new $p}addToCollectionParentIndex(e,n){return this.un.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Ht.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Ht.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class $p{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new we(pe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new we(pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=new Uint8Array(0);class wA{constructor(e,n){this.databaseId=n,this.cn=new $p,this.ln=new ts(r=>Vs(r),(r,s)=>ml(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const i={collectionId:r,parent:It(s)};return Bv(e).put(i)}return M.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[Ww(n),""],!1,!0);return Bv(e).U(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(vn(o.parent))}return r})}addFieldIndex(e,n){const r=$o(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=ni(e);return i.next(a=>{o.put(Ov(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=$o(e),s=ni(e),i=ti(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=$o(e),r=ti(e),s=ni(e);return n.j().next(()=>r.j()).next(()=>s.j())}createTargetIndexes(e,n){return M.forEach(this.hn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new Uv(r).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=ti(e);let s=!0;const i=new Map;return M.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=ae();const a=[];return M.forEach(i,(l,d)=>{z("IndexedDbIndexManager",`Using index ${function(y){return`id=${y.indexId}|cg=${y.collectionGroup}|f=${y.fields.map(T=>`${T.fieldPath}:${T.kind}`).join(",")}`}(l)} to execute ${Vs(n)}`);const h=function(y,T){const j=Zf(T);if(j===void 0)return null;for(const O of vu(y,j.fieldPath))switch(O.op){case"array-contains-any":return O.value.arrayValue.values||[];case"array-contains":return[O.value]}return null}(d,l),m=function(y,T){const j=new Map;for(const O of fs(T))for(const I of vu(y,O.fieldPath))switch(I.op){case"==":case"in":j.set(O.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return j.set(O.fieldPath.canonicalString(),I.value),Array.from(j.values())}return null}(d,l),p=function(y,T){const j=[];let O=!0;for(const I of fs(T)){const _=I.kind===0?xv(y,I.fieldPath,y.startAt):wv(y,I.fieldPath,y.startAt);j.push(_.value),O&&(O=_.inclusive)}return new Wi(j,O)}(d,l),E=function(y,T){const j=[];let O=!0;for(const I of fs(T)){const _=I.kind===0?wv(y,I.fieldPath,y.endAt):xv(y,I.fieldPath,y.endAt);j.push(_.value),O&&(O=_.inclusive)}return new Wi(j,O)}(d,l),N=this.In(l,d,p),S=this.In(l,d,E),A=this.Tn(l,d,m),w=this.En(l.indexId,h,N,p.inclusive,S,E.inclusive,A);return M.forEach(w,v=>r.G(v,n.limit).next(y=>{y.forEach(T=>{const j=q.fromSegments(T.documentKey);o.has(j)||(o=o.add(j),a.push(j))})}))}).next(()=>a)}return M.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=_A(ve.create(e.filters,"and")).map(r=>im(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),d=l/(n!=null?n.length:1),h=[];for(let m=0;m<l;++m){const p=n?this.dn(n[m/d]):cc,E=this.An(e,p,r[m%d],s),N=this.Rn(e,p,i[m%d],o),S=a.map(A=>this.An(e,p,A,!0));h.push(...this.createRange(E,N,S))}return h}An(e,n,r,s){const i=new vs(e,q.empty(),n,r);return s?i:i.Zt()}Rn(e,n,r,s){const i=new vs(e,q.empty(),n,r);return s?i.Zt():i}Pn(e,n){const r=new Uv(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.hn(n);return M.forEach(s,i=>this.Pn(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let d=new we(Pe.comparator),h=!1;for(const m of l.filters)for(const p of m.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?h=!0:d=d.add(p.field));for(const m of l.orderBy)m.field.isKeyField()||(d=d.add(m.field));return d.size+(h?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Vn(e,n){const r=new Bo;for(const s of fs(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Yt(s.kind);ys.vt.It(i,o)}return r.zt()}dn(e){const n=new Bo;return ys.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new Bo;return ys.vt.It(Ga(this.databaseId,n),r.Yt(function(i){const o=fs(i);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let s=[];s.push(new Bo);let i=0;for(const o of fs(e)){const a=r[i++];for(const l of s)if(this.fn(n,o.fieldPath)&&Qa(a))s=this.gn(s,o,a);else{const d=l.Yt(o.kind);ys.vt.It(a,d)}}return this.pn(s)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new Bo;l.seed(a.zt()),ys.vt.It(o,l.Yt(n.kind)),i.push(l)}return i}fn(e,n){return!!e.filters.find(r=>r instanceof ue&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=$o(e),s=ni(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(i=>{const o=[];return M.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(h,m){const p=m?new Wa(m.sequenceNumber,new Ht(Ls(m.readTime),new q(vn(m.documentKey)),m.largestBatchId)):Wa.empty(),E=h.fields.map(([N,S])=>new kc(Pe.fromServerFormat(N),S));return new gu(h.indexId,h.collectionGroup,E,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:se(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=$o(e),i=ni(e);return this.yn(e).next(o=>s.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>M.forEach(a,l=>i.put(Ov(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),M.forEach(a,l=>this.wn(e,s,l).next(d=>{const h=this.Sn(i,l);return d.isEqual(h)?M.resolve():this.bn(e,i,l,d,h)}))))})}Dn(e,n,r,s){return ti(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,s){return ti(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const s=ti(e);let i=new we(lr);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{i=i.add(new vs(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>i)}Sn(e,n){let r=new we(lr);const s=this.Vn(n,e);if(s==null)return r;const i=Zf(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Qa(o))for(const a of o.arrayValue.values||[])r=r.add(new vs(n.indexId,e.key,this.dn(a),s))}else r=r.add(new vs(n.indexId,e.key,cc,s));return r}bn(e,n,r,s,i){z("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,d,h,m,p){const E=l.getIterator(),N=d.getIterator();let S=ei(E),A=ei(N);for(;S||A;){let w=!1,v=!1;if(S&&A){const y=h(S,A);y<0?v=!0:y>0&&(w=!0)}else S!=null?v=!0:w=!0;w?(m(A),A=ei(N)):v?(p(S),S=ei(E)):(S=ei(E),A=ei(N))}}(s,i,lr,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),M.waitFor(o)}yn(e){let n=1;return ni(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>lr(o,a)).filter((o,a,l)=>!a||lr(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=lr(o,e),l=lr(o,n);if(a===0)s[0]=e.Zt();else if(a>0&&l<0)s.push(o),s.push(o.Zt());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Cn(s[o],s[o+1]))return[];const a=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,cc,[]],l=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,cc,[]];i.push(IDBKeyRange.bound(a,l))}return i}Cn(e,n){return lr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next($v)}getMinOffset(e,n){return M.mapArray(this.hn(n),r=>this.Pn(e,r).next(s=>s||K())).next($v)}}function Bv(t){return Ye(t,"collectionParents")}function ti(t){return Ye(t,"indexEntries")}function $o(t){return Ye(t,"indexConfiguration")}function ni(t){return Ye(t,"indexState")}function $v(t){J(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;Cp(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Ht(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class kt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new kt(e,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(h,m,p)=>(a++,p.delete()));i.push(l.next(()=>{J(a===1)}));const d=[];for(const h of n.mutations){const m=Jw(e,h.key.path,n.batchId);i.push(s.delete(m)),d.push(h.key)}return M.waitFor(i).next(()=>d)}function bu(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw K();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kt.DEFAULT_COLLECTION_PERCENTILE=10,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kt.DEFAULT=new kt(41943040,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kt.DISABLED=new kt(-1,0,0);class fd{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,n,r,s){J(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new fd(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cr(e).J({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=ci(e),o=cr(e);return o.add({}).next(a=>{J(typeof a=="number");const l=new Mp(a,n,r,s),d=function(E,N,S){const A=S.baseMutations.map(v=>wu(E.ct,v)),w=S.mutations.map(v=>wu(E.ct,v));return{userId:N,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:A,mutations:w}}(this.serializer,this.userId,l),h=[];let m=new we((p,E)=>se(p.canonicalString(),E.canonicalString()));for(const p of s){const E=Jw(this.userId,p.key.path,a);m=m.add(p.key.path.popLast()),h.push(o.put(d)),h.push(i.put(E,iC))}return m.forEach(p=>{h.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),M.waitFor(h).next(()=>l)})}lookupMutationBatch(e,n){return cr(e).get(n).next(r=>r?(J(r.userId===this.userId),gs(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?M.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Fn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return cr(e).J({index:"userMutationsIndex",range:s},(o,a,l)=>{a.userId===this.userId&&(J(a.batchId>=r),i=gs(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return cr(e).J({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cr(e).U("userMutationsIndex",n).next(r=>r.map(s=>gs(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Cc(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return ci(e).J({range:s},(o,a,l)=>{const[d,h,m]=o,p=vn(h);if(d===this.userId&&n.path.isEqual(p))return cr(e).get(m).next(E=>{if(!E)throw K();J(E.userId===this.userId),i.push(gs(this.serializer,E))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new we(se);const s=[];return n.forEach(i=>{const o=Cc(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=ci(e).J({range:a},(d,h,m)=>{const[p,E,N]=d,S=vn(E);p===this.userId&&i.path.isEqual(S)?r=r.add(N):m.done()});s.push(l)}),M.waitFor(s).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Cc(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new we(se);return ci(e).J({range:o},(l,d,h)=>{const[m,p,E]=l,N=vn(p);m===this.userId&&r.isPrefixOf(N)?N.length===s&&(a=a.add(E)):h.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],s=[];return n.forEach(i=>{s.push(cr(e).get(i).next(o=>{if(o===null)throw K();J(o.userId===this.userId),r.push(gs(this.serializer,o))}))}),M.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return Q2(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),M.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return ci(e).J({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=vn(i[1]);s.push(l)}else a.done()}).next(()=>{J(s.length===0)})})}containsKey(e,n){return Y2(e,this.userId,n)}Nn(e){return J2(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Y2(t,e,n){const r=Cc(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return ci(t).J({range:i,H:!0},(a,l,d)=>{const[h,m,p]=a;h===e&&m===s&&(o=!0),d.done()}).next(()=>o)}function cr(t){return Ye(t,"mutations")}function ci(t){return Ye(t,"documentMutations")}function J2(t){return Ye(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Fs(0)}static kn(){return new Fs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new Fs(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>Z.fromTimestamp(new De(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Qn(e,s)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ri(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(J(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return ri(e).J((o,a)=>{const l=sa(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(i)).next(()=>s)}forEachTarget(e,n){return ri(e).J((r,s)=>{const i=sa(s);n(i)})}qn(e){return qv(e).get("targetGlobalKey").next(n=>(J(n!==null),n))}Qn(e,n){return qv(e).put("targetGlobalKey",n)}Kn(e,n){return ri(e).put(q2(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Vs(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return ri(e).J({range:s,index:"queryTargetsIndex"},(o,a,l)=>{const d=sa(a);ml(n,d.target)&&(i=d,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=gr(e);return n.forEach(o=>{const a=It(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(s)}removeMatchingKeys(e,n,r){const s=gr(e);return M.forEach(n,i=>{const o=It(i.path);return M.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=gr(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=gr(e);let i=ae();return s.J({range:r,H:!0},(o,a,l)=>{const d=vn(o[1]),h=new q(d);i=i.add(h)}).next(()=>i)}containsKey(e,n){const r=It(n.path),s=IDBKeyRange.bound([r],[Ww(r)],!1,!0);let i=0;return gr(e).J({index:"documentTargetsIndex",H:!0,range:s},([o,a],l,d)=>{o!==0&&(i++,d.done())}).next(()=>i>0)}ot(e,n){return ri(e).get(n).next(r=>r?sa(r):null)}}function ri(t){return Ye(t,"targets")}function qv(t){return Ye(t,"targetGlobal")}function gr(t){return Ye(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv([t,e],[n,r]){const s=se(t,n);return s===0?se(e,r):s}class IA{constructor(e){this.Un=e,this.buffer=new we(Hv),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Hv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class bA{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){z("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){es(n)?z("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Zr(n)}await this.Hn(3e5)})}}class TA{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Pt.oe);const r=new IA(n);return this.Jn.forEachTarget(e,s=>r.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>r.zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(z("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(Wv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wv):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,s,i,o,a,l,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),ii()<=ce.DEBUG&&z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${m} documents in `+(d-l)+`ms
Total Duration: ${d-h}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function SA(t,e){return new TA(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,n){this.db=e,this.garbageCollector=SA(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,s)=>n(s))}addReference(e,n,r){return uc(e,r)}removeReference(e,n,r){return uc(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return uc(e,n)}nr(e,n){return function(s,i){let o=!1;return J2(s).Y(a=>Y2(s,a,i).next(l=>(l&&(o=!0),M.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(o,a)=>{if(a<=n){const l=this.nr(e,o).next(d=>{if(!d)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Z.min()),gr(e).delete(function(m){return[0,It(m.path)]}(o))))});s.push(l)}}).next(()=>M.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return uc(e,n)}tr(e,n){const r=gr(e);let s,i=Pt.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:d})=>{o===0?(i!==Pt.oe&&n(new q(vn(s)),i),i=d,s=l):i=Pt.oe}).next(()=>{i!==Pt.oe&&n(new q(vn(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function uc(t,e){return gr(t).put(function(r,s){return{targetId:0,path:It(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(){this.changes=new ts(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Le.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return cs(e).put(r)}removeEntry(e,n,r){return cs(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Eu(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Le.newInvalidDocument(n);return cs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Wo(n))},(s,i)=>{r=this.ir(n,i)}).next(()=>r)}sr(e,n){let r={size:0,document:Le.newInvalidDocument(n)};return cs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Wo(n))},(s,i)=>{r={document:this.ir(n,i),size:bu(i)}}).next(()=>r)}getEntries(e,n){let r=Bt();return this._r(e,n,(s,i)=>{const o=this.ir(s,i);r=r.insert(s,o)}).next(()=>r)}ar(e,n){let r=Bt(),s=new be(q.comparator);return this._r(e,n,(i,o)=>{const a=this.ir(i,o);r=r.insert(i,a),s=s.insert(i,bu(o))}).next(()=>({documents:r,ur:s}))}_r(e,n,r){if(n.isEmpty())return M.resolve();let s=new we(Qv);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Wo(s.first()),Wo(s.last())),o=s.getIterator();let a=o.getNext();return cs(e).J({index:"documentKeyIndex",range:i},(l,d,h)=>{const m=q.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&Qv(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,d),a=o.hasNext()?o.getNext():null),a?h.$(Wo(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Eu(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return cs(e).U(IDBKeyRange.bound(a,l,!0)).next(d=>{i==null||i.incrementDocumentReadCount(d.length);let h=Bt();for(const m of d){const p=this.ir(q.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);p.isFoundDocument()&&(pl(n,p)||s.has(p.key))&&(h=h.insert(p.key,p))}return h})}getAllFromCollectionGroup(e,n,r,s){let i=Bt();const o=Gv(n,r),a=Gv(n,Ht.max());return cs(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,d,h)=>{const m=this.ir(q.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);i=i.insert(m.key,m),i.size===s&&h.done()}).next(()=>i)}newChangeBuffer(e){return new CA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Kv(e).get("remoteDocumentGlobalKey").next(n=>(J(!!n),n))}rr(e,n){return Kv(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=hA(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Z.min())))return r}return Le.newInvalidDocument(e)}}function Z2(t){return new kA(t)}class CA extends X2{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new ts(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new we((i,o)=>se(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.lr.get(i);if(n.push(this.cr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=jv(this.cr.serializer,o);s=s.add(i.path.popLast());const d=bu(l);r+=d-a.size,n.push(this.cr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=jv(this.cr.serializer,o.convertToNoDocument(Z.min()));n.push(this.cr.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.cr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:s})=>(s.forEach((i,o)=>{this.lr.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function Kv(t){return Ye(t,"remoteDocumentGlobal")}function cs(t){return Ye(t,"remoteDocumentsV14")}function Wo(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Gv(t,e){const n=e.documentKey.path.toArray();return[t,Eu(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Qv(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=se(n[i],r[i]),s)return s;return s=se(n.length,r.length),s||(s=se(n[n.length-2],r[r.length-2]),s||se(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&_a(r.mutation,s,Rt.empty(),De.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){const s=_n();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=na();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=_n();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Bt();const o=va(),a=function(){return va()}();return n.forEach((l,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof nr)?i=i.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),_a(h.mutation,d,h.mutation.getFieldMask(),De.now())):o.set(d.key,Rt.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>{var m;return a.set(d,new AA(h,(m=o.get(d))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,n){const r=va();let s=new be((o,a)=>o-a),i=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const d=n.get(l);if(d===null)return;let h=r.get(l)||Rt.empty();h=a.applyToLocalView(d,h),r.set(l,h);const m=(s.get(a.batchId)||ae()).add(l);s=s.insert(a.batchId,m)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),d=l.key,h=l.value,m=x2();h.forEach(p=>{if(!i.has(p)){const E=N2(n.get(p),r.get(p));E!==null&&m.set(p,E),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):m2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):M.resolve(_n());let a=-1,l=i;return o.next(d=>M.forEach(d,(h,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),i.get(h)?M.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,l,d,ae())).next(h=>({batchId:a,changes:_2(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let s=na();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=na();return this.indexManager.getCollectionParents(e,i).next(a=>M.forEach(a,l=>{const d=function(m,p){return new uo(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((m,p)=>{o=o.insert(m,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Le.newInvalidDocument(h)))});let a=na();return o.forEach((l,d)=>{const h=i.get(l);h!==void 0&&_a(h.mutation,d,Rt.empty(),De.now()),pl(n,d)&&(a=a.insert(l,d))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return M.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:bt(s.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:H2(s.bundledQuery),readTime:bt(s.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(){this.overlays=new be(q.comparator),this.Ir=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=_n();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=_n(),i=n.length+1,o=new q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,d=l.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new be((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=_n(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const a=_n(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=s)););return M.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Fp(n,r));let i=this.Ir.get(n);i===void 0&&(i=ae(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(){this.sessionToken=$e.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(){this.Tr=new we(Je.Er),this.dr=new we(Je.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Je(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Je(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new q(new pe([])),r=new Je(n,e),s=new Je(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new q(new pe([])),r=new Je(n,e),s=new Je(n,e+1);let i=ae();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Je(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Je{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return q.comparator(e.key,n.key)||se(e.wr,n.wr)}static Ar(e,n){return se(e.wr,n.wr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new we(Je.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Mp(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new Je(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Je(n,0),s=new Je(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new we(se);return n.forEach(s=>{const i=new Je(s,0),o=new Je(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;q.isDocumentKey(i)||(i=i.child(""));const o=new Je(new q(i),0);let a=new we(se);return this.br.forEachWhile(l=>{const d=l.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(a=a.add(l.wr)),!0)},o),M.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){J(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(n.mutations,s=>{const i=new Je(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Je(n,0),s=this.br.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.Mr=e,this.docs=function(){return new be(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():Le.newInvalidDocument(n))}getEntries(e,n){let r=Bt();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Le.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Bt();const o=n.path,a=new q(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:d,value:{document:h}}=l.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||Cp(Hw(h),r)<=0||(s.has(h.key)||pl(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,r,s){K()}Or(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new VA(this)}getSize(e){return M.resolve(this.size)}}class VA extends X2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e){this.persistence=e,this.Nr=new ts(n=>Vs(n),ml),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Wp,this.targetCount=0,this.kr=Fs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),M.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Fs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Kn(n),M.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),M.waitFor(i).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Pt(0),this.Kr=!1,this.Kr=!0,this.$r=new jA,this.referenceDelegate=e(this),this.Ur=new MA(this),this.indexManager=new xA,this.remoteDocumentCache=function(s){return new OA(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new W2(n),this.Gr=new PA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new DA(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){z("MemoryPersistence","Starting transaction:",e);const s=new LA(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class LA extends Gw{constructor(e){super(),this.currentSequenceNumber=e}}class md{constructor(e){this.persistence=e,this.Jr=new Wp,this.Yr=null}static Zr(e){return new md(e)}get Xr(){if(this.Yr)return this.Yr;throw K()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{const s=q.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Z.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return M.or([()=>M.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e){this.serializer=e}O(e,n,r,s){const i=new sd("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cv,{unique:!0}),l.createObjectStore("documentMutations")}(e),Yv(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=M.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),Yv(e)),o=o.next(()=>function(l){const d=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Z.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",h)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,d){return d.store("mutations").U().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cv,{unique:!0});const m=d.store("mutations"),p=h.map(E=>m.put(E));return M.waitFor(p)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.ni(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),r<7&&s>=7&&(o=o.next(()=>this.ii(i))),r<8&&s>=8&&(o=o.next(()=>this.si(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.oi(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const d=l.createObjectStore("documentOverlays",{keyPath:yC});d.createIndex("collectionPathOverlayIndex",vC,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",_C,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const d=l.createObjectStore("remoteDocumentsV14",{keyPath:oC});d.createIndex("documentKeyIndex",aC),d.createIndex("collectionGroupIndex",lC)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.ai(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:fC}).createIndex("sequenceNumberIndex",mC,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:pC}).createIndex("documentKeyIndex",gC,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,s)=>{n+=bu(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(s=>M.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>M.forEach(a,l=>{J(l.userId===i.userId);const d=gs(this.serializer,l);return Q2(e,i.userId,d).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.J((o,a)=>{const l=new pe(o),d=function(m){return[0,It(m)]}(l);i.push(n.get(d).next(h=>h?M.resolve():(m=>n.put({targetId:0,path:It(m),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(i))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:hC});const r=n.store("collectionParents"),s=new $p,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:It(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new pe(o);return i(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],d)=>{const h=vn(a);return i(h.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,s)=>{const i=sa(s),o=q2(this.serializer,i);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),s=[];return r.J((i,o)=>{const a=n.store("remoteDocumentsV14"),l=function(m){return m.document?new q(pe.fromString(m.document.name).popFirst(5)):m.noDocument?q.fromSegments(m.noDocument.path):m.unknownDocument?q.fromSegments(m.unknownDocument.path):K()}(o).path.toArray(),d={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(d))}).next(()=>M.waitFor(s))}ai(e,n){const r=n.store("mutations"),s=Z2(this.serializer),i=new tE(md.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var d;let h=(d=a.get(l.userId))!==null&&d!==void 0?d:ae();gs(this.serializer,l).keys().forEach(m=>h=h.add(m)),a.set(l.userId,h)}),M.forEach(a,(l,d)=>{const h=new Ze(d),m=hd.lt(this.serializer,h),p=i.getIndexManager(h),E=fd.lt(h,this.serializer,p,i.referenceDelegate);return new eE(s,E,m,p).recalculateAndSaveOverlaysForDocumentKeys(new em(n,Pt.oe),l).next()})})}}function Yv(t){t.createObjectStore("targetDocuments",{keyPath:uC}).createIndex("documentTargetsIndex",dC,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",cC,{unique:!0}),t.createObjectStore("targetGlobal")}const Fh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class qp{constructor(e,n,r,s,i,o,a,l,d,h,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=i,this.window=o,this.document=a,this.ci=d,this.li=h,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!qp.D())throw new W(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new NA(this,s),this.Ai=n+"main",this.serializer=new W2(l),this.Ri=new Lr(this.Ai,this.hi,new FA(this.serializer)),this.$r=new mA,this.Ur=new EA(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Z2(this.serializer),this.Gr=new fA,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Be("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new W(F.FAILED_PRECONDITION,Fh);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Pt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>dc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(es(e))return z("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return z("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return qo(e).get("owner").next(n=>M.resolve(this.vi(n)))}Ci(e){return dc(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Ye(n,"clientMetadata");return r.U().next(s=>{const i=this.xi(s,18e5),o=s.filter(a=>i.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?M.resolve(!0):qo(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new W(F.FAILED_PRECONDITION,Fh);return!1}}return!(!this.networkEnabled||!this.inForeground)||dc(e).U().next(r=>this.xi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&z("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new em(e,Pt.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>dc(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return fd.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new wA(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return hd.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){z("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===17?EC:l===16?wC:l===15?Pp:l===14?e2:l===13?Zw:l===12?xC:l===11?Xw:void K()}(this.hi);let o;return this.Ri.runTransaction(e,s,i,a=>(o=new em(a,this.Qr?this.Qr.next():Pt.oe),n==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw Be(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new W(F.FAILED_PRECONDITION,Kw);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return qo(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new W(F.FAILED_PRECONDITION,Fh)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return qo(e).put("owner",n)}static D(){return Lr.D()}bi(e){const n=qo(e);return n.get("owner").next(r=>this.vi(r)?(z("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):M.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Be(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;kw()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return z("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Be("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Be("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function qo(t){return Ye(t,"owner")}function dc(t){return Ye(t,"clientMetadata")}function nE(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ae(),s=ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Hp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return kw()?8:Qw(Qe())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new UA;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(ii()<=ce.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",oi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(ii()<=ce.DEBUG&&z("QueryEngine","Query:",oi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(ii()<=ce.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",oi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wt(n))):M.resolve())}Yi(e,n){if(Ev(n))return M.resolve(null);let r=Wt(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=_u(n,null,"F"),r=Wt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ae(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const d=this.ts(n,a);return this.ns(n,d,o,l.readTime)?this.Yi(e,_u(n,null,"F")):this.rs(e,d,n,l)}))})))}Zi(e,n,r,s){return Ev(n)||s.isEqual(Z.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?M.resolve(null):(ii()<=ce.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),oi(n)),this.rs(e,o,n,qw(s,-1)).next(a=>a))})}ts(e,n){let r=new we(y2(e));return n.forEach((s,i)=>{pl(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return ii()<=ce.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",oi(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ht.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new be(se),this._s=new ts(i=>Vs(i),ml),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eE(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function sE(t,e,n,r){return new zA(t,e,n,r)}async function iE(t,e){const n=G(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ae();for(const d of s){o.push(d.batchId);for(const h of d.mutations)l=l.add(h.key)}for(const d of i){a.push(d.batchId);for(const h of d.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:a}))})})}function BA(t,e){const n=G(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,d,h){const m=d.batch,p=m.keys();let E=M.resolve();return p.forEach(N=>{E=E.next(()=>h.getEntry(l,N)).next(S=>{const A=d.docVersions.get(N);J(A!==null),S.version.compareTo(A)<0&&(m.applyToRemoteDocument(S,d),S.isValidDocument()&&(S.setReadTime(d.commitVersion),h.addEntry(S)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(l,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ae();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(l=l.add(a.batch.mutations[d].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function oE(t){const e=G(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function $A(t,e){const n=G(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,m)=>{const p=s.get(m);if(!p)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,m)));let E=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?E=E.withResumeToken($e.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),s=s.insert(m,E),function(S,A,w){return S.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,E,h)&&a.push(n.Ur.updateTargetData(i,E))});let l=Bt(),d=ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(WA(i,o,e.documentUpdates).next(h=>{l=h.Ps,d=h.Is})),!r.isEqual(Z.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return M.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,d)).next(()=>l)}).then(i=>(n.os=s,i))}function WA(t,e,n){let r=ae(),s=ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Bt();return n.forEach((a,l)=>{const d=i.get(a);l.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Z.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function qA(t,e){const n=G(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Tu(t,e){const n=G(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,M.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Fn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Yi(t,e,n){const r=G(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!es(o))throw o;z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function mm(t,e,n){const r=G(t);let s=Z.min(),i=ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,d,h){const m=G(l),p=m._s.get(h);return p!==void 0?M.resolve(m.os.get(p)):m.Ur.getTargetData(d,h)}(r,o,Wt(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Z.min(),n?i:ae())).next(a=>(cE(r,g2(e),a),{documents:a,Ts:i})))}function aE(t,e){const n=G(t),r=G(n.Ur),s=n.os.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.ot(i,e).next(o=>o?o.target:null))}function lE(t,e){const n=G(t),r=n.us.get(e)||Z.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.cs.getAllFromCollectionGroup(s,e,qw(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(cE(n,e,s),s))}function cE(t,e,n){let r=t.us.get(e)||Z.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}function Jv(t,e){return`firestore_clients_${t}_${e}`}function Xv(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Uh(t,e){return`firestore_targets_${t}_${e}`}class Su{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Rs(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new W(s.error.code,s.error.message))),o?new Su(e,n,s.state,i):(Be("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xa{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new W(r.error.code,r.error.message))),i?new xa(e,r.state,s):(Be("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nu{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=Op();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=Yw(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Nu(e,i):(Be("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Kp{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Kp(n.clientId,n.onlineState):(Be("SharedClientState",`Failed to parse online state: ${e}`),null)}}class pm{constructor(){this.activeTargetIds=Op()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zh{constructor(e,n,r,s,i){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new be(se),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=Jv(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new pm),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const s=this.getItem(Jv(this.persistenceKey,r));if(s){const i=Nu.Rs(r,s);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Uh(this.persistenceKey,e));if(s){const i=xa.Rs(e,s);i&&(r=i.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Uh(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Qs(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return z("SharedClientState","READ",e,n),n}setItem(e,n){z("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){z("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(z("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void Be("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(i){let o=Pt.oe;if(i!=null)try{const a=JSON.parse(i);J(typeof a=="number"),o=a}catch(a){Be("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Pt.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(s=>this.syncEngine.eo(s)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const s=new Su(this.currentUser,e,n,r),i=Xv(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Vs())}Qs(e){const n=Xv(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const s=Uh(this.persistenceKey,e),i=new xa(e,n,r);this.setItem(s,i.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return Nu.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return Su.Rs(new Ze(i),s,n)}Ys(e,n){const r=this.Ms.exec(e),s=Number(r[1]);return xa.Rs(s,n)}Ls(e){return Kp.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);z("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),s=this.ks(this.Ss),i=this.ks(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=Op();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class uE{constructor(){this.so=new pm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new pm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hc=null;function Bh(){return hc===null?hc=function(){return 268435456+Math.round(2147483648*Math.random())}():hc++,"0x"+hc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht="WebChannelConnection";class QA extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Bh(),l=this.xo(n,r.toUriEncodedString());z("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,l,d,s).then(h=>(z("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw $r("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+co}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=KA[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Bh();return new Promise((o,a)=>{const l=new Mw;l.setWithCredentials(!0),l.listenOnce(Lw.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Nc.NO_ERROR:const h=l.getResponseJson();z(ht,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case Nc.TIMEOUT:z(ht,`RPC '${e}' ${i} timed out`),a(new W(F.DEADLINE_EXCEEDED,"Request time out"));break;case Nc.HTTP_ERROR:const m=l.getStatus();if(z(ht,`RPC '${e}' ${i} failed with status:`,m,"response text:",l.getResponseText()),m>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const E=p==null?void 0:p.error;if(E&&E.status&&E.message){const N=function(A){const w=A.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(w)>=0?w:F.UNKNOWN}(E.status);a(new W(N,E.message))}else a(new W(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new W(F.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{z(ht,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);z(ht,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Bh(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=zw(),a=Uw(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");z(ht,`Creating RPC '${e}' stream ${s}: ${h}`,l);const m=o.createWebChannel(h,l);let p=!1,E=!1;const N=new GA({Io:A=>{E?z(ht,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(p||(z(ht,`Opening RPC '${e}' stream ${s} transport.`),m.open(),p=!0),z(ht,`RPC '${e}' stream ${s} sending:`,A),m.send(A))},To:()=>m.close()}),S=(A,w,v)=>{A.listen(w,y=>{try{v(y)}catch(T){setTimeout(()=>{throw T},0)}})};return S(m,ta.EventType.OPEN,()=>{E||(z(ht,`RPC '${e}' stream ${s} transport opened.`),N.yo())}),S(m,ta.EventType.CLOSE,()=>{E||(E=!0,z(ht,`RPC '${e}' stream ${s} transport closed`),N.So())}),S(m,ta.EventType.ERROR,A=>{E||(E=!0,$r(ht,`RPC '${e}' stream ${s} transport errored:`,A),N.So(new W(F.UNAVAILABLE,"The operation could not be completed")))}),S(m,ta.EventType.MESSAGE,A=>{var w;if(!E){const v=A.data[0];J(!!v);const y=v,T=y.error||((w=y[0])===null||w===void 0?void 0:w.error);if(T){z(ht,`RPC '${e}' stream ${s} received error:`,T);const j=T.status;let O=function(x){const C=We[x];if(C!==void 0)return A2(C)}(j),I=T.message;O===void 0&&(O=F.INTERNAL,I="Unknown error status: "+j+" with message "+T.message),E=!0,N.So(new W(O,I)),m.close()}else z(ht,`RPC '${e}' stream ${s} received:`,v),N.bo(v)}}),S(a,Fw.STAT_EVENT,A=>{A.stat===Xf.PROXY?z(ht,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Xf.NOPROXY&&z(ht,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(){return typeof window<"u"?window:null}function Dc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(t){return new nA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Be(n.toString()),Be("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new W(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YA extends fE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=iA(this.serializer,e),r=function(i){if(!("targetChange"in i))return Z.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?bt(o.readTime):Z.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=cm(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=yu(l)?{documents:L2(i,l)}:{query:F2(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=j2(i,o.resumeToken);const d=am(i,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Z.min())>0){a.readTime=Qi(i,o.snapshotVersion.toTimestamp());const d=am(i,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);const r=aA(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=cm(this.serializer),n.removeTarget=e,this.a_(n)}}class JA extends fE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return J(!!e.streamToken),this.lastStreamToken=e.streamToken,J(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){J(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=oA(e.writeResults,e.commitTime),r=bt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=cm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>wu(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,lm(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new W(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,lm(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class ZA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Be(n),this.D_=!1):z("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ks(this)&&(z("RemoteStore","Restarting streams for network reachability change."),await async function(l){const d=G(l);d.L_.add(4),await vl(d),d.q_.set("Unknown"),d.L_.delete(4),await gd(d)}(this))})}),this.q_=new ZA(r,s)}}async function gd(t){if(Ks(t))for(const e of t.B_)await e(!0)}async function vl(t){for(const e of t.B_)await e(!1)}function yd(t,e){const n=G(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Yp(n)?Qp(n):mo(n).r_()&&Gp(n,e))}function Ji(t,e){const n=G(t),r=mo(n);n.N_.delete(e),r.r_()&&mE(n,e),n.N_.size===0&&(r.r_()?r.o_():Ks(n)&&n.q_.set("Unknown"))}function Gp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}mo(t).A_(e)}function mE(t,e){t.Q_.xe(e),mo(t).R_(e)}function Qp(t){t.Q_=new XC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),mo(t).start(),t.q_.v_()}function Yp(t){return Ks(t)&&!mo(t).n_()&&t.N_.size>0}function Ks(t){return G(t).L_.size===0}function pE(t){t.Q_=void 0}async function tP(t){t.q_.set("Online")}async function nP(t){t.N_.forEach((e,n)=>{Gp(t,e)})}async function rP(t,e){pE(t),Yp(t)?(t.q_.M_(e),Qp(t)):t.q_.set("Unknown")}async function sP(t,e,n){if(t.q_.set("Online"),e instanceof R2&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ku(t,r)}else if(e instanceof jc?t.Q_.Ke(e):e instanceof P2?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Z.min()))try{const r=await oE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.N_.get(d);h&&i.N_.set(d,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,d)=>{const h=i.N_.get(l);if(!h)return;i.N_.set(l,h.withResumeToken($e.EMPTY_BYTE_STRING,h.snapshotVersion)),mE(i,l);const m=new Fn(h.target,l,d,h.sequenceNumber);Gp(i,m)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){z("RemoteStore","Failed to raise snapshot:",r),await ku(t,r)}}async function ku(t,e,n){if(!es(e))throw e;t.L_.add(1),await vl(t),t.q_.set("Offline"),n||(n=()=>oE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{z("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await gd(t)})}function gE(t,e){return e().catch(n=>ku(t,n,e))}async function fo(t){const e=G(t),n=Hr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;iP(e);)try{const s=await qA(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,oP(e,s)}catch(s){await ku(e,s)}yE(e)&&vE(e)}function iP(t){return Ks(t)&&t.O_.length<10}function oP(t,e){t.O_.push(e);const n=Hr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function yE(t){return Ks(t)&&!Hr(t).n_()&&t.O_.length>0}function vE(t){Hr(t).start()}async function aP(t){Hr(t).p_()}async function lP(t){const e=Hr(t);for(const n of t.O_)e.m_(n.mutations)}async function cP(t,e,n){const r=t.O_.shift(),s=Lp.from(r,e,n);await gE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await fo(t)}async function uP(t,e){e&&Hr(t).V_&&await async function(r,s){if(function(o){return QC(o)&&o!==F.ABORTED}(s.code)){const i=r.O_.shift();Hr(r).s_(),await gE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await fo(r)}}(t,e),yE(t)&&vE(t)}async function e_(t,e){const n=G(t);n.asyncQueue.verifyOperationInProgress(),z("RemoteStore","RemoteStore received new credentials");const r=Ks(n);n.L_.add(3),await vl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await gd(n)}async function gm(t,e){const n=G(t);e?(n.L_.delete(2),await gd(n)):e||(n.L_.add(2),await vl(n),n.q_.set("Unknown"))}function mo(t){return t.K_||(t.K_=function(n,r,s){const i=G(n);return i.w_(),new YA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:tP.bind(null,t),Ro:nP.bind(null,t),mo:rP.bind(null,t),d_:sP.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Yp(t)?Qp(t):t.q_.set("Unknown")):(await t.K_.stop(),pE(t))})),t.K_}function Hr(t){return t.U_||(t.U_=function(n,r,s){const i=G(n);return i.w_(),new JA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:aP.bind(null,t),mo:uP.bind(null,t),f_:lP.bind(null,t),g_:cP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await fo(t)):(await t.U_.stop(),t.O_.length>0&&(z("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Jp(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xp(t,e){if(Be("AsyncQueue",`${e}: ${t}`),es(t))return new W(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=na(),this.sortedSet=new be(this.comparator)}static emptySet(e){return new Ci(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ci)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ci;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(){this.W_=new be(q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):K():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Xi{constructor(e,n,r,s,i,o,a,l,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Xi(e,n,Ci.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class hP{constructor(){this.queries=n_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=G(n),i=s.queries;s.queries=n_(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new W(F.ABORTED,"Firestore shutting down"))}}function n_(){return new ts(t=>p2(t),ld)}async function fP(t,e){const n=G(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new dP,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Xp(o,`Initialization of query '${oi(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Zp(n)}async function mP(t,e){const n=G(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function pP(t,e){const n=G(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&Zp(n)}function gP(t,e,n){const r=G(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Zp(t){t.Y_.forEach(e=>{e.next()})}var ym,r_;(r_=ym||(ym={})).ea="default",r_.Cache="cache";class yP{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Xi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Xi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ym.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e){this.key=e}}class xE{constructor(e){this.key=e}}class vP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ae(),this.mutatedKeys=ae(),this.Aa=y2(e),this.Ra=new Ci(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new t_,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,m)=>{const p=s.get(h),E=pl(this.query,m)?m:null,N=!!p&&this.mutatedKeys.has(p.key),S=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let A=!1;p&&E?p.data.isEqual(E.data)?N!==S&&(r.track({type:3,doc:E}),A=!0):this.ga(p,E)||(r.track({type:2,doc:E}),A=!0,(l&&this.Aa(E,l)>0||d&&this.Aa(E,d)<0)&&(a=!0)):!p&&E?(r.track({type:0,doc:E}),A=!0):p&&!E&&(r.track({type:1,doc:p}),A=!0,(l||d)&&(a=!0)),A&&(E?(o=o.add(E),i=S?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,m)=>function(E,N){const S=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return S(E)-S(N)}(h.type,m.type)||this.Aa(h.doc,m.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,d=l!==this.Ea;return this.Ea=l,o.length!==0||d?{snapshot:new Xi(this.query,e.Ra,i,o,e.mutatedKeys,l===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new t_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ae(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new xE(r))}),this.da.forEach(r=>{e.has(r)||n.push(new _E(r))}),n}ba(e){this.Ta=e.Ts,this.da=ae();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Xi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class _P{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class xP{constructor(e){this.key=e,this.va=!1}}class wP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ts(a=>p2(a),ld),this.Ma=new Map,this.xa=new Set,this.Oa=new be(q.comparator),this.Na=new Map,this.La=new Wp,this.Ba={},this.ka=new Map,this.qa=Fs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function EP(t,e,n=!0){const r=vd(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await wE(r,e,n,!0),s}async function IP(t,e){const n=vd(t);await wE(n,e,!0,!1)}async function wE(t,e,n,r){const s=await Tu(t.localStore,Wt(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await eg(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&yd(t.remoteStore,s),a}async function eg(t,e,n,r,s){t.Ka=(m,p,E)=>async function(S,A,w,v){let y=A.view.ma(w);y.ns&&(y=await mm(S.localStore,A.query,!1).then(({documents:I})=>A.view.ma(I,y)));const T=v&&v.targetChanges.get(A.targetId),j=v&&v.targetMismatches.get(A.targetId)!=null,O=A.view.applyChanges(y,S.isPrimaryClient,T,j);return vm(S,A.targetId,O.wa),O.snapshot}(t,m,p,E);const i=await mm(t.localStore,e,!0),o=new vP(e,i.Ts),a=o.ma(i.documents),l=yl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(a,t.isPrimaryClient,l);vm(t,n,d.wa);const h=new _P(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function bP(t,e,n){const r=G(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!ld(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Yi(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ji(r.remoteStore,s.targetId),Zi(r,s.targetId)}).catch(Zr)):(Zi(r,s.targetId),await Yi(r.localStore,s.targetId,!0))}async function TP(t,e){const n=G(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ji(n.remoteStore,r.targetId))}async function SP(t,e,n){const r=sg(t);try{const s=await function(o,a){const l=G(o),d=De.now(),h=a.reduce((E,N)=>E.add(N.key),ae());let m,p;return l.persistence.runTransaction("Locally write mutations","readwrite",E=>{let N=Bt(),S=ae();return l.cs.getEntries(E,h).next(A=>{N=A,N.forEach((w,v)=>{v.isValidDocument()||(S=S.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(E,N)).next(A=>{m=A;const w=[];for(const v of a){const y=KC(v,m.get(v.key).overlayedDocument);y!=null&&w.push(new nr(v.key,y,i2(y.value.mapValue),_t.exists(!0)))}return l.mutationQueue.addMutationBatch(E,d,w,a)}).next(A=>{p=A;const w=A.applyToLocalDocumentSet(m,S);return l.documentOverlayCache.saveOverlays(E,A.batchId,w)})}).then(()=>({batchId:p.batchId,changes:_2(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let d=o.Ba[o.currentUser.toKey()];d||(d=new be(se)),d=d.insert(a,l),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await ns(r,s.changes),await fo(r.remoteStore)}catch(s){const i=Xp(s,"Failed to persist write");n.reject(i)}}async function EE(t,e){const n=G(t);try{const r=await $A(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(J(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?J(o.va):s.removedDocuments.size>0&&(J(o.va),o.va=!1))}),await ns(n,r,e)}catch(r){await Zr(r)}}function s_(t,e,n){const r=G(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=G(o);l.onlineState=a;let d=!1;l.queries.forEach((h,m)=>{for(const p of m.j_)p.Z_(a)&&(d=!0)}),d&&Zp(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function NP(t,e,n){const r=G(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new be(q.comparator);o=o.insert(i,Le.newNoDocument(i,Z.min()));const a=ae().add(i),l=new gl(Z.min(),new Map,new be(se),o,a);await EE(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),rg(r)}else await Yi(r.localStore,e,!1).then(()=>Zi(r,e,n)).catch(Zr)}async function kP(t,e){const n=G(t),r=e.batch.batchId;try{const s=await BA(n.localStore,e);ng(n,r,null),tg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ns(n,s)}catch(s){await Zr(s)}}async function CP(t,e,n){const r=G(t);try{const s=await function(o,a){const l=G(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return l.mutationQueue.lookupMutationBatch(d,a).next(m=>(J(m!==null),h=m.keys(),l.mutationQueue.removeMutationBatch(d,m))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>l.localDocuments.getDocuments(d,h))})}(r.localStore,e);ng(r,e,n),tg(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ns(r,s)}catch(s){await Zr(s)}}function tg(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function ng(t,e,n){const r=G(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Zi(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||IE(t,r)})}function IE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ji(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),rg(t))}function vm(t,e,n){for(const r of n)r instanceof _E?(t.La.addReference(r.key,e),AP(t,r)):r instanceof xE?(z("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||IE(t,r.key)):K()}function AP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(z("SyncEngine","New document in limbo: "+n),t.xa.add(r),rg(t))}function rg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new q(pe.fromString(e)),r=t.qa.next();t.Na.set(r,new xP(n)),t.Oa=t.Oa.insert(n,r),yd(t.remoteStore,new Fn(Wt(ad(n.path)),r,"TargetPurposeLimboResolution",Pt.oe))}}async function ns(t,e,n){const r=G(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Hp.Wi(l.targetId,d);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,d){const h=G(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>M.forEach(d,p=>M.forEach(p.$i,E=>h.persistence.referenceDelegate.addReference(m,p.targetId,E)).next(()=>M.forEach(p.Ui,E=>h.persistence.referenceDelegate.removeReference(m,p.targetId,E)))))}catch(m){if(!es(m))throw m;z("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const p=m.targetId;if(!m.fromCache){const E=h.os.get(p),N=E.snapshotVersion,S=E.withLastLimboFreeSnapshotVersion(N);h.os=h.os.insert(p,S)}}}(r.localStore,i))}async function PP(t,e){const n=G(t);if(!n.currentUser.isEqual(e)){z("SyncEngine","User change. New user:",e.toKey());const r=await iE(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new W(F.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ns(n,r.hs)}}function RP(t,e){const n=G(t),r=n.Na.get(e);if(r&&r.va)return ae().add(r.key);{let s=ae();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}async function jP(t,e){const n=G(t),r=await mm(n.localStore,e.query,!0),s=e.view.ba(r);return n.isPrimaryClient&&vm(n,e.targetId,s.wa),s}async function DP(t,e){const n=G(t);return lE(n.localStore,e).then(r=>ns(n,r))}async function OP(t,e,n,r){const s=G(t),i=await function(a,l){const d=G(a),h=G(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",m=>h.Mn(m,l).next(p=>p?d.localDocuments.getDocuments(m,p):M.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await fo(s.remoteStore):n==="acknowledged"||n==="rejected"?(ng(s,e,r||null),tg(s,e),function(a,l){G(G(a).mutationQueue).On(l)}(s.localStore,e)):K(),await ns(s,i)):z("SyncEngine","Cannot apply mutation batch with id: "+e)}async function VP(t,e){const n=G(t);if(vd(n),sg(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await i_(n,r.toArray());n.Qa=!0,await gm(n.remoteStore,!0);for(const i of s)yd(n.remoteStore,i)}else if(e===!1&&n.Qa!==!1){const r=[];let s=Promise.resolve();n.Ma.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(Zi(n,o),Yi(n.localStore,o,!0))),Ji(n.remoteStore,o)}),await s,await i_(n,r),function(o){const a=G(o);a.Na.forEach((l,d)=>{Ji(a.remoteStore,d)}),a.La.pr(),a.Na=new Map,a.Oa=new be(q.comparator)}(n),n.Qa=!1,await gm(n.remoteStore,!1)}}async function i_(t,e,n){const r=G(t),s=[],i=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&l.length!==0){a=await Tu(r.localStore,Wt(l[0]));for(const d of l){const h=r.Fa.get(d),m=await jP(r,h);m.snapshot&&i.push(m.snapshot)}}else{const d=await aE(r.localStore,o);a=await Tu(r.localStore,d),await eg(r,bE(d),o,!1,a.resumeToken)}s.push(a)}return r.Ca.d_(i),s}function bE(t){return f2(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function MP(t){return function(n){return G(G(n).persistence).Qi()}(G(t).localStore)}async function LP(t,e,n,r){const s=G(t);if(s.Qa)return void z("SyncEngine","Ignoring unexpected query state notification.");const i=s.Ma.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await lE(s.localStore,g2(i[0])),a=gl.createSynthesizedRemoteEventForCurrentChange(e,n==="current",$e.EMPTY_BYTE_STRING);await ns(s,o,a);break}case"rejected":await Yi(s.localStore,e,!0),Zi(s,e,r);break;default:K()}}async function FP(t,e,n){const r=vd(t);if(r.Qa){for(const s of e){if(r.Ma.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){z("SyncEngine","Adding an already active target "+s);continue}const i=await aE(r.localStore,s),o=await Tu(r.localStore,i);await eg(r,bE(i),o.targetId,!1,o.resumeToken),yd(r.remoteStore,o)}for(const s of n)r.Ma.has(s)&&await Yi(r.localStore,s,!1).then(()=>{Ji(r.remoteStore,s),Zi(r,s)}).catch(Zr)}}function vd(t){const e=G(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=EE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NP.bind(null,e),e.Ca.d_=pP.bind(null,e.eventManager),e.Ca.$a=gP.bind(null,e.eventManager),e}function sg(t){const e=G(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CP.bind(null,e),e}class Xa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return sE(this.persistence,new rE,e.initialUser,this.serializer)}Ga(e){return new tE(md.Zr,this.serializer)}Wa(e){return new uE}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xa.provider={build:()=>new Xa};class TE extends Xa{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await sg(this.Ja.syncEngine),await fo(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return sE(this.persistence,new rE,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new bA(r,e.asyncQueue,n)}Ha(e,n){const r=new rC(n,this.persistence);return new nC(e.asyncQueue,r)}Ga(e){const n=nE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?kt.withCacheSize(this.cacheSizeBytes):kt.DEFAULT;return new qp(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,dE(),Dc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new uE}}class UP extends TE{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof zh&&(this.sharedClientState.syncEngine={no:OP.bind(null,n),ro:LP.bind(null,n),io:FP.bind(null,n),Qi:MP.bind(null,n),eo:DP.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await VP(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=dE();if(!zh.D(n))throw new W(F.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=nE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new zh(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Za{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>s_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=PP.bind(null,this.syncEngine),await gm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new hP}()}createDatastore(e){const n=pd(e.databaseInfo.databaseId),r=function(i){return new QA(i)}(e.databaseInfo);return function(i,o,a,l){return new XA(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new eP(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>s_(this.syncEngine,n,0),function(){return Zv.D()?new Zv:new HA}())}createSyncEngine(e,n){return function(s,i,o,a,l,d,h){const m=new wP(s,i,o,a,l,d);return h&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=G(s);z("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await vl(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Za.provider={build:()=>new Za};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Be("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ze.UNAUTHENTICATED,this.clientId=$w.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{z("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(z("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Xp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $h(t,e){t.asyncQueue.verifyOperationInProgress(),z("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await iE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function o_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $P(t);z("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>e_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>e_(e.remoteStore,s)),t._onlineComponents=e}async function $P(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){z("FirestoreClient","Using user provided OfflineComponentProvider");try{await $h(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;$r("Error using user provided cache. Falling back to memory cache: "+n),await $h(t,new Xa)}}else z("FirestoreClient","Using default OfflineComponentProvider"),await $h(t,new Xa);return t._offlineComponents}async function SE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(z("FirestoreClient","Using user provided OnlineComponentProvider"),await o_(t,t._uninitializedComponentsProvider._online)):(z("FirestoreClient","Using default OnlineComponentProvider"),await o_(t,new Za))),t._onlineComponents}function WP(t){return SE(t).then(e=>e.syncEngine)}async function a_(t){const e=await SE(t),n=e.eventManager;return n.onListen=EP.bind(null,e.syncEngine),n.onUnlisten=bP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=IP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=TP.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(t,e,n){if(!n)throw new W(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qP(t,e,n,r){if(e===!0&&r===!0)throw new W(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function c_(t){if(!q.isDocumentKey(t))throw new W(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function u_(t){if(q.isDocumentKey(t))throw new W(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _d(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":K()}function Wn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_d(t);throw new W(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new d_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new d_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new q4;switch(r.type){case"firstParty":return new Q4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=l_.get(n);r&&(z("ComponentProvider","Removing Datastore"),l_.delete(n),r.terminate())}(this),Promise.resolve()}}function HP(t,e,n,r={}){var s;const i=(t=Wn(t,xd))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&$r("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Ze.MOCK_USER;else{a=wk(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new W(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ze(d)}t._authCredentials=new H4(new Bw(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new rs(this.firestore,e,this._query)}}class Vt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}}class Fr extends rs{constructor(e,n,r){super(e,n,ad(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new q(e))}withConverter(e){return new Fr(this.firestore,e,this._path)}}function On(t,e,...n){if(t=tt(t),kE("collection","path",e),t instanceof xd){const r=pe.fromString(e,...n);return u_(r),new Fr(t,null,r)}{if(!(t instanceof Vt||t instanceof Fr))throw new W(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return u_(r),new Fr(t.firestore,null,r)}}function el(t,e,...n){if(t=tt(t),arguments.length===1&&(e=$w.newId()),kE("doc","path",e),t instanceof xd){const r=pe.fromString(e,...n);return c_(r),new Vt(t,null,new q(r))}{if(!(t instanceof Vt||t instanceof Fr))throw new W(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return c_(r),new Vt(t.firestore,t instanceof Fr?t.converter:null,new q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new hE(this,"async_queue_retry"),this.Vu=()=>{const r=Dc();r&&z("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Dc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Dc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Mr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!es(e))throw e;z("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Be("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Jp.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&K()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function f_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Us extends xd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new h_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new h_(e),this._firestoreClient=void 0,await e}}}function KP(t,e){const n=typeof t=="object"?t:jw(),r=typeof t=="string"?t:"(default)",s=Np(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=_k("firestore");i&&HP(s,...i)}return s}function CE(t){if(t._terminated)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||AE(t),t._firestoreClient}function AE(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,d,h){return new bC(a,l,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,NE(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new BP(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function GP(t,e){$r("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return PE(t,Za.provider,{build:r=>new TE(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function QP(t){$r("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();PE(t,Za.provider,{build:n=>new UP(n,e.cacheSizeBytes)})}function PE(t,e,n){if((t=Wn(t,Us))._firestoreClient||t._terminated)throw new W(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new W(F.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},AE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new eo($e.fromBase64String(e))}catch(n){throw new W(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new eo($e.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=/^__.*__$/;class JP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new nr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ho(e,this.data,n,this.fieldTransforms)}}class RE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new nr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function jE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}class ag{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ag(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Cu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(jE(this.Cu)&&YP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class XP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||pd(e)}Qu(e,n,r,s=!1){return new ag({Cu:e,methodName:n,qu:r,path:Pe.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lg(t){const e=t._freezeSettings(),n=pd(t._databaseId);return new XP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ZP(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);ug("Data must be an object, but it was:",o,r);const a=DE(r,o);let l,d;if(i.merge)l=new Rt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const m of i.mergeFields){const p=_m(e,m,n);if(!o.contains(p))throw new W(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);VE(h,p)||h.push(p)}l=new Rt(h),d=o.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,d=o.fieldTransforms;return new JP(new mt(a),l,d)}class Id extends Ed{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Id}}class cg extends Ed{_toFieldTransform(e){return new S2(e.path,new Hi)}isEqual(e){return e instanceof cg}}function eR(t,e,n,r){const s=t.Qu(1,e,n);ug("Data must be an object, but it was:",s,r);const i=[],o=mt.empty();Hs(r,(l,d)=>{const h=dg(e,l,n);d=tt(d);const m=s.Nu(h);if(d instanceof Id)i.push(h);else{const p=_l(d,m);p!=null&&(i.push(h),o.set(h,p))}});const a=new Rt(i);return new RE(o,a,s.fieldTransforms)}function tR(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[_m(e,r,n)],l=[s];if(i.length%2!=0)throw new W(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(_m(e,i[p])),l.push(i[p+1]);const d=[],h=mt.empty();for(let p=a.length-1;p>=0;--p)if(!VE(d,a[p])){const E=a[p];let N=l[p];N=tt(N);const S=o.Nu(E);if(N instanceof Id)d.push(E);else{const A=_l(N,S);A!=null&&(d.push(E),h.set(E,A))}}const m=new Rt(d);return new RE(h,m,o.fieldTransforms)}function nR(t,e,n,r=!1){return _l(n,t.Qu(r?4:3,e))}function _l(t,e){if(OE(t=tt(t)))return ug("Unsupported field value:",e,t),DE(t,e);if(t instanceof Ed)return function(r,s){if(!jE(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=_l(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return zC(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=De.fromDate(r);return{timestampValue:Qi(s.serializer,i)}}if(r instanceof De){const i=new De(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qi(s.serializer,i)}}if(r instanceof ig)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof eo)return{bytesValue:j2(s.serializer,r._byteString)};if(r instanceof Vt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:zp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof og)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Vp(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${_d(r)}`)}(t,e)}function DE(t,e){const n={};return t2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hs(t,(r,s)=>{const i=_l(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function OE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof De||t instanceof ig||t instanceof eo||t instanceof Vt||t instanceof Ed||t instanceof og)}function ug(t,e,n){if(!OE(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=_d(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function _m(t,e,n){if((e=tt(e))instanceof wd)return e._internalPath;if(typeof e=="string")return dg(t,e);throw Cu("Field path arguments must be of type string or ",t,!1,void 0,n)}const rR=new RegExp("[~\\*/\\[\\]]");function dg(t,e,n){if(e.search(rR)>=0)throw Cu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new wd(...e.split("."))._internalPath}catch{throw Cu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Cu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new W(F.INVALID_ARGUMENT,a+t+l)}function VE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(bd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sR extends ME{data(){return super.data()}}function bd(t,e){return typeof e=="string"?dg(t,e):e instanceof wd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hg{}class fg extends hg{}function Td(t,e,...n){let r=[];e instanceof hg&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof mg).length,a=i.filter(l=>l instanceof Sd).length;if(o>1||o>0&&a>0)throw new W(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Sd extends fg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Sd(e,n,r)}_apply(e){const n=this._parse(e);return LE(e._query,n),new rs(e.firestore,e.converter,om(e._query,n))}_parse(e){const n=lg(e.firestore);return function(i,o,a,l,d,h,m){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new W(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){p_(m,h);const E=[];for(const N of m)E.push(m_(l,i,N));p={arrayValue:{values:E}}}else p=m_(l,i,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||p_(m,h),p=nR(a,o,m,h==="in"||h==="not-in");return ue.create(d,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function oR(t,e,n){const r=e,s=bd("where",t);return Sd._create(s,r,n)}class mg extends hg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new mg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ve.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)LE(o,l),o=om(o,l)}(e._query,n),new rs(e.firestore,e.converter,om(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class pg extends fg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new pg(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new W(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new W(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ya(i,o)}(e._query,this._field,this._direction);return new rs(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new uo(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function gg(t,e="asc"){const n=e,r=bd("orderBy",t);return pg._create(r,n)}class yg extends fg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new yg(e,n,r)}_apply(e){return new rs(e.firestore,e.converter,_u(e._query,this._limit,this._limitType))}}function aR(t){return yg._create("limit",t,"F")}function m_(t,e,n){if(typeof(n=tt(n))=="string"){if(n==="")throw new W(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!m2(e)&&n.indexOf("/")!==-1)throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(pe.fromString(n));if(!q.isDocumentKey(r))throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ga(t,new q(r))}if(n instanceof Vt)return Ga(t,n._key);throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_d(n)}.`)}function p_(t,e){if(!Array.isArray(t)||t.length===0)throw new W(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LE(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class lR{convertValue(e,n="none"){switch(Os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw K()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Hs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>ke(o.doubleValue));return new og(i)}convertGeoPoint(e){return new ig(ke(e.latitude),ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=jp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ha(e));default:return null}}convertTimestamp(e){const n=Yn(e);return new De(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=pe.fromString(e);J($2(r));const s=new Ds(r.get(1),r.get(3)),i=new q(r.popFirst(5));return s.isEqual(n)||Be(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class FE extends ME{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Oc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(bd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Oc extends FE{data(e={}){return super.data(e)}}class uR{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ia(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Oc(this._firestore,this._userDataWriter,r.key,r,new ia(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Oc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ia(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Oc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ia(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:dR(a.type),doc:l,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function dR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}class UE extends lR{constructor(e){super(),this.firestore=e}convertBytes(e){return new eo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,n)}}function zE(t,e,n,...r){t=Wn(t,Vt);const s=Wn(t.firestore,Us),i=lg(s);let o;return o=typeof(e=tt(e))=="string"||e instanceof wd?tR(i,"updateDoc",t._key,e,n,r):eR(i,"updateDoc",t._key,e),vg(s,[o.toMutation(t._key,_t.exists(!0))])}function hR(t){return vg(Wn(t.firestore,Us),[new dd(t._key,_t.none())])}function fR(t,e){const n=Wn(t.firestore,Us),r=el(t),s=cR(t.converter,e);return vg(n,[ZP(lg(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,_t.exists(!1))]).then(()=>r)}function BE(t,...e){var n,r,s;t=tt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||f_(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(f_(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let l,d,h;if(t instanceof Vt)d=Wn(t.firestore,Us),h=ad(t._key.path),l={next:m=>{e[o]&&e[o](mR(d,t,m))},error:e[o+1],complete:e[o+2]};else{const m=Wn(t,rs);d=Wn(m.firestore,Us),h=m._query;const p=new UE(d);l={next:E=>{e[o]&&e[o](new uR(d,p,m,E))},error:e[o+1],complete:e[o+2]},iR(t._query)}return function(p,E,N,S){const A=new zP(S),w=new yP(E,A,N);return p.asyncQueue.enqueueAndForget(async()=>fP(await a_(p),w)),()=>{A.Za(),p.asyncQueue.enqueueAndForget(async()=>mP(await a_(p),w))}}(CE(d),h,a,l)}function vg(t,e){return function(r,s){const i=new Mr;return r.asyncQueue.enqueueAndForget(async()=>SP(await WP(r),s,i)),i.promise}(CE(t),e)}function mR(t,e,n){const r=n.docs.get(e._key),s=new UE(t);return new FE(t,s,e._key,r,new ia(n.hasPendingWrites,n.fromCache),e.converter)}function xm(){return new cg("serverTimestamp")}(function(e,n=!0){(function(s){co=s})(lo),zi(new Rs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Us(new K4(r.getProvider("auth-internal")),new J4(r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new W(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ds(d.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Vr(ov,"4.7.3",e),Vr(ov,"4.7.3","esm2017")})();function _g(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function $E(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pR=$E,WE=new hl("auth","Firebase",$E());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au=new Tp("@firebase/auth");function gR(t,...e){Au.logLevel<=ce.WARN&&Au.warn(`Auth (${lo}): ${t}`,...e)}function Vc(t,...e){Au.logLevel<=ce.ERROR&&Au.error(`Auth (${lo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(t,...e){throw xg(t,...e)}function En(t,...e){return xg(t,...e)}function qE(t,e,n){const r=Object.assign(Object.assign({},pR()),{[e]:n});return new hl("auth","Firebase",r).create(e,{appName:t.name})}function Ur(t){return qE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return WE.create(t,...e)}function te(t,e,...n){if(!t)throw xg(e,...n)}function Un(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vc(e),new Error(e)}function Jn(t,e){t||Un(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function yR(){return g_()==="http:"||g_()==="https:"}function g_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yR()||Tk()||"connection"in navigator)?navigator.onLine:!0}function _R(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jn(n>e,"Short delay should be less than long delay!"),this.isMobile=Ek()||Sk()}get(){return vR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(t,e){Jn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=new xl(3e4,6e4);function Gs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ss(t,e,n,r,s={}){return KE(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=fl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:l},i);return bk()||(d.referrerPolicy="no-referrer"),HE.fetch()(GE(t,t.config.apiHost,n,a),d)})}async function KE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},xR),e);try{const s=new IR(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw fc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,d]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw fc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw fc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw fc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw qE(t,h,d);fn(t,h)}}catch(s){if(s instanceof tr)throw s;fn(t,"network-request-failed",{message:String(s)})}}async function Nd(t,e,n,r,s={}){const i=await ss(t,e,n,r,s);return"mfaPendingCredential"in i&&fn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function GE(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?wg(t.config,s):`${t.config.apiScheme}://${s}`}function ER(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class IR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(En(this.auth,"network-request-failed")),wR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=En(t,e,r);return s.customData._tokenResponse=n,s}function y_(t){return t!==void 0&&t.enterprise!==void 0}class bR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ER(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function TR(t,e){return ss(t,"GET","/v2/recaptchaConfig",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SR(t,e){return ss(t,"POST","/v1/accounts:delete",e)}async function QE(t,e){return ss(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NR(t,e=!1){const n=tt(t),r=await n.getIdToken(e),s=Eg(r);te(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:wa(Wh(s.auth_time)),issuedAtTime:wa(Wh(s.iat)),expirationTime:wa(Wh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Wh(t){return Number(t)*1e3}function Eg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Vc("JWT malformed, contained fewer than 3 sections"),null;try{const s=bw(n);return s?JSON.parse(s):(Vc("Failed to decode base64 JWT payload"),null)}catch(s){return Vc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function v_(t){const e=Eg(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof tr&&kR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function kR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wa(this.lastLoginAt),this.creationTime=wa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await tl(t,QE(n,{idToken:r}));te(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?YE(i.providerUserInfo):[],a=PR(t.providerData,o),l=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=l?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Em(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,m)}async function AR(t){const e=tt(t);await Pu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PR(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function YE(t){return t.map(e=>{var{providerId:n}=e,r=_g(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RR(t,e){const n=await KE(t,{},async()=>{const r=fl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=GE(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",HE.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function jR(t,e){return ss(t,"POST","/v2/accounts:revokeToken",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):v_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=v_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await RR(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ai;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(te(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(te(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ai,this.toJSON())}_performRefresh(){return Un("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=_g(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new CR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Em(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await tl(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return NR(this,e)}reload(){return AR(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Pu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ln(this.auth.app))return Promise.reject(Ur(this.auth));const e=await this.getIdToken();return await tl(this,SR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,d,h;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,E=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,N=(o=n.photoURL)!==null&&o!==void 0?o:void 0,S=(a=n.tenantId)!==null&&a!==void 0?a:void 0,A=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(d=n.createdAt)!==null&&d!==void 0?d:void 0,v=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:y,emailVerified:T,isAnonymous:j,providerData:O,stsTokenManager:I}=n;te(y&&I,e,"internal-error");const _=Ai.fromJSON(this.name,I);te(typeof y=="string",e,"internal-error"),ur(m,e.name),ur(p,e.name),te(typeof T=="boolean",e,"internal-error"),te(typeof j=="boolean",e,"internal-error"),ur(E,e.name),ur(N,e.name),ur(S,e.name),ur(A,e.name),ur(w,e.name),ur(v,e.name);const x=new zn({uid:y,auth:e,email:p,emailVerified:T,displayName:m,isAnonymous:j,photoURL:N,phoneNumber:E,tenantId:S,stsTokenManager:_,createdAt:w,lastLoginAt:v});return O&&Array.isArray(O)&&(x.providerData=O.map(C=>Object.assign({},C))),A&&(x._redirectEventId=A),x}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ai;s.updateFromServerResponse(n);const i=new zn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Pu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];te(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?YE(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Ai;a.updateFromIdToken(r);const l=new zn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Em(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,d),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __=new Map;function Bn(t){Jn(t instanceof Function,"Expected a class definition");let e=__.get(t);return e?(Jn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,__.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}JE.type="NONE";const x_=JE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(t,e,n){return`firebase:${t}:${e}:${n}`}class Pi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Mc(this.userKey,s.apiKey,i),this.fullPersistenceKey=Mc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Pi(Bn(x_),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Bn(x_);const o=Mc(r,e.config.apiKey,e.name);let a=null;for(const d of n)try{const h=await d._get(o);if(h){const m=zn._fromJSON(e,h);d!==i&&(a=m),i=d;break}}catch{}const l=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Pi(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Pi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rI(e))return"Blackberry";if(sI(e))return"Webos";if(ZE(e))return"Safari";if((e.includes("chrome/")||eI(e))&&!e.includes("edge/"))return"Chrome";if(nI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function XE(t=Qe()){return/firefox\//i.test(t)}function ZE(t=Qe()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eI(t=Qe()){return/crios\//i.test(t)}function tI(t=Qe()){return/iemobile/i.test(t)}function nI(t=Qe()){return/android/i.test(t)}function rI(t=Qe()){return/blackberry/i.test(t)}function sI(t=Qe()){return/webos/i.test(t)}function Ig(t=Qe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function DR(t=Qe()){var e;return Ig(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function OR(){return Nk()&&document.documentMode===10}function iI(t=Qe()){return Ig(t)||nI(t)||sI(t)||rI(t)||/windows phone/i.test(t)||tI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(t,e=[]){let n;switch(t){case"Browser":n=w_(Qe());break;case"Worker":n=`${w_(Qe())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${lo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(t,e={}){return ss(t,"GET","/v2/passwordPolicy",Gs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=6;class FR{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:LR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new E_(this),this.idTokenSubscription=new E_(this),this.beforeStateQueue=new VR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Bn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Pi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await QE(this,{idToken:e}),r=await zn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ln(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Pu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_R()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ln(this.app))return Promise.reject(Ur(this));const n=e?tt(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ln(this.app)?Promise.reject(Ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ln(this.app)?Promise.reject(Ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MR(this),n=new FR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new hl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await jR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Bn(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await Pi.create(this,[Bn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&gR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function po(t){return tt(t)}class E_{constructor(e){this.auth=e,this.observer=null,this.addObserver=jk(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zR(t){kd=t}function aI(t){return kd.loadJS(t)}function BR(){return kd.recaptchaEnterpriseScript}function $R(){return kd.gapiScript}function WR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const qR="recaptcha-enterprise",HR="NO_RECAPTCHA";class KR{constructor(e){this.type=qR,this.auth=po(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{TR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const d=new bR(l);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;y_(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(HR)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&y_(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=BR();l.length!==0&&(l+=a),aI(l).then(()=>{s(a,i,o)}).catch(d=>{o(d)})}}).catch(a=>{o(a)})})}}async function I_(t,e,n,r=!1){const s=new KR(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function b_(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await I_(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await I_(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(t,e){const n=Np(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(mu(i,e??{}))return s;fn(s,"already-initialized")}return n.initialize({options:e})}function QR(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Bn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function YR(t,e,n){const r=po(t);te(r._canInitEmulator,r,"emulator-config-failed"),te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=lI(e),{host:o,port:a}=JR(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),XR()}function lI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function JR(t){const e=lI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:T_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:T_(o)}}}function T_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function XR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Un("not implemented")}_getIdTokenResponse(e){return Un("not implemented")}_linkToIdToken(e,n){return Un("not implemented")}_getReauthenticationResolver(e){return Un("not implemented")}}async function ZR(t,e){return ss(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e3(t,e){return Nd(t,"POST","/v1/accounts:signInWithPassword",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t3(t,e){return Nd(t,"POST","/v1/accounts:signInWithEmailLink",Gs(t,e))}async function n3(t,e){return Nd(t,"POST","/v1/accounts:signInWithEmailLink",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl extends bg{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new nl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new nl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return b_(e,n,"signInWithPassword",e3);case"emailLink":return t3(e,{email:this._email,oobCode:this._password});default:fn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return b_(e,r,"signUpPassword",ZR);case"emailLink":return n3(e,{idToken:n,email:this._email,oobCode:this._password});default:fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ri(t,e){return Nd(t,"POST","/v1/accounts:signInWithIdp",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3="http://localhost";class zs extends bg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new zs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=_g(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new zs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ri(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ri(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ri(e,n)}buildRequest(){const e={requestUri:r3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function i3(t){const e=Zo(ea(t)).link,n=e?Zo(ea(e)).deep_link_id:null,r=Zo(ea(t)).deep_link_id;return(r?Zo(ea(r)).link:null)||r||n||e||t}class Tg{constructor(e){var n,r,s,i,o,a;const l=Zo(ea(e)),d=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,m=s3((s=l.mode)!==null&&s!==void 0?s:null);te(d&&h&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=h,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=i3(e);try{return new Tg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this.providerId=go.PROVIDER_ID}static credential(e,n){return nl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Tg.parseLink(n);return te(r,"argument-error"),nl._fromEmailAndCode(e,r.code,r.tenantId)}}go.PROVIDER_ID="password";go.EMAIL_PASSWORD_SIGN_IN_METHOD="password";go.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl extends cI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends wl{constructor(){super("facebook.com")}static credential(e){return zs._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.FACEBOOK_SIGN_IN_METHOD="facebook.com";yr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends wl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return zs._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return vr.credential(n,r)}catch{return null}}}vr.GOOGLE_SIGN_IN_METHOD="google.com";vr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends wl{constructor(){super("github.com")}static credential(e){return zs._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _r.credential(e.oauthAccessToken)}catch{return null}}}_r.GITHUB_SIGN_IN_METHOD="github.com";_r.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends wl{constructor(){super("twitter.com")}static credential(e,n){return zs._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return xr.credential(n,r)}catch{return null}}}xr.TWITTER_SIGN_IN_METHOD="twitter.com";xr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await zn._fromIdTokenResponse(e,r,s),o=S_(r);return new to({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=S_(r);return new to({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function S_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends tr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ru.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ru(e,n,r,s)}}function uI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ru._fromErrorAndOperation(t,i,e,r):i})}async function o3(t,e,n=!1){const r=await tl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return to._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a3(t,e,n=!1){const{auth:r}=t;if(Ln(r.app))return Promise.reject(Ur(r));const s="reauthenticate";try{const i=await tl(t,uI(r,s,e,t),n);te(i.idToken,r,"internal-error");const o=Eg(i.idToken);te(o,r,"internal-error");const{sub:a}=o;return te(t.uid===a,r,"user-mismatch"),to._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&fn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dI(t,e,n=!1){if(Ln(t.app))return Promise.reject(Ur(t));const r="signIn",s=await uI(t,r,e),i=await to._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function l3(t,e){return dI(po(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c3(t){const e=po(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function u3(t,e,n){return Ln(t.app)?Promise.reject(Ur(t)):l3(tt(t),go.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&c3(t),r})}function d3(t,e,n,r){return tt(t).onIdTokenChanged(e,n,r)}function h3(t,e,n){return tt(t).beforeAuthStateChanged(e,n)}function f3(t,e,n,r){return tt(t).onAuthStateChanged(e,n,r)}const ju="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ju,"1"),this.storage.removeItem(ju),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3=1e3,p3=10;class fI extends hI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);OR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,p3):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},m3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}fI.type="LOCAL";const g3=fI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI extends hI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mI.type="SESSION";const pI=mI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Cd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async d=>d(n.origin,i)),l=await y3(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const d=Sg("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const p=m;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return window}function _3(t){In().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(){return typeof In().WorkerGlobalScope<"u"&&typeof In().importScripts=="function"}async function x3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function w3(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function E3(){return gI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="firebaseLocalStorageDb",I3=1,Du="firebaseLocalStorage",vI="fbase_key";class El{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ad(t,e){return t.transaction([Du],e?"readwrite":"readonly").objectStore(Du)}function b3(){const t=indexedDB.deleteDatabase(yI);return new El(t).toPromise()}function Im(){const t=indexedDB.open(yI,I3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Du,{keyPath:vI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Du)?e(r):(r.close(),await b3(),e(await Im()))})})}async function N_(t,e,n){const r=Ad(t,!0).put({[vI]:e,value:n});return new El(r).toPromise()}async function T3(t,e){const n=Ad(t,!1).get(e),r=await new El(n).toPromise();return r===void 0?null:r.value}function k_(t,e){const n=Ad(t,!0).delete(e);return new El(n).toPromise()}const S3=800,N3=3;class _I{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Im(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>N3)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cd._getInstance(E3()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await x3(),!this.activeServiceWorker)return;this.sender=new v3(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||w3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Im();return await N_(e,ju,"1"),await k_(e,ju),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>N_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>T3(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>k_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ad(s,!1).getAll();return new El(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),S3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_I.type="LOCAL";const k3=_I;new xl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3(t,e){return e?Bn(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng extends bg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ri(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ri(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ri(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function A3(t){return dI(t.auth,new Ng(t),t.bypassAuthState)}function P3(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),a3(n,new Ng(t),t.bypassAuthState)}async function R3(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),o3(n,new Ng(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return A3;case"linkViaPopup":case"linkViaRedirect":return R3;case"reauthViaPopup":case"reauthViaRedirect":return P3;default:fn(this.auth,"internal-error")}}resolve(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3=new xl(2e3,1e4);class Ei extends xI{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ei.currentPopupAction&&Ei.currentPopupAction.cancel(),Ei.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){Jn(this.filter.length===1,"Popup operations only handle one event");const e=Sg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(En(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(En(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ei.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(En(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,j3.get())};e()}}Ei.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3="pendingRedirect",Lc=new Map;class O3 extends xI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Lc.get(this.auth._key());if(!e){try{const r=await V3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Lc.set(this.auth._key(),e)}return this.bypassAuthState||Lc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function V3(t,e){const n=F3(e),r=L3(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function M3(t,e){Lc.set(t._key(),e)}function L3(t){return Bn(t._redirectPersistence)}function F3(t){return Mc(D3,t.config.apiKey,t.name)}async function U3(t,e,n=!1){if(Ln(t.app))return Promise.reject(Ur(t));const r=po(t),s=C3(r,e),o=await new O3(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3=10*60*1e3;class B3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!wI(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(En(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=z3&&this.cachedEventUids.clear(),this.cachedEventUids.has(C_(e))}saveEventToCache(e){this.cachedEventUids.add(C_(e)),this.lastProcessedEventTime=Date.now()}}function C_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function wI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W3(t,e={}){return ss(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,H3=/^https?/;async function K3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await W3(t);for(const n of e)try{if(G3(n))return}catch{}fn(t,"unauthorized-domain")}function G3(t){const e=wm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!H3.test(n))return!1;if(q3.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3=new xl(3e4,6e4);function A_(){const t=In().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Y3(t){return new Promise((e,n)=>{var r,s,i;function o(){A_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{A_(),n(En(t,"network-request-failed"))},timeout:Q3.get()})}if(!((s=(r=In().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=In().gapi)===null||i===void 0)&&i.load)o();else{const a=WR("iframefcb");return In()[a]=()=>{gapi.load?o():n(En(t,"network-request-failed"))},aI(`${$R()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Fc=null,e})}let Fc=null;function J3(t){return Fc=Fc||Y3(t),Fc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3=new xl(5e3,15e3),Z3="__/auth/iframe",e6="emulator/auth/iframe",t6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},n6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function r6(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?wg(e,e6):`https://${t.config.authDomain}/${Z3}`,r={apiKey:e.apiKey,appName:t.name,v:lo},s=n6.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${fl(r).slice(1)}`}async function s6(t){const e=await J3(t),n=In().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:r6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:t6,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=En(t,"network-request-failed"),a=In().setTimeout(()=>{i(o)},X3.get());function l(){In().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},o6=500,a6=600,l6="_blank",c6="http://localhost";class P_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function u6(t,e,n,r=o6,s=a6){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},i6),{width:r.toString(),height:s.toString(),top:i,left:o}),d=Qe().toLowerCase();n&&(a=eI(d)?l6:n),XE(d)&&(e=e||c6,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[E,N])=>`${p}${E}=${N},`,"");if(DR(d)&&a!=="_self")return d6(e||"",a),new P_(null);const m=window.open(e||"",a,h);te(m,t,"popup-blocked");try{m.focus()}catch{}return new P_(m)}function d6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6="__/auth/handler",f6="emulator/auth/handler",m6=encodeURIComponent("fac");async function R_(t,e,n,r,s,i){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:lo,eventId:s};if(e instanceof cI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Rk(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))o[h]=m}if(e instanceof wl){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),d=l?`#${m6}=${encodeURIComponent(l)}`:"";return`${p6(t)}?${fl(a).slice(1)}${d}`}function p6({config:t}){return t.emulator?wg(t,f6):`https://${t.authDomain}/${h6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="webStorageSupport";class g6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pI,this._completeRedirectFn=U3,this._overrideRedirectResult=M3}async _openPopup(e,n,r,s){var i;Jn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await R_(e,n,r,wm(),s);return u6(e,o,Sg())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await R_(e,n,r,wm(),s);return _3(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Jn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await s6(e),r=new B3(e);return n.register("authEvent",s=>(te(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qh,{type:qh},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[qh];o!==void 0&&n(!!o),fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=K3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return iI()||ZE()||Ig()}}const y6=g6;var j_="@firebase/auth",D_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function x6(t){zi(new Rs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oI(t)},d=new UR(r,s,i,l);return QR(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),zi(new Rs("auth-internal",e=>{const n=po(e.getProvider("auth").getImmediate());return(r=>new v6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vr(j_,D_,_6(t)),Vr(j_,D_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6=5*60,E6=Nw("authIdTokenMaxAge")||w6;let O_=null;const I6=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>E6)return;const s=n==null?void 0:n.token;O_!==s&&(O_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function b6(t=jw()){const e=Np(t,"auth");if(e.isInitialized())return e.getImmediate();const n=GR(t,{popupRedirectResolver:y6,persistence:[k3,g3,pI]}),r=Nw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=I6(i.toString());h3(n,o,()=>o(n.currentUser)),d3(n,a=>o(a))}}const s=Tw("auth");return s&&YR(n,`http://${s}`),n}function T6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}zR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=En("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",T6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});x6("Browser");const S6={apiKey:"AIzaSyBafBv2UojhGRQjeiZoG4ES7O19jZ6OZvU",authDomain:"mathmate-ahc-app.firebaseapp.com",projectId:"mathmate-ahc-app",storageBucket:"mathmate-ahc-app.firebasestorage.app",messagingSenderId:"324907269101",appId:"1:324907269101:web:5ec3feb735f86320ad05e4"},EI=Rw(S6),kg=b6(EI),Ut=KP(EI),N6=async()=>{try{return await QP(Ut),console.log(" Firestore multi-tab persistence enabled"),!0}catch(t){t.code==="failed-precondition"?console.warn(" Multi-tab persistence failed: Multiple tabs open, trying single-tab mode"):t.code==="unimplemented"?console.warn(" Multi-tab persistence not supported, trying single-tab mode"):console.warn(" Multi-tab persistence failed, trying single-tab mode:",t.message);try{return await GP(Ut,{forceOwnership:!1}),console.log(" Firestore single-tab persistence enabled"),!0}catch(e){return e.code==="failed-precondition"?console.warn(" Persistence failed: Multiple tabs open"):e.code==="unimplemented"?console.warn(" Persistence not supported in this browser"):console.error(" Failed to enable persistence:",e),!1}}};N6();function II(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=II(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ss(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=II(t))&&(r&&(r+=" "),r+=e);return r}function k6(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}k6(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Il=t=>typeof t=="number"&&!isNaN(t),Bs=t=>typeof t=="string",Xn=t=>typeof t=="function",C6=t=>Bs(t)||Il(t),bm=t=>Bs(t)||Xn(t)?t:null,A6=(t,e)=>t===!1||Il(t)&&t>0?t:e,Tm=t=>k.isValidElement(t)||Bs(t)||Xn(t)||Il(t);function P6(t,e,n=300){let{scrollHeight:r,style:s}=t;requestAnimationFrame(()=>{s.minHeight="initial",s.height=r+"px",s.transition=`all ${n}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(e,n)})})}function R6({enter:t,exit:e,appendPosition:n=!1,collapse:r=!0,collapseDuration:s=300}){return function({children:i,position:o,preventExitTransition:a,done:l,nodeRef:d,isIn:h,playToast:m}){let p=n?`${t}--${o}`:t,E=n?`${e}--${o}`:e,N=k.useRef(0);return k.useLayoutEffect(()=>{let S=d.current,A=p.split(" "),w=v=>{v.target===d.current&&(m(),S.removeEventListener("animationend",w),S.removeEventListener("animationcancel",w),N.current===0&&v.type!=="animationcancel"&&S.classList.remove(...A))};S.classList.add(...A),S.addEventListener("animationend",w),S.addEventListener("animationcancel",w)},[]),k.useEffect(()=>{let S=d.current,A=()=>{S.removeEventListener("animationend",A),r?P6(S,l,s):l()};h||(a?A():(N.current=1,S.className+=` ${E}`,S.addEventListener("animationend",A)))},[h]),X.createElement(X.Fragment,null,i)}}function V_(t,e){return{content:bI(t.content,t.props),containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,reason:t.removalReason,status:e}}function bI(t,e,n=!1){return k.isValidElement(t)&&!Bs(t.type)?k.cloneElement(t,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):Xn(t)?t({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):t}function j6({closeToast:t,theme:e,ariaLabel:n="close"}){return X.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:r=>{r.stopPropagation(),t(!0)},"aria-label":n},X.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},X.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function D6({delay:t,isRunning:e,closeToast:n,type:r="default",hide:s,className:i,controlledProgress:o,progress:a,rtl:l,isIn:d,theme:h}){let m=s||o&&a===0,p={animationDuration:`${t}ms`,animationPlayState:e?"running":"paused"};o&&(p.transform=`scaleX(${a})`);let E=Ss("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${h}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":l}),N=Xn(i)?i({rtl:l,type:r,defaultClassName:E}):Ss(E,i),S={[o&&a>=1?"onTransitionEnd":"onAnimationEnd"]:o&&a<1?null:()=>{d&&n()}};return X.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":m},X.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${h} Toastify__progress-bar--${r}`}),X.createElement("div",{role:"progressbar","aria-hidden":m?"true":"false","aria-label":"notification timer",className:N,style:p,...S}))}var O6=1,TI=()=>`${O6++}`;function V6(t,e,n){let r=1,s=0,i=[],o=[],a=e,l=new Map,d=new Set,h=v=>(d.add(v),()=>d.delete(v)),m=()=>{o=Array.from(l.values()),d.forEach(v=>v())},p=({containerId:v,toastId:y,updateId:T})=>{let j=v?v!==t:t!==1,O=l.has(y)&&T==null;return j||O},E=(v,y)=>{l.forEach(T=>{var j;(y==null||y===T.props.toastId)&&((j=T.toggle)==null||j.call(T,v))})},N=v=>{var y,T;(T=(y=v.props)==null?void 0:y.onClose)==null||T.call(y,v.removalReason),v.isActive=!1},S=v=>{if(v==null)l.forEach(N);else{let y=l.get(v);y&&N(y)}m()},A=()=>{s-=i.length,i=[]},w=v=>{var y,T;let{toastId:j,updateId:O}=v.props,I=O==null;v.staleId&&l.delete(v.staleId),v.isActive=!0,l.set(j,v),m(),n(V_(v,I?"added":"updated")),I&&((T=(y=v.props).onOpen)==null||T.call(y))};return{id:t,props:a,observe:h,toggle:E,removeToast:S,toasts:l,clearQueue:A,buildToast:(v,y)=>{if(p(y))return;let{toastId:T,updateId:j,data:O,staleId:I,delay:_}=y,x=j==null;x&&s++;let C={...a,style:a.toastStyle,key:r++,...Object.fromEntries(Object.entries(y).filter(([D,R])=>R!=null)),toastId:T,updateId:j,data:O,isIn:!1,className:bm(y.className||a.toastClassName),progressClassName:bm(y.progressClassName||a.progressClassName),autoClose:y.isLoading?!1:A6(y.autoClose,a.autoClose),closeToast(D){l.get(T).removalReason=D,S(T)},deleteToast(){let D=l.get(T);if(D!=null){if(n(V_(D,"removed")),l.delete(T),s--,s<0&&(s=0),i.length>0){w(i.shift());return}m()}}};C.closeButton=a.closeButton,y.closeButton===!1||Tm(y.closeButton)?C.closeButton=y.closeButton:y.closeButton===!0&&(C.closeButton=Tm(a.closeButton)?a.closeButton:!0);let P={content:v,props:C,staleId:I};a.limit&&a.limit>0&&s>a.limit&&x?i.push(P):Il(_)?setTimeout(()=>{w(P)},_):w(P)},setProps(v){a=v},setToggle:(v,y)=>{let T=l.get(v);T&&(T.toggle=y)},isToastActive:v=>{var y;return(y=l.get(v))==null?void 0:y.isActive},getSnapshot:()=>o}}var xt=new Map,rl=[],Sm=new Set,M6=t=>Sm.forEach(e=>e(t)),SI=()=>xt.size>0;function L6(){rl.forEach(t=>kI(t.content,t.options)),rl=[]}var F6=(t,{containerId:e})=>{var n;return(n=xt.get(e||1))==null?void 0:n.toasts.get(t)};function NI(t,e){var n;if(e)return!!((n=xt.get(e))!=null&&n.isToastActive(t));let r=!1;return xt.forEach(s=>{s.isToastActive(t)&&(r=!0)}),r}function U6(t){if(!SI()){rl=rl.filter(e=>t!=null&&e.options.toastId!==t);return}if(t==null||C6(t))xt.forEach(e=>{e.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let e=xt.get(t.containerId);e?e.removeToast(t.id):xt.forEach(n=>{n.removeToast(t.id)})}}var z6=(t={})=>{xt.forEach(e=>{e.props.limit&&(!t.containerId||e.id===t.containerId)&&e.clearQueue()})};function kI(t,e){Tm(t)&&(SI()||rl.push({content:t,options:e}),xt.forEach(n=>{n.buildToast(t,e)}))}function B6(t){var e;(e=xt.get(t.containerId||1))==null||e.setToggle(t.id,t.fn)}function CI(t,e){xt.forEach(n=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===n.id)&&n.toggle(t,e==null?void 0:e.id)})}function $6(t){let e=t.containerId||1;return{subscribe(n){let r=V6(e,t,M6);xt.set(e,r);let s=r.observe(n);return L6(),()=>{s(),xt.delete(e)}},setProps(n){var r;(r=xt.get(e))==null||r.setProps(n)},getSnapshot(){var n;return(n=xt.get(e))==null?void 0:n.getSnapshot()}}}function W6(t){return Sm.add(t),()=>{Sm.delete(t)}}function q6(t){return t&&(Bs(t.toastId)||Il(t.toastId))?t.toastId:TI()}function bl(t,e){return kI(t,e),e.toastId}function Pd(t,e){return{...e,type:e&&e.type||t,toastId:q6(e)}}function Rd(t){return(e,n)=>bl(e,Pd(t,n))}function re(t,e){return bl(t,Pd("default",e))}re.loading=(t,e)=>bl(t,Pd("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function H6(t,{pending:e,error:n,success:r},s){let i;e&&(i=Bs(e)?re.loading(e,s):re.loading(e.render,{...s,...e}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},a=(d,h,m)=>{if(h==null){re.dismiss(i);return}let p={type:d,...o,...s,data:m},E=Bs(h)?{render:h}:h;return i?re.update(i,{...p,...E}):re(E.render,{...p,...E}),m},l=Xn(t)?t():t;return l.then(d=>a("success",r,d)).catch(d=>a("error",n,d)),l}re.promise=H6;re.success=Rd("success");re.info=Rd("info");re.error=Rd("error");re.warning=Rd("warning");re.warn=re.warning;re.dark=(t,e)=>bl(t,Pd("default",{theme:"dark",...e}));function K6(t){U6(t)}re.dismiss=K6;re.clearWaitingQueue=z6;re.isActive=NI;re.update=(t,e={})=>{let n=F6(t,e);if(n){let{props:r,content:s}=n,i={delay:100,...r,...e,toastId:e.toastId||t,updateId:TI()};i.toastId!==t&&(i.staleId=t);let o=i.render||s;delete i.render,bl(o,i)}};re.done=t=>{re.update(t,{progress:1})};re.onChange=W6;re.play=t=>CI(!0,t);re.pause=t=>CI(!1,t);function G6(t){var e;let{subscribe:n,getSnapshot:r,setProps:s}=k.useRef($6(t)).current;s(t);let i=(e=k.useSyncExternalStore(n,r,r))==null?void 0:e.slice();function o(a){if(!i)return[];let l=new Map;return t.newestOnTop&&i.reverse(),i.forEach(d=>{let{position:h}=d.props;l.has(h)||l.set(h,[]),l.get(h).push(d)}),Array.from(l,d=>a(d[0],d[1]))}return{getToastToRender:o,isToastActive:NI,count:i==null?void 0:i.length}}function Q6(t){let[e,n]=k.useState(!1),[r,s]=k.useState(!1),i=k.useRef(null),o=k.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:l,closeToast:d,onClick:h,closeOnClick:m}=t;B6({id:t.toastId,containerId:t.containerId,fn:n}),k.useEffect(()=>{if(t.pauseOnFocusLoss)return p(),()=>{E()}},[t.pauseOnFocusLoss]);function p(){document.hasFocus()||w(),window.addEventListener("focus",A),window.addEventListener("blur",w)}function E(){window.removeEventListener("focus",A),window.removeEventListener("blur",w)}function N(I){if(t.draggable===!0||t.draggable===I.pointerType){v();let _=i.current;o.canCloseOnClick=!0,o.canDrag=!0,_.style.transition="none",t.draggableDirection==="x"?(o.start=I.clientX,o.removalDistance=_.offsetWidth*(t.draggablePercent/100)):(o.start=I.clientY,o.removalDistance=_.offsetHeight*(t.draggablePercent===80?t.draggablePercent*1.5:t.draggablePercent)/100)}}function S(I){let{top:_,bottom:x,left:C,right:P}=i.current.getBoundingClientRect();I.nativeEvent.type!=="touchend"&&t.pauseOnHover&&I.clientX>=C&&I.clientX<=P&&I.clientY>=_&&I.clientY<=x?w():A()}function A(){n(!0)}function w(){n(!1)}function v(){o.didMove=!1,document.addEventListener("pointermove",T),document.addEventListener("pointerup",j)}function y(){document.removeEventListener("pointermove",T),document.removeEventListener("pointerup",j)}function T(I){let _=i.current;if(o.canDrag&&_){o.didMove=!0,e&&w(),t.draggableDirection==="x"?o.delta=I.clientX-o.start:o.delta=I.clientY-o.start,o.start!==I.clientX&&(o.canCloseOnClick=!1);let x=t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;_.style.transform=`translate3d(${x},0)`,_.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function j(){y();let I=i.current;if(o.canDrag&&o.didMove&&I){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){s(!0),t.closeToast(!0),t.collapseAll();return}I.style.transition="transform 0.2s, opacity 0.2s",I.style.removeProperty("transform"),I.style.removeProperty("opacity")}}let O={onPointerDown:N,onPointerUp:S};return a&&l&&(O.onMouseEnter=w,t.stacked||(O.onMouseLeave=A)),m&&(O.onClick=I=>{h&&h(I),o.canCloseOnClick&&d(!0)}),{playToast:A,pauseToast:w,isRunning:e,preventExitTransition:r,toastRef:i,eventHandlers:O}}var Y6=typeof window<"u"?k.useLayoutEffect:k.useEffect,jd=({theme:t,type:e,isLoading:n,...r})=>X.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...r});function J6(t){return X.createElement(jd,{...t},X.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function X6(t){return X.createElement(jd,{...t},X.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function Z6(t){return X.createElement(jd,{...t},X.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function ej(t){return X.createElement(jd,{...t},X.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function tj(){return X.createElement("div",{className:"Toastify__spinner"})}var Nm={info:X6,warning:J6,success:Z6,error:ej,spinner:tj},nj=t=>t in Nm;function rj({theme:t,type:e,isLoading:n,icon:r}){let s=null,i={theme:t,type:e};return r===!1||(Xn(r)?s=r({...i,isLoading:n}):k.isValidElement(r)?s=k.cloneElement(r,i):n?s=Nm.spinner():nj(e)&&(s=Nm[e](i))),s}var sj=t=>{let{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:s,playToast:i}=Q6(t),{closeButton:o,children:a,autoClose:l,onClick:d,type:h,hideProgressBar:m,closeToast:p,transition:E,position:N,className:S,style:A,progressClassName:w,updateId:v,role:y,progress:T,rtl:j,toastId:O,deleteToast:I,isIn:_,isLoading:x,closeOnClick:C,theme:P,ariaLabel:D}=t,R=Ss("Toastify__toast",`Toastify__toast-theme--${P}`,`Toastify__toast--${h}`,{"Toastify__toast--rtl":j},{"Toastify__toast--close-on-click":C}),Y=Xn(S)?S({rtl:j,position:N,type:h,defaultClassName:R}):Ss(R,S),ie=rj(t),xe=!!T||!l,oe={closeToast:p,type:h,theme:P},U=null;return o===!1||(Xn(o)?U=o(oe):k.isValidElement(o)?U=k.cloneElement(o,oe):U=j6(oe)),X.createElement(E,{isIn:_,done:I,position:N,preventExitTransition:n,nodeRef:r,playToast:i},X.createElement("div",{id:O,tabIndex:0,onClick:d,"data-in":_,className:Y,...s,style:A,ref:r,..._&&{role:y,"aria-label":D}},ie!=null&&X.createElement("div",{className:Ss("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!x})},ie),bI(a,t,!e),U,!t.customProgressBar&&X.createElement(D6,{...v&&!xe?{key:`p-${v}`}:{},rtl:j,theme:P,delay:l,isRunning:e,isIn:_,closeToast:p,hide:m,type:h,className:w,controlledProgress:xe,progress:T||0})))},ij=(t,e=!1)=>({enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}),oj=R6(ij("bounce",!0)),aj={position:"top-right",transition:oj,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:t=>t.altKey&&t.code==="KeyT"};function AI(t){let e={...aj,...t},n=t.stacked,[r,s]=k.useState(!0),i=k.useRef(null),{getToastToRender:o,isToastActive:a,count:l}=G6(e),{className:d,style:h,rtl:m,containerId:p,hotKeys:E}=e;function N(A){let w=Ss("Toastify__toast-container",`Toastify__toast-container--${A}`,{"Toastify__toast-container--rtl":m});return Xn(d)?d({position:A,rtl:m,defaultClassName:w}):Ss(w,bm(d))}function S(){n&&(s(!0),re.play())}return Y6(()=>{var A;if(n){let w=i.current.querySelectorAll('[data-in="true"]'),v=12,y=(A=e.position)==null?void 0:A.includes("top"),T=0,j=0;Array.from(w).reverse().forEach((O,I)=>{let _=O;_.classList.add("Toastify__toast--stacked"),I>0&&(_.dataset.collapsed=`${r}`),_.dataset.pos||(_.dataset.pos=y?"top":"bot");let x=T*(r?.2:1)+(r?0:v*I);_.style.setProperty("--y",`${y?x:x*-1}px`),_.style.setProperty("--g",`${v}`),_.style.setProperty("--s",`${1-(r?j:0)}`),T+=_.offsetHeight,j+=.025})}},[r,l,n]),k.useEffect(()=>{function A(w){var v;let y=i.current;E(w)&&((v=y.querySelector('[tabIndex="0"]'))==null||v.focus(),s(!1),re.pause()),w.key==="Escape"&&(document.activeElement===y||y!=null&&y.contains(document.activeElement))&&(s(!0),re.play())}return document.addEventListener("keydown",A),()=>{document.removeEventListener("keydown",A)}},[E]),X.createElement("section",{ref:i,className:"Toastify",id:p,onMouseEnter:()=>{n&&(s(!1),re.pause())},onMouseLeave:S,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},o((A,w)=>{let v=w.length?{...h}:{...h,pointerEvents:"none"};return X.createElement("div",{tabIndex:-1,className:N(A),"data-stacked":n,style:v,key:`c-${A}`},w.map(({content:y,props:T})=>X.createElement(sj,{...T,stacked:n,collapseAll:S,isIn:a(T.toastId,T.containerId),key:`t-${T.key}`},y)))}))}const mn=t=>{const[e,n]=k.useState(null),[r,s]=k.useState(!0),[i,o]=k.useState(null),[a,l]=k.useState(!1),[d,h]=k.useState(!1),{isOnline:m}=sb(),p=k.useRef(null),E=k.useMemo(()=>{if(!t)return null;if(typeof t=="object")try{const v=t._query.path.segments.join("/"),y=JSON.stringify(t._query.constraints);return`${v}_${y}`}catch{return JSON.stringify(t)}return Array.isArray(t)?t.join("/"):t},[t]);k.useEffect(()=>{if(!t){n([]),s(!1);return}p.current&&p.current(),s(!0);let v;try{if(typeof t=="string")v=On(Ut,t);else if(Array.isArray(t)){const T=t.filter(Boolean);if(T.length>0)v=On(Ut,...T);else{n([]),s(!1);return}}else v=t}catch(T){o(T),s(!1);return}const y=BE(v,{includeMetadataChanges:!0},T=>{const j=T.docs.map(O=>({id:O.id,...O.data(),_metadata:{fromCache:O.metadata.fromCache,hasPendingWrites:O.metadata.hasPendingWrites}}));n(j),l(T.metadata.fromCache),h(T.docs.some(O=>O.metadata.hasPendingWrites)),s(!1),o(null)},T=>{o(T),s(!1),re.error(`Failed to load data: ${T.message}`)});return p.current=y,()=>{p.current&&p.current()}},[E]);const N=k.useCallback(()=>{var v;return t?typeof t=="string"?On(Ut,t):Array.isArray(t)?On(Ut,...t.filter(Boolean)):t&&((v=t._query)!=null&&v.path)?On(Ut,t._query.path.segments.join("/")):null:null},[t]),S=k.useCallback(async v=>{const y=N();if(y)try{await fR(y,{...v,createdAt:xm()}),re.success("Item added successfully!")}catch(T){re.error(`Failed to add item: ${T.message}`)}},[N]),A=k.useCallback(async(v,y)=>{const T=N();if(T)try{const j=el(T,v);await zE(j,{...y,updatedAt:xm()}),re.success("Item updated successfully!")}catch(j){re.error(`Failed to update item: ${j.message}`)}},[N]),w=k.useCallback(async(v,y=!1)=>{const T=N();if(T&&!(!y&&!window.confirm("Are you sure you want to delete this item?")))try{const j=el(T,v);await hR(j),re.success("Item deleted successfully!")}catch(j){re.error(`Failed to delete item: ${j.message}`)}},[N]);return{data:e,loading:r,error:i,isOnline:m,fromCache:a,hasPendingWrites:d,addItem:S,deleteItem:w,updateItem:A}},Kt=t=>{const[e,n]=k.useState(null),[r,s]=k.useState(!0),[i,o]=k.useState(null),[a,l]=k.useState(!1),[d,h]=k.useState(!1),{isOnline:m}=sb(),p=Array.isArray(t)?t.join("/"):t;k.useEffect(()=>{if(!Array.isArray(t)){s(!1);return}if(!t.every(w=>w)){s(!1);return}let S;try{S=el(Ut,...t)}catch(w){o(w),s(!1);return}const A=BE(S,{includeMetadataChanges:!0},w=>{w.exists()?n({id:w.id,...w.data(),_metadata:{fromCache:w.metadata.fromCache,hasPendingWrites:w.metadata.hasPendingWrites}}):n(null),l(w.metadata.fromCache),h(w.metadata.hasPendingWrites),s(!1),o(null)},w=>{o(w),s(!1),re.error(`Failed to load document: ${w.message}`)});return()=>A()},[p]);const E=k.useCallback(async N=>{if(!(Array.isArray(t)&&t.every(A=>A)))return{success:!1,error:new Error("Path is not ready")};try{const A=el(Ut,...t);return await zE(A,{...N,updatedAt:xm()}),re.success("Document updated!"),{success:!0}}catch(A){return re.error(`Update failed: ${A.message}`),{success:!1,error:A}}},[p]);return{data:e,loading:r,error:i,isOnline:m,fromCache:a,hasPendingWrites:d,updateDocument:E}},Jt=({fromCache:t=!1,isOnline:e=!0,hasPendingWrites:n=!1})=>{if(!(!e||t||n))return null;let s="",i="";return e?t?(s=" From Cache",i="cache"):n&&(s=" Syncing...",i="syncing"):(s=" Offline",i="offline"),u.jsx("div",{className:"network-status-container",role:"status","aria-live":"polite",children:u.jsx("span",{className:`status-pill ${i}`,children:s})})},lj=X.createContext({}),PI=!0;function cj({baseColor:t,highlightColor:e,width:n,height:r,borderRadius:s,circle:i,direction:o,duration:a,enableAnimation:l=PI,customHighlightBackground:d}){const h={};return o==="rtl"&&(h["--animation-direction"]="reverse"),typeof a=="number"&&(h["--animation-duration"]=`${a}s`),l||(h["--pseudo-element-display"]="none"),(typeof n=="string"||typeof n=="number")&&(h.width=n),(typeof r=="string"||typeof r=="number")&&(h.height=r),(typeof s=="string"||typeof s=="number")&&(h.borderRadius=s),i&&(h.borderRadius="50%"),typeof t<"u"&&(h["--base-color"]=t),typeof e<"u"&&(h["--highlight-color"]=e),typeof d=="string"&&(h["--custom-highlight-background"]=d),h}function Re({count:t=1,wrapper:e,className:n,containerClassName:r,containerTestId:s,circle:i=!1,style:o,...a}){var l,d,h;const m=X.useContext(lj),p={...a};for(const[y,T]of Object.entries(a))typeof T>"u"&&delete p[y];const E={...m,...p,circle:i},N={...o,...cj(E)};let S="react-loading-skeleton";n&&(S+=` ${n}`);const A=(l=E.inline)!==null&&l!==void 0?l:!1,w=[],v=Math.ceil(t);for(let y=0;y<v;y++){let T=N;if(v>t&&y===v-1){const O=(d=T.width)!==null&&d!==void 0?d:"100%",I=t%1,_=typeof O=="number"?O*I:`calc(${O} * ${I})`;T={...T,width:_}}const j=X.createElement("span",{className:S,style:T,key:y},"");A?w.push(j):w.push(X.createElement(X.Fragment,{key:y},j,X.createElement("br",null)))}return X.createElement("span",{className:r,"data-testid":s,"aria-live":"polite","aria-busy":(h=E.enableAnimation)!==null&&h!==void 0?h:PI},e?w.map((y,T)=>X.createElement(e,{key:T},y)):w)}var RI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},M_=X.createContext&&X.createContext(RI),uj=["attr","size","title"];function dj(t,e){if(t==null)return{};var n=hj(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hj(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ou(){return Ou=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ou.apply(this,arguments)}function L_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Vu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L_(Object(n),!0).forEach(function(r){fj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fj(t,e,n){return e=mj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mj(t){var e=pj(t,"string");return typeof e=="symbol"?e:e+""}function pj(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jI(t){return t&&t.map((e,n)=>X.createElement(e.tag,Vu({key:n},e.attr),jI(e.child)))}function Q(t){return e=>X.createElement(gj,Ou({attr:Vu({},t.attr)},e),jI(t.child))}function gj(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=dj(t,uj),a=s||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),X.createElement("svg",Ou({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Vu(Vu({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&X.createElement("title",null,i),t.children)};return M_!==void 0?X.createElement(M_.Consumer,null,n=>e(n)):e(RI)}function yj(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 176v160m80-80H176"},child:[]}]})(t)}function vj(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 112v288m144-144H112"},child:[]}]})(t)}function Tn(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M244 400 100 256l144-144M120 256h292"},child:[]}]})(t)}function Cg(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 160c16-63.16 76.43-95.41 208-96a15.94 15.94 0 0 1 16 16v288a16 16 0 0 1-16 16c-128 0-177.45 25.81-208 64-30.37-38-80-64-208-64-9.88 0-16-8.05-16-17.93V80a15.94 15.94 0 0 1 16-16c131.57.59 192 32.84 208 96zm0 0v288"},child:[]}]})(t)}function sl(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"rect",attr:{width:"416",height:"384",x:"48",y:"80",fill:"none",strokeLinejoin:"round",strokeWidth:"32",rx:"48"},child:[]},{tag:"circle",attr:{cx:"296",cy:"232",r:"24"},child:[]},{tag:"circle",attr:{cx:"376",cy:"232",r:"24"},child:[]},{tag:"circle",attr:{cx:"296",cy:"312",r:"24"},child:[]},{tag:"circle",attr:{cx:"376",cy:"312",r:"24"},child:[]},{tag:"circle",attr:{cx:"136",cy:"312",r:"24"},child:[]},{tag:"circle",attr:{cx:"216",cy:"312",r:"24"},child:[]},{tag:"circle",attr:{cx:"136",cy:"392",r:"24"},child:[]},{tag:"circle",attr:{cx:"216",cy:"392",r:"24"},child:[]},{tag:"circle",attr:{cx:"296",cy:"392",r:"24"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M128 48v32m256-32v32"},child:[]},{tag:"path",attr:{fill:"none",strokeLinejoin:"round",strokeWidth:"32",d:"M464 160H48"},child:[]}]})(t)}function DI(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M352 176 217.6 336 160 272"},child:[]}]})(t)}function _j(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm108.25 138.29-134.4 160a16 16 0 0 1-12 5.71h-.27a16 16 0 0 1-11.89-5.3l-57.6-64a16 16 0 1 1 23.78-21.4l45.29 50.32 122.59-145.91a16 16 0 0 1 24.5 20.58z"},child:[]}]})(t)}function OI(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"m112 184 144 144 144-144"},child:[]}]})(t)}function VI(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"m112 328 144-144 144 144"},child:[]}]})(t)}function xj(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 1 1-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 0 1-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0 1 22.62-22.62L256 233.37l52.69-52.68a16 16 0 0 1 22.62 22.62L278.63 256z"},child:[]}]})(t)}function Ag(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 368 144 144m224 0L144 368"},child:[]}]})(t)}function Pg(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(t)}function wj(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M304 416V304h112m-101.8 10.23L432 432M208 96v112H96m101.8-10.23L80 80m336 128H304V96m10.23 101.8L432 80M96 304h112v112m-10.23-101.8L80 432"},child:[]}]})(t)}function MI(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M384 224v184a40 40 0 0 1-40 40H104a40 40 0 0 1-40-40V168a40 40 0 0 1 40-40h167.48"},child:[]},{tag:"path",attr:{d:"M459.94 53.25a16.06 16.06 0 0 0-23.22-.56L424.35 65a8 8 0 0 0 0 11.31l11.34 11.32a8 8 0 0 0 11.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38zM399.34 90 218.82 270.2a9 9 0 0 0-2.31 3.93L208.16 299a3.91 3.91 0 0 0 4.86 4.86l24.85-8.35a9 9 0 0 0 3.93-2.31L422 112.66a9 9 0 0 0 0-12.66l-9.95-10a9 9 0 0 0-12.71 0z"},child:[]}]})(t)}function km(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinejoin:"round",strokeWidth:"32",d:"M416 221.25V416a48 48 0 0 1-48 48H144a48 48 0 0 1-48-48V96a48 48 0 0 1 48-48h98.75a32 32 0 0 1 22.62 9.37l141.26 141.26a32 32 0 0 1 9.37 22.62z"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 56v120a32 32 0 0 0 32 32h120m-232 80h160m-160 80h160"},child:[]}]})(t)}function LI(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinejoin:"round",strokeWidth:"32",d:"M336 264.13V436c0 24.3-19.05 44-42.95 44H107c-23.95 0-43-19.7-43-44V172a44.26 44.26 0 0 1 44-44h94.12a24.55 24.55 0 0 1 17.49 7.36l109.15 111a25.4 25.4 0 0 1 7.24 17.77z"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M200 128v108a28.34 28.34 0 0 0 28 28h108"},child:[]},{tag:"path",attr:{fill:"none",strokeLinejoin:"round",strokeWidth:"32",d:"M176 128V76a44.26 44.26 0 0 1 44-44h94a24.83 24.83 0 0 1 17.61 7.36l109.15 111A25.09 25.09 0 0 1 448 168v172c0 24.3-19.05 44-42.95 44H344"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M312 32v108a28.34 28.34 0 0 0 28 28h108"},child:[]}]})(t)}function Ej(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M336 176h40a40 40 0 0 1 40 40v208a40 40 0 0 1-40 40H136a40 40 0 0 1-40-40V216a40 40 0 0 1 40-40h40"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m176 272 80 80 80-80M256 48v288"},child:[]}]})(t)}function Ij(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M432 320v112H320m101.8-10.23L304 304M80 192V80h112M90.2 90.23 208 208M320 80h112v112M421.77 90.2 304 208M192 432H80V320m10.23 101.8L208 304"},child:[]}]})(t)}function bj(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M32 144h448M112 256h288M208 368h96"},child:[]}]})(t)}function Tj(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M80 464V68.14a8 8 0 0 1 4-6.9C91.81 56.66 112.92 48 160 48c64 0 145 48 192 48a199.53 199.53 0 0 0 77.23-15.77 2 2 0 0 1 2.77 1.85v219.36a4 4 0 0 1-2.39 3.65C421.37 308.7 392.33 320 352 320c-48 0-128-32-192-32s-80 16-80 16"},child:[]}]})(t)}function Sj(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"rect",attr:{width:"176",height:"176",x:"48",y:"48",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",rx:"20",ry:"20"},child:[]},{tag:"rect",attr:{width:"176",height:"176",x:"288",y:"48",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",rx:"20",ry:"20"},child:[]},{tag:"rect",attr:{width:"176",height:"176",x:"48",y:"288",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",rx:"20",ry:"20"},child:[]},{tag:"rect",attr:{width:"176",height:"176",x:"288",y:"288",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",rx:"20",ry:"20"},child:[]}]})(t)}function Nj(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M256 80a176 176 0 1 0 176 176A176 176 0 0 0 256 80z"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"28",d:"M200 202.29s.84-17.5 19.57-32.57C230.68 160.77 244 158.18 256 158c10.93-.14 20.69 1.67 26.53 4.45 10 4.76 29.47 16.38 29.47 41.09 0 26-17 37.81-36.37 50.8S251 281.43 251 296"},child:[]},{tag:"circle",attr:{cx:"250",cy:"348",r:"20"},child:[]}]})(t)}function FI(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"rect",attr:{width:"64",height:"368",x:"32",y:"96",fill:"none",strokeLinejoin:"round",strokeWidth:"32",rx:"16",ry:"16"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M112 224h128M112 400h128"},child:[]},{tag:"rect",attr:{width:"128",height:"304",x:"112",y:"160",fill:"none",strokeLinejoin:"round",strokeWidth:"32",rx:"16",ry:"16"},child:[]},{tag:"rect",attr:{width:"96",height:"416",x:"256",y:"48",fill:"none",strokeLinejoin:"round",strokeWidth:"32",rx:"16",ry:"16"},child:[]},{tag:"path",attr:{fill:"none",strokeLinejoin:"round",strokeWidth:"32",d:"m422.46 96.11-40.4 4.25c-11.12 1.17-19.18 11.57-17.93 23.1l34.92 321.59c1.26 11.53 11.37 20 22.49 18.84l40.4-4.25c11.12-1.17 19.18-11.57 17.93-23.1L445 115c-1.31-11.58-11.42-20.06-22.54-18.89z"},child:[]}]})(t)}function kj(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M64 480H48a32 32 0 0 1-32-32V112a32 32 0 0 1 32-32h16a32 32 0 0 1 32 32v336a32 32 0 0 1-32 32zm176-304a32 32 0 0 0-32-32h-64a32 32 0 0 0-32 32v28a4 4 0 0 0 4 4h120a4 4 0 0 0 4-4zM112 448a32 32 0 0 0 32 32h64a32 32 0 0 0 32-32v-30a2 2 0 0 0-2-2H114a2 2 0 0 0-2 2z"},child:[]},{tag:"rect",attr:{width:"128",height:"144",x:"112",y:"240",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M320 480h-32a32 32 0 0 1-32-32V64a32 32 0 0 1 32-32h32a32 32 0 0 1 32 32v384a32 32 0 0 1-32 32zm175.89-34.55-32.23-340c-1.48-15.65-16.94-27-34.53-25.31l-31.85 3c-17.59 1.67-30.65 15.71-29.17 31.36l32.23 340c1.48 15.65 16.94 27 34.53 25.31l31.85-3c17.59-1.67 30.65-15.71 29.17-31.36z"},child:[]}]})(t)}function Cj(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"36",d:"M208 352h-64a96 96 0 0 1 0-192h64m96 0h64a96 96 0 0 1 0 192h-64m-140.71-96h187.42"},child:[]}]})(t)}function Aj(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M192 176v-40a40 40 0 0 1 40-40h160a40 40 0 0 1 40 40v240a40 40 0 0 1-40 40H240c-22.09 0-48-17.91-48-40v-40"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m288 336 80-80-80-80M80 256h272"},child:[]}]})(t)}function Pj(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M304 336v40a40 40 0 0 1-40 40H104a40 40 0 0 1-40-40V136a40 40 0 0 1 40-40h152c22.09 0 48 17.91 48 40v40m64 160 80-80-80-80m-192 80h256"},child:[]}]})(t)}function UI(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M407.94 52.22S321.3 160 240 160H80a16 16 0 0 0-16 16v96a16 16 0 0 0 16 16h160c81.3 0 167.94 108.23 167.94 108.23 6.06 8 24.06 2.52 24.06-9.83V62c0-12.31-17-18.82-24.06-9.78zM64 256s-16-6-16-32 16-32 16-32m384 54s16-4.33 16-22-16-22-16-22m-192-42v128M112 160v128"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M144 288v168a8 8 0 0 0 8 8h53a16 16 0 0 0 15.29-20.73C211.91 416.39 192 386.08 192 336h16a16 16 0 0 0 16-16v-16a16 16 0 0 0-16-16h-16"},child:[]}]})(t)}function Rj(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M160 136c0-30.62 4.51-61.61 16-88C99.57 81.27 48 159.32 48 248c0 119.29 96.71 216 216 216 88.68 0 166.73-51.57 200-128-26.39 11.49-57.38 16-88 16-119.29 0-216-96.71-216-216z"},child:[]}]})(t)}function jj(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.08 341.31c-1.66-2-3.29-4-4.89-5.93-22-26.61-35.31-42.67-35.31-118 0-39-9.33-71-27.72-95-13.56-17.73-31.89-31.18-56.05-41.12a3 3 0 0 1-.82-.67C306.6 51.49 282.82 32 256 32s-50.59 19.49-59.28 48.56a3.13 3.13 0 0 1-.81.65c-56.38 23.21-83.78 67.74-83.78 136.14 0 75.36-13.29 91.42-35.31 118-1.6 1.93-3.23 3.89-4.89 5.93a35.16 35.16 0 0 0-4.65 37.62c6.17 13 19.32 21.07 34.33 21.07H410.5c14.94 0 28-8.06 34.19-21a35.17 35.17 0 0 0-4.61-37.66zM256 480a80.06 80.06 0 0 0 70.44-42.13 4 4 0 0 0-3.54-5.87H189.12a4 4 0 0 0-3.55 5.87A80.06 80.06 0 0 0 256 480z"},child:[]}]})(t)}function F_(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"44",d:"M358.62 129.28 86.49 402.08 70 442l39.92-16.49 272.8-272.13-24.1-24.1zm54.45-54.44-11.79 11.78 24.1 24.1 11.79-11.79a16.51 16.51 0 0 0 0-23.34l-.75-.75a16.51 16.51 0 0 0-23.35 0z"},child:[]}]})(t)}function Rg(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M344 144c-3.92 52.87-44 96-88 96s-84.15-43.12-88-96c-4-55 35-96 88-96s92 42 88 96z"},child:[]},{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M256 304c-87 0-175.3 48-191.64 138.6C62.39 453.52 68.57 464 80 464h352c11.44 0 17.62-10.48 15.65-21.4C431.3 352 343 304 256 304z"},child:[]}]})(t)}function Dj(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M320 146s24.36-12-64-12a160 160 0 1 0 160 160"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m256 58 80 80-80 80"},child:[]}]})(t)}function Oj(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M96 256h320M96 176h320M96 336h320"},child:[]}]})(t)}function yo(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M380.93 57.37A32 32 0 0 0 358.3 48H94.22A46.21 46.21 0 0 0 48 94.22v323.56A46.21 46.21 0 0 0 94.22 464h323.56A46.36 46.36 0 0 0 464 417.78V153.7a32 32 0 0 0-9.37-22.63zM256 416a64 64 0 1 1 64-64 63.92 63.92 0 0 1-64 64zm48-224H112a16 16 0 0 1-16-16v-64a16 16 0 0 1 16-16h192a16 16 0 0 1 16 16v64a16 16 0 0 1-16 16z"},child:[]}]})(t)}function Cm(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M32 192 256 64l224 128-224 128L32 192z"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M112 240v128l144 80 144-80V240m80 128V192M256 320v128"},child:[]}]})(t)}function U_(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M456.69 421.39 362.6 327.3a173.81 173.81 0 0 0 34.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 0 0 327.3 362.6l94.09 94.09a25 25 0 0 0 35.3-35.3zM97.92 222.72a124.8 124.8 0 1 1 124.8 124.8 124.95 124.95 0 0 1-124.8-124.8z"},child:[]}]})(t)}function Vj(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M262.29 192.31a64 64 0 1 0 57.4 57.4 64.13 64.13 0 0 0-57.4-57.4zM416.39 256a154.34 154.34 0 0 1-1.53 20.79l45.21 35.46a10.81 10.81 0 0 1 2.45 13.75l-42.77 74a10.81 10.81 0 0 1-13.14 4.59l-44.9-18.08a16.11 16.11 0 0 0-15.17 1.75A164.48 164.48 0 0 1 325 400.8a15.94 15.94 0 0 0-8.82 12.14l-6.73 47.89a11.08 11.08 0 0 1-10.68 9.17h-85.54a11.11 11.11 0 0 1-10.69-8.87l-6.72-47.82a16.07 16.07 0 0 0-9-12.22 155.3 155.3 0 0 1-21.46-12.57 16 16 0 0 0-15.11-1.71l-44.89 18.07a10.81 10.81 0 0 1-13.14-4.58l-42.77-74a10.8 10.8 0 0 1 2.45-13.75l38.21-30a16.05 16.05 0 0 0 6-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 0 0-6.07-13.94l-38.19-30A10.81 10.81 0 0 1 49.48 186l42.77-74a10.81 10.81 0 0 1 13.14-4.59l44.9 18.08a16.11 16.11 0 0 0 15.17-1.75A164.48 164.48 0 0 1 187 111.2a15.94 15.94 0 0 0 8.82-12.14l6.73-47.89A11.08 11.08 0 0 1 213.23 42h85.54a11.11 11.11 0 0 1 10.69 8.87l6.72 47.82a16.07 16.07 0 0 0 9 12.22 155.3 155.3 0 0 1 21.46 12.57 16 16 0 0 0 15.11 1.71l44.89-18.07a10.81 10.81 0 0 1 13.14 4.58l42.77 74a10.8 10.8 0 0 1-2.45 13.75l-38.21 30a16.05 16.05 0 0 0-6.05 14.08c.33 4.14.55 8.3.55 12.47z"},child:[]}]})(t)}function Mj(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinejoin:"round",strokeWidth:"32",d:"M480 208H308L256 48l-52 160H32l140 96-54 160 138-100 138 100-54-160z"},child:[]}]})(t)}function Lj(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"rect",attr:{width:"48",height:"160",x:"64",y:"320",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",rx:"8",ry:"8"},child:[]},{tag:"rect",attr:{width:"48",height:"256",x:"288",y:"224",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",rx:"8",ry:"8"},child:[]},{tag:"rect",attr:{width:"48",height:"368",x:"400",y:"112",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",rx:"8",ry:"8"},child:[]},{tag:"rect",attr:{width:"48",height:"448",x:"176",y:"32",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",rx:"8",ry:"8"},child:[]}]})(t)}function Hh(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M256 48v48m0 320v48m147.08-355.08-33.94 33.94M142.86 369.14l-33.94 33.94M464 256h-48m-320 0H48m355.08 147.08-33.94-33.94M142.86 142.86l-33.94-33.94"},child:[]},{tag:"circle",attr:{cx:"256",cy:"256",r:"80",fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32"},child:[]}]})(t)}function Fj(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m32 415.5 120-320 120 320m-42-112H74m252-64c12.19-28.69 41-48 74-48h0c46 0 80 32 80 80v144"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M320 358.5c0 36 26.86 58 60 58 54 0 100-27 100-106v-15c-20 0-58 1-92 5-32.77 3.86-68 19-68 58z"},child:[]}]})(t)}function no(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M256 64C150 64 64 150 64 256s86 192 192 192 192-86 192-192S362 64 256 64z"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 128v144h96"},child:[]}]})(t)}function Dd(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m112 112 20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320"},child:[]},{tag:"path",attr:{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M80 112h352"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M192 112V72h0a23.93 23.93 0 0 1 24-24h80a23.93 23.93 0 0 1 24 24h0v40m-64 64v224m-72-224 8 224m136-224-8 224"},child:[]}]})(t)}function $s(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M85.57 446.25h340.86a32 32 0 0 0 28.17-47.17L284.18 82.58c-12.09-22.44-44.27-22.44-56.36 0L57.4 399.08a32 32 0 0 0 28.17 47.17z"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m250.26 195.39 5.74 122 5.73-121.95a5.74 5.74 0 0 0-5.79-6h0a5.74 5.74 0 0 0-5.68 5.95z"},child:[]},{tag:"path",attr:{d:"M256 397.25a20 20 0 1 1 20-20 20 20 0 0 1-20 20z"},child:[]}]})(t)}const Uj={parse:JSON.parse,stringify:JSON.stringify};function Tl(t,e,n={}){const{serializer:r=Uj,syncAcrossTabs:s=!0,removeOnError:i=!1,onError:o=null,validateValue:a=null,debounceDelay:l=0}=n,d=k.useRef(null),h=k.useRef(!1),m=k.useCallback(()=>{if(typeof window>"u")return typeof e=="function"?e():e;try{const y=window.localStorage.getItem(t);if(y===null)return typeof e=="function"?e():e;const T=r.parse(y);return a&&!a(T)?(console.warn(`Invalid value found in localStorage for key "${t}"`),i&&window.localStorage.removeItem(t),typeof e=="function"?e():e):T}catch(y){if(console.warn(`Error reading localStorage key "${t}":`,y),o&&o(y,"read"),i)try{window.localStorage.removeItem(t)}catch(T){console.warn(`Failed to remove corrupted localStorage key "${t}":`,T)}return typeof e=="function"?e():e}},[t,e,r,a,i,o]),[p,E]=k.useState(()=>m()),N=k.useCallback(y=>{if(typeof window>"u"){console.warn(`Tried setting localStorage key "${t}" even though environment is not a client`);return}try{const T=y instanceof Function?y(p):y;if(a&&!a(T)){const O=new Error(`Invalid value provided for localStorage key "${t}"`);throw o&&o(O,"write"),O}const j=()=>{try{T===void 0?window.localStorage.removeItem(t):window.localStorage.setItem(t,r.stringify(T)),E(T),s&&window.dispatchEvent(new CustomEvent("local-storage",{detail:{key:t,newValue:T}}))}catch(O){console.warn(`Error setting localStorage key "${t}":`,O),o&&o(O,"write")}};l>0?(d.current&&clearTimeout(d.current),d.current=setTimeout(j,l)):j()}catch(T){console.warn(`Error setting localStorage key "${t}":`,T),o&&o(T,"write")}},[t,p,r,a,o,s,l]),S=k.useCallback(()=>{if(typeof window>"u"){console.warn(`Tried removing localStorage key "${t}" even though environment is not a client`);return}try{window.localStorage.removeItem(t);const y=typeof e=="function"?e():e;E(y),s&&window.dispatchEvent(new CustomEvent("local-storage",{detail:{key:t,newValue:y}}))}catch(y){console.warn(`Error removing localStorage key "${t}":`,y),o&&o(y,"remove")}},[t,e,s,o]),A=k.useCallback(()=>m(),[m]),w=k.useCallback(()=>{const y=m();E(y)},[m]),v=k.useCallback(()=>{if(typeof window>"u")return!1;try{const y="__localStorage_test__";return window.localStorage.setItem(y,"test"),window.localStorage.removeItem(y),!0}catch{return!1}},[]);return k.useEffect(()=>{if(!h.current&&typeof window<"u"){const y=m();E(y),h.current=!0}},[m]),k.useEffect(()=>{if(typeof window>"u")return;const y=j=>{if(j.key===t||j.key===null){const O=m();E(O)}},T=j=>{var O;((O=j.detail)==null?void 0:O.key)===t&&E(j.detail.newValue)};return s&&(window.addEventListener("storage",y),window.addEventListener("local-storage",T)),()=>{s&&(window.removeEventListener("storage",y),window.removeEventListener("local-storage",T)),d.current&&clearTimeout(d.current)}},[t,m,s]),{value:p,setValue:N,removeValue:S,getCurrentValue:A,refresh:w,isSupported:v}}const zj=({percentage:t})=>u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"text-4xl font-bold text-green-600",children:[t,"%"]}),u.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Attendance"})]}),Bj=({setHeaderTitle:t})=>{const[e,n]=k.useState([]),[r,s]=k.useState(""),[i,o]=k.useState(!1);Nt();const{value:a}=Tl("attendanceRecords",[]),{data:l,loading:d,refresh:h}=Kt(["schedules","first_year"]),m=k.useMemo(()=>Td(On(Ut,"notices"),gg("createdAt","desc"),aR(1)),[]),{data:p,loading:E,isOnline:N,fromCache:S,hasPendingWrites:A,refresh:w}=mn(m),v=p==null?void 0:p[0];k.useEffect(()=>{t("Dashboard")},[t]),k.useEffect(()=>{l&&T(l.days)},[l]);const y=async()=>{N&&(o(!0),await Promise.all([h(!0),w(!0)]),o(!1))},T=x=>{const C=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],P=new Date,D=P.getDay(),R=P.getHours()*100+P.getMinutes(),Y=U=>{if(!U)return 0;const ee=U.slice(-2).toUpperCase(),ne=U.slice(0,-2).trim();let[fe,ge]=ne.split(":").map(Number);return ee==="PM"&&fe!==12&&(fe+=12),ee==="AM"&&fe===12&&(fe=0),fe*100+(ge||0)},ie=C[D],oe=((x==null?void 0:x[ie])||[]).filter(U=>Y(U.time)>R);if(oe.length>0){n(oe),s("Today");return}for(let U=1;U<=7;U++){const ee=(D+U)%7,ne=C[ee],fe=(x==null?void 0:x[ne])||[];if(fe.length>0){n(fe),s(ne);return}}n([]),s("")},{timeString:j,dateString:O}=(()=>{const x=new Date;return{timeString:x.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),dateString:x.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}})(),I=a!=null&&a.length?Math.round(a.filter(x=>x.status==="present").length/a.length*100):0,_=()=>u.jsxs("div",{className:"space-y-6 p-4",children:[u.jsx(Re,{height:120,borderRadius:"1rem"}),u.jsx(Re,{height:80,count:3,borderRadius:"1rem"})]});return d&&!l||E&&!p?u.jsx(_,{}):u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[u.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-700 p-6 mb-6 relative overflow-hidden",children:u.jsxs("div",{className:"relative flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:"Welcome Back!"}),u.jsxs("p",{className:"text-blue-100 text-sm",children:[O,"  ",j]})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("button",{onClick:y,disabled:i||!N,className:"bg-white/20 backdrop-blur-sm p-3 rounded-xl hover:bg-white/30 transition-all duration-200 disabled:opacity-50",children:u.jsx(Dj,{size:24,className:`text-white ${i?"animate-spin":""}`})}),u.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-3 rounded-xl",children:u.jsx(Cm,{size:28,className:"text-white"})})]})]})}),u.jsxs("div",{className:"px-4 pb-6 space-y-6",children:[u.jsx(Jt,{isOnline:N,fromCache:S,hasPendingWrites:A}),u.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h2",{className:"text-lg font-bold text-gray-900",children:["Upcoming Classes (",r||"Soon",")"]}),u.jsx(Et,{to:"/schedule",className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:"View All"})]}),e.length>0?u.jsx("div",{className:"space-y-4",children:e.slice(0,3).map((x,C)=>u.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:x.subject}),u.jsx("p",{className:"text-sm text-gray-600",children:x.teacher})]}),u.jsx("div",{className:"text-right",children:u.jsx("p",{className:"font-semibold text-gray-900",children:x.time})})]},C))}):u.jsx("p",{className:"text-center text-gray-500 py-8",children:"No upcoming classes. Enjoy your free time!"})]})}),u.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Latest Notice"}),u.jsx(Et,{to:"/notices",className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:"View All"})]}),v?u.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-100 rounded-xl",children:[u.jsx("h3",{className:"font-semibold text-blue-800",children:v.title}),u.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mt-1",children:v.content})]}):u.jsx("p",{className:"text-center text-gray-500 py-8",children:"No new notices to show."})]})}),u.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Attendance"}),u.jsx(Et,{to:"/attendance",className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:"Details"})]}),(a==null?void 0:a.length)>0?u.jsx(zj,{percentage:I}):u.jsx("p",{className:"text-center text-gray-500 py-8",children:"No attendance data recorded yet."})]})})]})]})},zI=X.createContext();function Mt(){return k.useContext(zI)}function BI({children:t}){const[e,n]=k.useState(null),[r,s]=k.useState(!0);k.useEffect(()=>f3(kg,a=>{n(a),s(!1)}),[]);const i={currentUser:e};return u.jsx(zI.Provider,{value:i,children:t})}function $j(t){return Q({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(t)}function Wj(t){return Q({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function qj(t){return Q({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M542.22 32.05c-54.8 3.11-163.72 14.43-230.96 55.59-4.64 2.84-7.27 7.89-7.27 13.17v363.87c0 11.55 12.63 18.85 23.28 13.49 69.18-34.82 169.23-44.32 218.7-46.92 16.89-.89 30.02-14.43 30.02-30.66V62.75c.01-17.71-15.35-31.74-33.77-30.7zM264.73 87.64C197.5 46.48 88.58 35.17 33.78 32.05 15.36 31.01 0 45.04 0 62.75V400.6c0 16.24 13.13 29.78 30.02 30.66 49.49 2.6 149.59 12.11 218.77 46.95 10.62 5.35 23.21-1.94 23.21-13.46V100.63c0-5.29-2.62-10.14-7.27-12.99z"},child:[]}]})(t)}function Hj(t){return Q({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"},child:[]}]})(t)}function Kj(t){return Q({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(t)}function Gj(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 128H272l-64-64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48z"},child:[]}]})(t)}function Qj(t){return Q({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"},child:[]}]})(t)}function Yj(t){return Q({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.34 153.2L343.4 67.5c-15.2-4.67-31.6-4.67-46.79 0L17.66 153.2c-23.54 7.23-23.54 38.36 0 45.59l48.63 14.94c-10.67 13.19-17.23 29.28-17.88 46.9C38.78 266.15 32 276.11 32 288c0 10.78 5.68 19.85 13.86 25.65L20.33 428.53C18.11 438.52 25.71 448 35.94 448h56.11c10.24 0 17.84-9.48 15.62-19.47L82.14 313.65C90.32 307.85 96 298.78 96 288c0-11.57-6.47-21.25-15.66-26.87.76-15.02 8.44-28.3 20.69-36.72L296.6 284.5c9.06 2.78 26.44 6.25 46.79 0l278.95-85.7c23.55-7.24 23.55-38.36 0-45.6zM352.79 315.09c-28.53 8.76-52.84 3.92-65.59 0l-145.02-44.55L128 384c0 35.35 85.96 64 192 64s192-28.65 192-64l-14.18-113.47-145.03 44.56z"},child:[]}]})(t)}function Sn(t){return Q({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function Jj(t){return Q({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function rr(t){return Q({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(t)}function Xj(t){return Q({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"},child:[]}]})(t)}function vo(t){return Q({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(t)}function Zj(t){return Q({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3 1 9l11 6 9-4.91V17h2V9L12 3z"},child:[]}]})(t)}function $I(t){return Q({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M13 11h-2v3H8v2h3v3h2v-3h3v-2h-3zm1-9H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"},child:[]}]})(t)}function e5(t){return Q({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M12 14l9-5-9-5-9 5 9 5z"},child:[]},{tag:"path",attr:{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"},child:[]},{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222"},child:[]}]})(t)}function t5(t){return Q({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"},child:[]}]})(t)}const n5=({setHeaderTitle:t})=>{const{data:e,loading:n,deleteItem:r,isOnline:s,fromCache:i,hasPendingWrites:o}=mn("official_notes"),a=Nt(),{currentUser:l}=Mt(),[d,h]=k.useState(""),[m,p]=k.useState(!1),[E,N]=k.useState(null),[S,A]=k.useState(""),[w,v]=k.useState("");k.useEffect(()=>{t("Official Notes")},[t]);const y=k.useMemo(()=>e?w.trim()?e.filter(x=>x.name.toLowerCase().includes(w.toLowerCase())):e:[],[e,w]),T=async x=>{await r(x,!1)},j=x=>{N(x.id),A(x.name)},O=x=>{a(`/notes/${x}`)},I=()=>u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array(6).fill().map((x,C)=>u.jsxs("div",{className:"p-6 bg-white rounded-xl border border-gray-100 shadow-sm",children:[u.jsx(Re,{circle:!0,height:48,width:48,className:"mb-4"}),u.jsx(Re,{height:24,width:"70%"})]},C))}),_=()=>u.jsxs("div",{className:"text-center py-20",children:[u.jsx(e5,{size:80,className:"mx-auto text-gray-300"}),u.jsx("h3",{className:"text-2xl font-bold text-gray-700 mt-4",children:"No Subjects Found"}),u.jsx("p",{className:"text-gray-500 mt-2",children:l?"Click 'Add Subject' to create the first one.":"Official subjects will appear here."})]});return e?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:u.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"p-3 bg-gradient-to-r from-green-500 to-blue-500 rounded-xl",children:u.jsx(kj,{size:24,className:"text-white"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Official Notes"}),u.jsx("p",{className:"text-gray-500 text-sm",children:"Manage your study subjects"})]})]}),l&&u.jsxs("button",{onClick:()=>p(!0),disabled:!s,className:"inline-flex items-center px-4 py-2.5 bg-gradient-to-r from-green-500 to-blue-500 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 disabled:opacity-50",children:[u.jsx(Sn,{className:"mr-2",size:14}),s?"Add Subject":"Offline"]})]}),u.jsx(Jt,{isOnline:s,fromCache:i,hasPendingWrites:o}),u.jsx("div",{className:"mt-6",children:n&&y.length===0?u.jsx(I,{}):y.length>0?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map((x,C)=>u.jsx(r5,{subject:x,index:C,isOnline:s,onDelete:T,onRename:j,onClick:O},x.id))}):u.jsx(_,{})})]})}):u.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:u.jsx(I,{})})},r5=({subject:t,index:e,isOnline:n,onDelete:r,onRename:s,onClick:i})=>{var a;const o=(a=t._metadata)==null?void 0:a.hasPendingWrites;return u.jsxs("div",{className:`group relative bg-white/80 backdrop-blur-sm rounded-xl border border-gray-100 shadow-sm hover:shadow-lg transition-all duration-300 ${o?"opacity-60":""}`,onClick:()=>i(t.id),children:[u.jsx("div",{className:"p-6 cursor-pointer",children:u.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[u.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-400 to-blue-400 rounded-xl flex items-center justify-center",children:u.jsx(Zj,{size:24,className:"text-white"})}),u.jsx("div",{children:u.jsxs("h3",{className:"text-lg font-semibold text-gray-800 group-hover:text-green-600 truncate",children:[t.name,o&&u.jsx("span",{className:"text-sm font-normal text-gray-500",children:" (saving...)"})]})})]})}),n&&u.jsxs("div",{className:"absolute bottom-4 right-4 flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:l=>{l.stopPropagation(),s(t)},className:"p-2 text-gray-500 hover:text-blue-600 rounded-full hover:bg-blue-50",children:u.jsx(vo,{size:20})}),u.jsx("button",{onClick:l=>{l.stopPropagation(),r(t.id)},className:"p-2 text-gray-500 hover:text-red-600 rounded-full hover:bg-red-50",children:u.jsx(rr,{size:20})})]})]})},s5=({setHeaderTitle:t})=>{const{subjectId:e}=Xr(),n=Nt(),{currentUser:r}=Mt(),{data:s}=Kt(["official_notes",e]);k.useEffect(()=>{t((s==null?void 0:s.name)||"Chapters")},[s,t]);const{data:i,loading:o,deleteItem:a,isOnline:l,fromCache:d,hasPendingWrites:h}=mn(["official_notes",e,"chapters"]),[m,p]=k.useState(""),[E,N]=k.useState(!1),[S,A]=k.useState(null),[w,v]=k.useState(""),[y,T]=k.useState(""),j=k.useMemo(()=>i?i.filter(C=>C.name.toLowerCase().includes(y.toLowerCase())):[],[i,y]),O=async C=>{await a(C,!1)},I=C=>{A(C.id),v(C.name)},_=()=>u.jsx("div",{className:"space-y-3",children:Array(5).fill().map((C,P)=>u.jsx("div",{className:"p-5 bg-white rounded-xl border border-gray-100",children:u.jsx(Re,{height:24,width:"60%"})},P))}),x=()=>u.jsxs("div",{className:"text-center py-20",children:[u.jsx(t5,{size:80,className:"mx-auto text-gray-300"}),u.jsx("h3",{className:"text-2xl font-bold text-gray-700 mt-4",children:"No Chapters Yet"}),u.jsx("p",{className:"text-gray-500 mt-2",children:"Start organizing by creating the first chapter."})]});return i?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-purple-50 to-blue-50",children:u.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx(Et,{to:"/notes",className:"p-2 rounded-full hover:bg-gray-200 transition-colors",children:u.jsx(Tn,{size:24})}),u.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:(s==null?void 0:s.name)||"Chapters"}),r&&u.jsxs("button",{onClick:()=>N(!0),disabled:!l,className:"inline-flex items-center px-4 py-2.5 bg-blue-500 text-white font-semibold rounded-xl shadow-lg hover:bg-blue-600 disabled:opacity-50",children:[u.jsx(Sn,{className:"mr-2"}),l?"Add Chapter":"Offline"]})]}),u.jsx(Jt,{isOnline:l,fromCache:d,hasPendingWrites:h}),E&&u.jsx("div",{children:"Add form here..."}),S&&u.jsx("div",{children:"Rename form here..."}),u.jsx("div",{className:"mt-6",children:o&&j.length===0?u.jsx(_,{}):j.length>0?u.jsx("div",{className:"space-y-3",children:j.map(C=>u.jsx(i5,{chapter:C,subjectId:e,isOnline:l,onNavigate:n,onRename:I,onDelete:O},C.id))}):u.jsx(x,{})})]})}):u.jsx("div",{className:"max-w-4xl mx-auto p-4 sm:p-6",children:u.jsx(_,{})})},i5=({chapter:t,subjectId:e,isOnline:n,onNavigate:r,onRename:s,onDelete:i})=>{var a;const o=(a=t._metadata)==null?void 0:a.hasPendingWrites;return u.jsxs("div",{className:`group flex justify-between items-center p-5 bg-white/80 backdrop-blur-sm rounded-xl border border-gray-100 shadow-sm hover:shadow-lg transition-all duration-300 ${o?"opacity-60":""}`,children:[u.jsxs("div",{onClick:()=>r(`/notes/${e}/${t.id}`),className:"cursor-pointer flex items-center space-x-4 flex-grow",children:[u.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-purple-400 to-blue-400 rounded-full"}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(qj,{className:"text-gray-400 group-hover:text-purple-500",size:16}),u.jsxs("span",{className:"font-medium text-gray-800 group-hover:text-purple-600 text-lg",children:[t.name,o&&u.jsx("span",{className:"text-sm font-normal text-gray-500",children:" (saving...)"})]})]})]}),u.jsxs("div",{className:"flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:()=>s(t),disabled:!n,className:"p-2 text-gray-500 hover:text-blue-600 rounded-full hover:bg-blue-50 disabled:opacity-50",children:u.jsx(vo,{size:20})}),u.jsx("button",{onClick:()=>i(t.id),disabled:!n,className:"p-2 text-gray-500 hover:text-red-600 rounded-full hover:bg-red-50 disabled:opacity-50",children:u.jsx(rr,{size:20})})]})]})},o5=({setHeaderTitle:t})=>{const{subjectId:e,chapterId:n}=Xr(),r=Nt(),{currentUser:s}=Mt(),{data:i}=Kt(["official_notes",e,"chapters",n]);k.useEffect(()=>{t((i==null?void 0:i.name)||"Notes")},[i,t]);const{data:o,loading:a,addItem:l,deleteItem:d,isOnline:h,fromCache:m,hasPendingWrites:p}=mn(["official_notes",e,"chapters",n,"items"]),[E,N]=k.useState(""),[S,A]=k.useState(!1),[w,v]=k.useState(""),y=k.useMemo(()=>o?o.filter(_=>_.name.toLowerCase().includes(w.toLowerCase())):[],[o,w]),T=async()=>{E.trim()!==""&&(await l({name:E.trim(),content:""}),N(""),A(!1))},j=async _=>{await d(_,!1)},O=()=>u.jsx("div",{className:"space-y-3",children:Array(5).fill().map((_,x)=>u.jsx("div",{className:"p-4 bg-white rounded-xl border border-gray-100",children:u.jsx(Re,{height:20,width:"70%"})},x))}),I=()=>u.jsxs("div",{className:"text-center py-20",children:[u.jsx($I,{size:80,className:"mx-auto text-gray-300"}),u.jsx("h3",{className:"text-2xl font-bold text-gray-700 mt-4",children:"No Notes Yet"}),u.jsx("p",{className:"text-gray-500 mt-2",children:"Create the first note in this chapter to get started."})]});return o?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:u.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx(Et,{to:`/notes/${e}`,className:"p-2 rounded-full hover:bg-gray-200 transition-colors",children:u.jsx(Tn,{size:24})}),u.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:(i==null?void 0:i.name)||"Notes"}),s&&u.jsxs("button",{onClick:()=>A(!0),disabled:!h,className:"inline-flex items-center px-4 py-2.5 bg-blue-500 text-white font-semibold rounded-xl shadow-lg hover:bg-blue-600 disabled:opacity-50",children:[u.jsx(Sn,{className:"mr-2"}),h?"Add Note":"Offline"]})]}),u.jsx(Jt,{isOnline:h,fromCache:m,hasPendingWrites:p}),S&&u.jsxs("div",{className:"mb-6 p-4 bg-white rounded-xl shadow-md border",children:[u.jsx("h4",{className:"font-semibold mb-2",children:"Create New Note"}),u.jsx("input",{type:"text",value:E,onChange:_=>N(_.target.value),placeholder:"Enter note title...",className:"w-full p-2 border border-gray-300 rounded-lg mb-2"}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300",children:"Cancel"}),u.jsx("button",{onClick:T,disabled:!E.trim()||!h,className:"px-4 py-2 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 disabled:opacity-50",children:h?"Create":"Offline"})]})]}),u.jsx("div",{className:"mt-6",children:a&&y.length===0?u.jsx(O,{}):y.length>0?u.jsx("ul",{className:"space-y-3",children:y.map(_=>u.jsx(a5,{item:_,subjectId:e,chapterId:n,isOnline:h,onNavigate:r,onDelete:j},_.id))}):u.jsx(I,{})})]})}):u.jsx("div",{className:"max-w-4xl mx-auto p-4 sm:p-6",children:u.jsx(O,{})})},a5=({item:t,subjectId:e,chapterId:n,isOnline:r,onNavigate:s,onDelete:i})=>{var a;const o=(a=t._metadata)==null?void 0:a.hasPendingWrites;return u.jsxs("li",{className:`group flex justify-between items-center p-4 bg-white/80 backdrop-blur-sm rounded-xl border border-gray-100 shadow-sm hover:shadow-lg transition-all duration-300 ${o?"opacity-60":""}`,children:[u.jsxs("div",{onClick:()=>s(`/notes/${e}/${n}/${t.id}`),className:"cursor-pointer flex items-center space-x-3 flex-grow",children:[u.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-400 to-purple-400 rounded-full"}),u.jsxs("span",{className:"font-medium text-gray-800 group-hover:text-blue-600",children:[t.name,o&&u.jsx("span",{className:"text-sm font-normal text-gray-500",children:" (saving...)"})]})]}),u.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx("button",{onClick:()=>i(t.id),disabled:!r,className:"p-2 text-gray-500 hover:text-red-600 rounded-full hover:bg-red-50 disabled:opacity-50",children:u.jsx(rr,{size:20})})})]})},l5=({htmlString:t,className:e=""})=>t?u.jsx("div",{className:`prose prose-lg max-w-none ${e}`,dangerouslySetInnerHTML:{__html:t}}):u.jsx("div",{className:"text-gray-500 italic",children:"No content available"}),c5=()=>u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx(Re,{height:40,width:200}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx(Re,{height:40,width:80}),u.jsx(Re,{height:40,width:80})]})]}),u.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:u.jsx(Re,{height:600})})]}),u5=({hasUnsavedChanges:t,isSaving:e,lastSaved:n})=>e?u.jsxs("div",{className:"flex items-center text-sm text-blue-600",children:[u.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full mr-2"}),"Saving..."]}):t?u.jsxs("div",{className:"flex items-center text-sm text-orange-600",children:[u.jsx($s,{className:"mr-1",size:16}),"Unsaved changes"]}):n?u.jsxs("div",{className:"flex items-center text-sm text-green-600",children:[u.jsx(DI,{className:"mr-1",size:16}),"Saved ",n.toLocaleTimeString()]}):null,d5=({setHeaderTitle:t})=>{const{subjectId:e,chapterId:n,itemId:r}=Xr();Nt();const{currentUser:s}=Mt(),i=k.useRef(null),o=window.location.pathname.includes("personal-notes"),l=[o?"personal_notes":"official_notes",e,"chapters",n,"items",r],{data:d,loading:h,updateDocument:m,isOnline:p,fromCache:E,hasPendingWrites:N}=Kt(l),[S,A]=k.useState(!1),[w,v]=k.useState(""),[y,T]=k.useState(!1),[j,O]=k.useState(!1),[I,_]=k.useState(null),[x,C]=k.useState(null),P=o?`/personal-notes/${e}/${n}`:`/notes/${e}/${n}`;k.useEffect(()=>{d?(t(d.name||"Note"),S||v(d.content||""),d.lastModified&&_(d.lastModified.toDate())):h||t("Note Not Found")},[d,h,S,t]);const D=w!==((d==null?void 0:d.content)||""),R=k.useCallback(async()=>{if(!D||!p||!s)return;T(!0),(await m({content:w,lastModified:new Date})).success&&(_(new Date),re.success("Auto-saved",{autoClose:2e3})),T(!1)},[w,D,p,s,m]);k.useEffect(()=>{if(!S||!D)return;x&&clearTimeout(x);const oe=setTimeout(R,3e3);return C(oe),()=>{oe&&clearTimeout(oe)}},[w,S,D,R]);const Y=async()=>{if(!D||!p)return;x&&(clearTimeout(x),C(null)),T(!0),(await m({content:w,lastModified:new Date})).success&&(_(new Date),re.success("Saved successfully")),T(!1)},ie=k.useCallback(async()=>{if(S){if(D){const oe=window.confirm("You have unsaved changes. Do you want to save them before exiting?");oe&&p?await Y():oe||v((d==null?void 0:d.content)||"")}x&&(clearTimeout(x),C(null))}else v((d==null?void 0:d.content)||"");A(!S)},[S,D,p,d==null?void 0:d.content,x,Y]),xe=k.useCallback(oe=>{v(oe.target.value)},[]);return k.useEffect(()=>{const oe=U=>{(U.ctrlKey||U.metaKey)&&U.key==="s"&&(U.preventDefault(),S&&D&&p&&Y()),(U.ctrlKey||U.metaKey)&&U.key==="e"&&(U.preventDefault(),s&&p&&ie()),U.key==="Escape"&&S&&ie(),(U.key==="F11"||(U.ctrlKey||U.metaKey)&&U.shiftKey&&U.key==="F")&&(U.preventDefault(),O(ee=>!ee))};return window.addEventListener("keydown",oe),()=>window.removeEventListener("keydown",oe)},[S,D,p,s,Y,ie]),k.useEffect(()=>{const oe=U=>{D&&S&&(U.preventDefault(),U.returnValue="You have unsaved changes. Are you sure you want to leave?")};return window.addEventListener("beforeunload",oe),()=>window.removeEventListener("beforeunload",oe)},[D,S]),k.useEffect(()=>{S&&i.current&&i.current.focus()},[S]),h&&!d?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-4",children:u.jsx("div",{className:"max-w-4xl mx-auto",children:u.jsx(c5,{})})}):!h&&!d?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-4",children:u.jsxs("div",{className:"max-w-4xl mx-auto text-center py-16",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Note Not Found"}),u.jsx("p",{className:"text-gray-600 mb-8",children:"The note you're looking for doesn't exist or has been deleted."}),u.jsxs(Et,{to:P,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[u.jsx(Tn,{className:"mr-2",size:20}),"Go Back"]})]})}):u.jsx("div",{className:`min-h-screen transition-all duration-300 ${j?"fixed inset-0 z-50 bg-white":"bg-gradient-to-br from-blue-50 via-white to-purple-50"}`,children:u.jsxs("div",{className:`${j?"h-full":"max-w-4xl mx-auto"} p-4`,children:[u.jsxs("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-4",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs(Et,{to:P,className:"flex items-center px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-white rounded-lg transition-colors",title:"Go back to chapter",children:[u.jsx(Tn,{className:"mr-2",size:20}),"Back"]}),u.jsx("h1",{className:"text-2xl font-bold text-gray-800 truncate",children:(d==null?void 0:d.name)||"Loading..."}),h&&u.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full"})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx(u5,{hasUnsavedChanges:D,isSaving:y,lastSaved:I}),u.jsx("button",{onClick:()=>O(!j),className:"flex items-center px-3 py-2 text-gray-600 hover:text-gray-800 hover:bg-white rounded-lg transition-colors",title:`${j?"Exit":"Enter"} fullscreen (F11)`,children:j?u.jsx(wj,{size:20}):u.jsx(Ij,{size:20})}),s&&u.jsx("div",{className:"flex items-center space-x-2",children:S?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:ie,className:"flex items-center px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",title:"Cancel editing (Escape)",children:[u.jsx(Pg,{className:"mr-2",size:18}),"Cancel"]}),u.jsxs("button",{onClick:Y,disabled:!D||y||!p,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:p?"Save changes (Ctrl+S)":"Cannot save while offline",children:[u.jsx(yo,{className:"mr-2",size:18}),y?"Saving...":p?"Save":"Offline"]})]}):u.jsxs("button",{onClick:ie,disabled:!p,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:p?"Edit note (Ctrl+E)":"Cannot edit while offline",children:[u.jsx(F_,{className:"mr-2",size:18}),p?"Edit":"Offline"]})})]})]}),u.jsx("div",{className:"mb-4",children:u.jsx(Jt,{isOnline:p,fromCache:E,hasPendingWrites:N})}),u.jsx("div",{className:`bg-white rounded-xl shadow-lg overflow-hidden transition-all duration-300 ${j?"h-[calc(100vh-160px)]":"min-h-[600px]"}`,children:S?u.jsx("div",{className:"h-full",children:u.jsx("textarea",{ref:i,value:w,onChange:xe,placeholder:"Start writing your note content here...",className:"w-full h-full p-6 border-none outline-none resize-none font-mono text-sm leading-relaxed",disabled:!p,style:{minHeight:j?"100%":"600px"}})}):u.jsx("div",{className:`${j?"h-full overflow-auto":""} p-6`,children:d!=null&&d.content?u.jsx(l5,{htmlString:d.content}):u.jsxs("div",{className:"text-center py-16 text-gray-500",children:[u.jsx("p",{className:"text-lg mb-4",children:"This note is empty"}),s&&p&&u.jsxs("button",{onClick:()=>A(!0),className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[u.jsx(F_,{className:"mr-2",size:20}),"Start Writing"]})]})})}),S&&u.jsxs("div",{className:"mt-4 text-sm text-gray-600 text-center",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Shortcuts:"})," Ctrl+S to save, Ctrl+E to toggle edit, Escape to cancel, F11 for fullscreen"]}),u.jsx("p",{className:"mt-1",children:"Auto-save occurs every 3 seconds while typing"})]})]})})},h5=({setHeaderTitle:t})=>{const e=Nt(),{currentUser:n}=Mt();k.useEffect(()=>{t("My Notes")},[t]);const r=k.useMemo(()=>{if(!n)return null;const C=On(Ut,"personal_notes");return Td(C,oR("userId","==",n.uid))},[n]),{data:s,loading:i,addItem:o,deleteItem:a,updateItem:l,isOnline:d,fromCache:h,hasPendingWrites:m}=mn(r),[p,E]=k.useState(""),[N,S]=k.useState(!1),[A,w]=k.useState(null),[v,y]=k.useState(""),T=async()=>{p.trim()===""||!n||(await o({name:p.trim(),userId:n.uid}),E(""),S(!1))},j=async C=>{await a(C,!1)},O=async()=>{v.trim()===""||!n||(await l(A,{name:v.trim()}),w(null),y(""))},I=C=>{w(C.id),y(C.name)},_=()=>u.jsx("ul",{className:"space-y-3",children:Array(4).fill(0).map((C,P)=>u.jsx("li",{className:"p-4 bg-white rounded-lg shadow-md",children:u.jsx(Re,{height:24,width:"60%"})},P))}),x=()=>u.jsxs("div",{className:"text-center mt-10",children:[u.jsx(Cg,{size:64,className:"mx-auto text-gray-300"}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mt-4",children:"Your Notebook is Empty"}),u.jsx("p",{className:"text-gray-500 mt-2",children:'Click "Add Subject" to create your first notebook.'})]});return s===null?u.jsx("div",{className:"max-w-4xl mx-auto p-4 sm:p-6",children:u.jsx(_,{})}):u.jsx("div",{className:"p-4 sm:p-6 min-h-screen bg-gray-50",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"My Notes"}),n&&u.jsxs("button",{onClick:()=>S(!0),disabled:!d||N||A,className:"inline-flex items-center px-4 py-2 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600 disabled:opacity-50",children:[u.jsx(Sn,{className:"mr-2"}),d?"Add Subject":"Offline"]})]}),u.jsx(Jt,{isOnline:d,fromCache:h,hasPendingWrites:m}),N&&u.jsxs("div",{className:"my-4 p-4 bg-white rounded-lg shadow-md border",children:[u.jsx("input",{type:"text",value:p,onChange:C=>E(C.target.value),placeholder:"New subject name",className:"border p-2 w-full mb-2 rounded-md",autoFocus:!0}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300",children:"Cancel"}),u.jsx("button",{onClick:T,disabled:!p.trim()||!d,className:"px-4 py-2 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 disabled:opacity-50",children:d?"Save":"Offline"})]})]}),A&&u.jsxs("div",{className:"my-4 p-4 bg-white rounded-lg shadow-md border",children:[u.jsx("input",{type:"text",value:v,onChange:C=>y(C.target.value),placeholder:"Rename subject",className:"border p-2 w-full mb-2 rounded-md",autoFocus:!0}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{onClick:()=>w(null),className:"px-4 py-2 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300",children:"Cancel"}),"                            ",u.jsx("button",{onClick:O,disabled:!v.trim()||!d,className:"px-4 py-2 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 disabled:opacity-50",children:d?"Save Changes":"Offline"})]})]}),u.jsx("div",{className:"mt-4",children:i&&s.length===0?u.jsx(_,{}):s.length>0?u.jsx("ul",{className:"space-y-3",children:s.map(C=>u.jsx(f5,{subject:C,isOnline:d,onNavigate:()=>e(`/personal-notes/${C.id}`),onRenameClick:I,onDeleteClick:j},C.id))}):u.jsx(x,{})})]})})},f5=({subject:t,isOnline:e,onNavigate:n,onRenameClick:r,onDeleteClick:s})=>{var o;const i=(o=t._metadata)==null?void 0:o.hasPendingWrites;return u.jsxs("li",{className:`flex justify-between items-center p-4 bg-white rounded-lg shadow-md transition-shadow hover:shadow-lg ${i?"opacity-60":""}`,children:[u.jsxs("div",{onClick:n,className:"cursor-pointer font-semibold text-lg text-gray-800 flex-grow",children:[t.name,i&&u.jsx("span",{className:"text-sm font-normal text-gray-500",children:" (saving...)"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>r(t),disabled:!e,className:"text-gray-500 hover:text-blue-600 p-2 rounded-full hover:bg-gray-100 disabled:opacity-50",children:u.jsx(vo,{size:22})}),u.jsx("button",{onClick:()=>s(t.id),disabled:!e,className:"text-gray-500 hover:text-red-600 p-2 rounded-full hover:bg-gray-100 disabled:opacity-50",children:u.jsx(rr,{size:22})})]})]})},m5=({setHeaderTitle:t})=>{const{subjectId:e}=Xr(),n=Nt(),{currentUser:r}=Mt(),{data:s}=Kt(["personal_notes",e]);k.useEffect(()=>{t((s==null?void 0:s.name)||"Chapters")},[s,t]);const i=k.useMemo(()=>e?["personal_notes",e,"chapters"]:null,[e]),{data:o,loading:a,deleteItem:l,isOnline:d,fromCache:h,hasPendingWrites:m}=mn(i),[p,E]=k.useState(""),[N,S]=k.useState(!1),[A,w]=k.useState(null),[v,y]=k.useState(""),T=async _=>{await l(_,!1)},j=_=>{w(_.id),y(_.name)},O=()=>u.jsx("ul",{className:"space-y-3",children:Array(4).fill(0).map((_,x)=>u.jsx("li",{className:"p-4 bg-white rounded-lg shadow-md",children:u.jsx(Re,{height:24,width:"60%"})},x))}),I=()=>u.jsxs("div",{className:"text-center mt-10",children:[u.jsx(LI,{size:64,className:"mx-auto text-gray-300"}),u.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mt-4",children:"No Chapters Yet"}),u.jsx("p",{className:"text-gray-500 mt-2",children:'Click "Add Chapter" to organize your notes.'})]});return o===null?u.jsx("div",{className:"max-w-4xl mx-auto p-4 sm:p-6",children:u.jsx(O,{})}):u.jsx("div",{className:"p-4 sm:p-6 min-h-screen bg-gray-50",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsxs(Et,{to:"/personal-notes",className:"flex items-center text-gray-600 hover:text-gray-800 p-2 rounded-lg hover:bg-gray-200 transition-colors",children:[u.jsx(Tn,{size:24,className:"mr-2"}),u.jsx("span",{className:"font-semibold hidden sm:inline",children:"Back to Subjects"})]}),u.jsx("h1",{className:"text-xl font-bold text-gray-800",children:(s==null?void 0:s.name)||"Chapters"}),r&&u.jsxs("button",{onClick:()=>S(!0),disabled:!d||N||A,className:"inline-flex items-center px-4 py-2 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600 disabled:opacity-50",children:[u.jsx(Sn,{className:"mr-2"}),d?"Add Chapter":"Offline"]})]}),u.jsx(Jt,{isOnline:d,fromCache:h,hasPendingWrites:m}),N&&u.jsx("div",{className:"my-4 p-4 bg-white rounded-lg shadow-md border"}),A&&u.jsx("div",{className:"my-4 p-4 bg-white rounded-lg shadow-md border"}),u.jsx("div",{className:"mt-4",children:a&&o.length===0?u.jsx(O,{}):o.length>0?u.jsx("ul",{className:"space-y-3",children:o.map(_=>u.jsx(p5,{chapter:_,subjectId:e,isOnline:d,onNavigate:n,onRenameClick:j,onDeleteClick:T},_.id))}):u.jsx(I,{})})]})})},p5=({chapter:t,subjectId:e,isOnline:n,onNavigate:r,onRenameClick:s,onDeleteClick:i})=>{var a;const o=(a=t._metadata)==null?void 0:a.hasPendingWrites;return u.jsxs("li",{className:`flex justify-between items-center p-4 bg-white rounded-lg shadow-md transition-shadow hover:shadow-lg ${o?"opacity-60":""}`,children:[u.jsxs("div",{onClick:()=>r(`/personal-notes/${e}/${t.id}`),className:"cursor-pointer font-semibold text-lg text-gray-800 flex-grow",children:[t.name,o&&u.jsx("span",{className:"text-sm font-normal text-gray-500",children:" (saving...)"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>s(t),disabled:!n,className:"text-gray-500 hover:text-blue-600 p-2 rounded-full hover:bg-gray-100 disabled:opacity-50",children:u.jsx(vo,{size:22})}),u.jsx("button",{onClick:()=>i(t.id),disabled:!n,className:"text-gray-500 hover:text-red-600 p-2 rounded-full hover:bg-gray-100 disabled:opacity-50",children:u.jsx(rr,{size:22})})]})]})},g5=({setHeaderTitle:t})=>{const{subjectId:e,chapterId:n}=Xr(),r=Nt(),{currentUser:s}=Mt(),{data:i,loading:o}=Kt(["personal_notes",e,"chapters",n]);k.useEffect(()=>{t((i==null?void 0:i.name)||"Notes")},[i,t]);const a=k.useMemo(()=>n?`personal_notes_items_${n}`:null,[n]),{value:l,setValue:d}=Tl(a,[]),[h,m]=k.useState(""),[p,E]=k.useState(!1),N=k.useCallback(T=>{const j={...T,id:`local_${Date.now()}`,createdAt:new Date().toISOString()};d(O=>[...O,j])},[d]),S=k.useCallback(T=>{window.confirm("Are you sure you want to permanently delete this note?")&&d(j=>j.filter(O=>O.id!==T))},[d]),A=()=>{h.trim()!==""&&(N({name:h.trim(),content:""}),m(""),E(!1))},w=T=>{S(T)},v=()=>u.jsx("ul",{className:"space-y-3",children:Array(5).fill(0).map((T,j)=>u.jsx("li",{className:"p-4 bg-white rounded-lg shadow-md",children:u.jsx(Re,{height:20,width:"70%"})},j))}),y=()=>u.jsxs("div",{className:"text-center py-20",children:[u.jsx($I,{size:80,className:"mx-auto text-gray-300"}),u.jsx("h3",{className:"text-2xl font-bold text-gray-700 mt-4",children:"No Notes Yet"}),u.jsx("p",{className:"text-gray-500 mt-2",children:"Create the first note in this chapter to get started."})]});return o?u.jsx("div",{className:"max-w-4xl mx-auto p-4 sm:p-6",children:u.jsx(v,{})}):u.jsx("div",{className:"p-4 sm:p-6 min-h-screen bg-gray-50",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsxs(Et,{to:`/personal-notes/${e}`,className:"flex items-center text-gray-600 hover:text-gray-800 p-2 rounded-lg hover:bg-gray-200",children:[u.jsx(Tn,{size:24,className:"mr-2"}),u.jsx("span",{className:"font-semibold hidden sm:inline",children:"Back to Chapters"})]}),s&&u.jsxs("button",{onClick:()=>E(!0),className:"inline-flex items-center px-4 py-2 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600",children:[u.jsx(Sn,{className:"mr-2"}),"Add Item"]})]}),p&&u.jsxs("div",{className:"my-4 p-4 bg-white rounded-lg shadow-md border",children:[u.jsx("input",{type:"text",value:h,onChange:T=>m(T.target.value),placeholder:"New note title",className:"border p-2 w-full mb-2 rounded-md",autoFocus:!0}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300",children:"Cancel"}),u.jsx("button",{onClick:A,className:"px-4 py-2 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600",children:"Save"})]})]}),u.jsx("div",{className:"mt-4",children:l&&l.length>0?u.jsx("ul",{className:"space-y-3",children:l.map(T=>u.jsx(y5,{item:T,subjectId:e,chapterId:n,onNavigate:r,onDelete:w},T.id))}):u.jsx(y,{})})]})})},y5=({item:t,subjectId:e,chapterId:n,onNavigate:r,onDelete:s})=>u.jsxs("li",{className:"flex justify-between items-center p-4 bg-white rounded-lg shadow-md transition-shadow hover:shadow-lg",children:[u.jsx("div",{onClick:()=>r(`/personal-notes/${e}/${n}/${t.id}`),className:"cursor-pointer font-semibold text-lg text-gray-800 flex-grow",children:t.name}),u.jsx("button",{onClick:()=>s(t.id),className:"text-gray-500 hover:text-red-600 p-2 rounded-full hover:bg-gray-100",children:u.jsx(rr,{size:22})})]}),v5=({setHeaderTitle:t})=>{const{subjectId:e,chapterId:n,itemId:r}=Xr();Nt();const s=`personal_notes_items_${n}`,{value:i,setValue:o}=Tl(s,[]),[a,l]=k.useState(null),[d,h]=k.useState(""),[m,p]=k.useState(!1),[E,N]=k.useState(!0);k.useEffect(()=>{const w=i.find(v=>v.id===r);w?(l(w),h(w.content||""),t(w.name||"Edit Note")):l(void 0),N(!1)},[r,i,t]);const S=k.useCallback(()=>{if(!a)return;p(!0);const w=i.map(v=>v.id===r?{...v,content:d,updatedAt:new Date().toISOString()}:v);o(w),setTimeout(()=>{re.success("Note saved locally!"),p(!1)},500)},[a,d,r,i,o]),A=`/personal-notes/${e}/${n}`;return E?u.jsx("div",{className:"p-6",children:"Loading note..."}):a===void 0?u.jsxs("div",{className:"p-6 max-w-4xl mx-auto text-center",children:[u.jsx($s,{size:64,className:"mx-auto text-red-400 mb-4"}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Note Not Found"}),u.jsx("p",{className:"text-gray-600 mt-2",children:"The note you are looking for does not exist or may have been deleted."}),u.jsx(Et,{to:A,className:"mt-6 inline-block px-6 py-2 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-600",children:"Go Back to Chapter"})]}):u.jsx("div",{className:"p-4 sm:p-6 min-h-screen bg-gray-50",children:u.jsxs("div",{className:"max-w-4xl mx-auto h-full flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsxs(Et,{to:A,className:"flex items-center text-gray-600 hover:text-gray-800 p-2 rounded-lg hover:bg-gray-200 transition-colors",children:[u.jsx(Tn,{size:24,className:"mr-2"}),u.jsx("span",{className:"font-semibold hidden sm:inline",children:"Back to Items"})]}),u.jsx("h1",{className:"text-xl font-bold text-gray-800 truncate",children:a==null?void 0:a.name}),u.jsxs("button",{onClick:S,disabled:m,className:"inline-flex items-center px-4 py-2 bg-green-500 text-white font-semibold rounded-lg shadow-md hover:bg-green-600 disabled:opacity-50",children:[u.jsx(yo,{className:"mr-2"}),m?"Saving...":"Save Note"]})]}),u.jsx("div",{className:"flex-grow flex flex-col bg-white rounded-lg shadow-md",children:u.jsx("textarea",{value:d,onChange:w=>h(w.target.value),placeholder:"Start writing your note here... Your changes are saved locally to this device.",className:"w-full h-full flex-grow p-6 border-none outline-none resize-none bg-transparent text-lg leading-relaxed",spellCheck:"false"})})]})})},_5=({setHeaderTitle:t})=>{const{data:e,loading:n,deleteItem:r,isOnline:s,fromCache:i,hasPendingWrites:o}=mn("resources");k.useEffect(()=>{t==null||t("Resources")},[t]);const[a,l]=k.useState(""),[d,h]=k.useState(!1),[m,p]=k.useState(null),[E,N]=k.useState(""),[S,A]=k.useState(""),w=Nt(),{currentUser:v}=Mt(),y=k.useMemo(()=>e?e.filter(x=>x.name.toLowerCase().includes(S.toLowerCase())):[],[e,S]),T=async x=>{await r(x,!1)},j=x=>{p(x.id),N(x.name)},O=x=>{w(`/resources/${x}`)},I=()=>u.jsx("div",{className:"space-y-3",children:Array(4).fill().map((x,C)=>u.jsx("div",{className:"p-6 bg-white rounded-xl shadow-sm border border-gray-100",children:u.jsx(Re,{height:28,width:"60%"})},C))}),_=()=>u.jsxs("div",{className:"text-center py-20",children:[u.jsx(FI,{size:80,className:"mx-auto text-gray-300"}),u.jsx("h3",{className:"text-2xl font-bold text-gray-700 mt-4",children:"No Resource Categories"}),u.jsx("p",{className:"text-gray-500 mt-2",children:"Create the first category to start adding resources."})]});return e?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-6",children:u.jsxs("div",{className:"max-w-6xl mx-auto",children:[u.jsx("div",{className:"mb-8",children:u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Resources"}),v&&u.jsxs("button",{onClick:()=>h(!0),disabled:!s,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-semibold rounded-xl shadow-lg hover:bg-blue-700 disabled:opacity-50",children:[u.jsx(Sn,{className:"mr-2"}),s?"Add Category":"Offline"]})]})}),u.jsx(Jt,{isOnline:s,fromCache:i,hasPendingWrites:o}),d&&u.jsx("div",{children:"Add form here..."}),m&&u.jsx("div",{children:"Rename form here..."}),u.jsx("div",{className:"mt-6",children:n&&y.length===0?u.jsx(I,{}):y.length>0?u.jsx("div",{className:"space-y-3",children:y.map(x=>u.jsx(x5,{category:x,currentUser:v,isOnline:s,onNavigate:O,onRenameClick:j,onDeleteClick:T},x.id))}):u.jsx(_,{})})]})}):u.jsx("div",{className:"max-w-6xl mx-auto p-6",children:u.jsx(I,{})})},x5=({category:t,currentUser:e,isOnline:n,onNavigate:r,onRenameClick:s,onDeleteClick:i})=>{var a;const o=(a=t._metadata)==null?void 0:a.hasPendingWrites;return u.jsx("div",{className:`group bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-lg hover:border-blue-200 transition-all duration-300 ${o?"opacity-60":""}`,children:u.jsxs("div",{className:"p-6 flex items-center justify-between",children:[u.jsxs("div",{onClick:()=>r(t.id),className:"flex items-center space-x-4 cursor-pointer flex-grow",children:[u.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:u.jsx(Gj,{className:"text-blue-600"})}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-semibold text-xl text-gray-900 group-hover:text-blue-600",children:[t.name,o&&u.jsx("span",{className:"text-sm font-normal text-gray-500",children:" (saving...)"})]}),u.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Click to view resources"})]})]}),u.jsx("div",{className:"flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>s(t),disabled:!n,className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg disabled:opacity-50",children:u.jsx(vo,{className:"text-lg"})}),u.jsx("button",{onClick:()=>i(t.id),disabled:!n,className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg disabled:opacity-50",children:u.jsx(rr,{className:"text-lg"})})]})})]})})},w5=({setHeaderTitle:t})=>{const{categoryId:e}=Xr(),n=Nt(),{currentUser:r}=Mt(),{data:s}=Kt(["resources",e]);k.useEffect(()=>{t((s==null?void 0:s.name)||"Chapters")},[s,t]);const{data:i,loading:o,deleteItem:a,isOnline:l,fromCache:d,hasPendingWrites:h}=mn(["resources",e,"chapters"]),[m,p]=k.useState(""),[E,N]=k.useState(!1),[S,A]=k.useState(null),[w,v]=k.useState(""),[y,T]=k.useState(""),j=k.useMemo(()=>i?i.filter(P=>P.name.toLowerCase().includes(y.toLowerCase())):[],[i,y]),O=async P=>{await a(P,!1)},I=P=>{A(P.id),v(P.name)},_=P=>{n(`/resources/${e}/${P}`)},x=()=>u.jsx("div",{className:"space-y-3",children:Array(4).fill().map((P,D)=>u.jsx("div",{className:"p-6 bg-white rounded-xl shadow-sm border border-gray-100",children:u.jsx(Re,{height:28,width:"60%"})},D))}),C=()=>u.jsxs("div",{className:"text-center py-20",children:[u.jsx(LI,{size:80,className:"mx-auto text-gray-300"}),u.jsx("h3",{className:"text-2xl font-bold text-gray-700 mt-4",children:"No Chapters Yet"}),u.jsx("p",{className:"text-gray-500 mt-2",children:"Create the first chapter to start adding resources."})]});return i?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-purple-50 p-6",children:u.jsxs("div",{className:"max-w-6xl mx-auto",children:[u.jsx("div",{className:"mb-8",children:u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx(Et,{to:"/resources",className:"p-2 rounded-full hover:bg-gray-200 transition-colors",children:u.jsx(Tn,{size:24})}),u.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:(s==null?void 0:s.name)||"Chapters"}),r&&u.jsxs("button",{onClick:()=>N(!0),disabled:!l,className:"inline-flex items-center px-6 py-3 bg-purple-600 text-white font-semibold rounded-xl shadow-lg hover:bg-purple-700 disabled:opacity-50",children:[u.jsx(Sn,{className:"mr-2"}),l?"Add Chapter":"Offline"]})]})}),u.jsx(Jt,{isOnline:l,fromCache:d,hasPendingWrites:h}),E&&u.jsx("div",{children:"Add form here..."}),S&&u.jsx("div",{children:"Rename form here..."}),u.jsx("div",{className:"mt-6",children:o&&j.length===0?u.jsx(x,{}):j.length>0?u.jsx("div",{className:"space-y-3",children:j.map((P,D)=>u.jsx(E5,{chapter:P,index:D,currentUser:r,isOnline:l,onNavigate:_,onRenameClick:I,onDeleteClick:O},P.id))}):u.jsx(C,{})})]})}):u.jsx("div",{className:"max-w-6xl mx-auto p-6",children:u.jsx(x,{})})},E5=({chapter:t,index:e,currentUser:n,isOnline:r,onNavigate:s,onRenameClick:i,onDeleteClick:o})=>{var h;const a=(h=t._metadata)==null?void 0:h.hasPendingWrites,[l,d]=k.useState(!1);return u.jsx("div",{className:`group bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-lg hover:border-purple-200 transition-all duration-300 ${a?"opacity-60":""}`,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:u.jsxs("div",{className:"p-6 flex items-center justify-between",children:[u.jsxs("div",{onClick:()=>s(t.id),className:"flex items-center space-x-4 cursor-pointer flex-grow",children:[u.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:u.jsx(Hj,{className:"text-purple-600"})}),u.jsxs("div",{children:[u.jsxs("h3",{className:"font-semibold text-xl text-gray-900 group-hover:text-purple-600",children:[t.name,a&&u.jsx("span",{className:"text-sm font-normal text-gray-500",children:" (saving...)"})]}),u.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["Chapter ",e+1]})]})]}),u.jsx("div",{className:`flex items-center space-x-2 ml-4 transition-opacity duration-300 ${l?"opacity-100":"opacity-0"}`,children:n&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>i(t),disabled:!r,className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg disabled:opacity-50",children:u.jsx(vo,{className:"text-lg"})}),u.jsx("button",{onClick:()=>o(t.id),disabled:!r,className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg disabled:opacity-50",children:u.jsx(rr,{className:"text-lg"})})]})})]})})},I5=({setHeaderTitle:t})=>{const{categoryId:e,chapterId:n}=Xr(),{currentUser:r}=Mt();Kt(["resources",e]);const{data:s}=Kt(["resources",e,"chapters",n]);k.useEffect(()=>{t((s==null?void 0:s.name)||"Items")},[s,t]);const{data:i,loading:o,addItem:a,deleteItem:l,isOnline:d,fromCache:h,hasPendingWrites:m}=mn(["resources",e,"chapters",n,"items"]),[p,E]=k.useState(""),[N,S]=k.useState(""),[A,w]=k.useState(!1),[v,y]=k.useState(""),T=k.useMemo(()=>i?i.filter(P=>P.name.toLowerCase().includes(v.toLowerCase())||P.link.toLowerCase().includes(v.toLowerCase())):[],[i,v]),j=async()=>{p.trim()===""||N.trim()===""||(await a({name:p.trim(),link:N.trim()}),E(""),S(""),w(!1))},O=async P=>{await l(P,!1)},I=P=>{try{const D=new URL(P).hostname;if(D.includes("youtube.com")||D.includes("youtu.be"))return u.jsx($j,{className:"text-red-500 text-xl"});if(D.includes("docs.google.com")||P.endsWith(".pdf"))return u.jsx(Kj,{className:"text-blue-500 text-xl"})}catch{}return u.jsx(Qj,{className:"text-gray-500 text-xl"})},_=P=>{try{return new URL(P).hostname}catch{return P}},x=()=>u.jsx("div",{className:"space-y-3",children:Array(5).fill().map((P,D)=>u.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-sm border border-gray-100 flex items-center space-x-4",children:[u.jsx(Re,{circle:!0,height:48,width:48}),u.jsxs("div",{className:"flex-grow",children:[u.jsx(Re,{height:24,width:"70%"}),u.jsx(Re,{height:16,width:"40%"})]})]},D))}),C=()=>u.jsxs("div",{className:"text-center py-20",children:[u.jsx(Cj,{size:80,className:"mx-auto text-gray-300"}),u.jsx("h3",{className:"text-2xl font-bold text-gray-700 mt-4",children:"No Items Yet"}),u.jsx("p",{className:"text-gray-500 mt-2",children:"Add the first resource link to this chapter."})]});return i?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-indigo-50 p-6",children:u.jsxs("div",{className:"max-w-6xl mx-auto",children:[u.jsx("div",{className:"mb-8",children:u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx(Et,{to:`/resources/${e}`,className:"p-2 rounded-full hover:bg-gray-200 transition-colors",children:u.jsx(Tn,{size:24})}),u.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:(s==null?void 0:s.name)||"Items"}),r&&u.jsxs("button",{onClick:()=>w(!0),disabled:!d,className:"inline-flex items-center px-6 py-3 bg-indigo-600 text-white font-semibold rounded-xl shadow-lg hover:bg-indigo-700 disabled:opacity-50",children:[u.jsx(Sn,{className:"mr-2"}),d?"Add Item":"Offline"]})]})}),u.jsx(Jt,{isOnline:d,fromCache:h,hasPendingWrites:m}),A&&u.jsxs("div",{className:"mb-6 bg-white rounded-xl shadow-lg p-6 border",children:[u.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Add New Resource"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("input",{type:"text",value:p,onChange:P=>E(P.target.value),placeholder:"Resource Name (e.g., 'React Hooks Tutorial')",className:"w-full p-2 border border-gray-300 rounded-lg"}),u.jsx("input",{type:"text",value:N,onChange:P=>S(P.target.value),placeholder:"URL Link (e.g., 'https://youtube.com/...')",className:"w-full p-2 border border-gray-300 rounded-lg"})]}),u.jsxs("div",{className:"flex justify-end space-x-3 pt-4 mt-4 border-t",children:[u.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300",children:"Cancel"}),u.jsx("button",{onClick:j,disabled:!p.trim()||!N.trim()||!d,className:"px-6 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 disabled:opacity-50",children:d?"Save":"Offline"})]})]}),u.jsx("div",{className:"mt-6",children:o&&T.length===0?u.jsx(x,{}):T.length>0?u.jsx("div",{className:"space-y-3",children:T.map(P=>u.jsx(b5,{item:P,currentUser:r,isOnline:d,onDeleteClick:O,getResourceIcon:I,getDomain:_},P.id))}):u.jsx(C,{})})]})}):u.jsx("div",{className:"max-w-6xl mx-auto p-6",children:u.jsx(x,{})})},b5=({item:t,currentUser:e,isOnline:n,onDeleteClick:r,getResourceIcon:s,getDomain:i})=>{var a;const o=(a=t._metadata)==null?void 0:a.hasPendingWrites;return u.jsx("div",{className:`group bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-lg hover:border-indigo-200 transition-all duration-300 ${o?"opacity-60":""}`,children:u.jsxs("div",{className:"p-6 flex items-center justify-between",children:[u.jsxs("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-4 flex-grow",children:[u.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center bg-gray-100 group-hover:bg-indigo-100 transition-colors duration-300",children:s(t.link)}),u.jsxs("div",{className:"flex-grow",children:[u.jsxs("h3",{className:"font-semibold text-xl text-gray-900 group-hover:text-indigo-600",children:[t.name,o&&u.jsx("span",{className:"text-sm font-normal text-gray-500",children:" (saving...)"})]}),u.jsxs("p",{className:"text-gray-500 text-sm flex items-center",children:[u.jsx("span",{className:"mr-2",children:""}),i(t.link)]})]})]}),u.jsxs("div",{className:"flex items-center space-x-2 ml-4 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg",children:u.jsx(Xj,{className:"text-lg"})}),e&&u.jsx("button",{onClick:()=>r(t.id),disabled:!n,className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg disabled:opacity-50",children:u.jsx(rr,{className:"text-lg"})})]})]})})},T5=({scheduleDays:t})=>{const[e,n]=k.useState(null),r=["Sunday","Monday","Tuesday","Wednesday","Thursday"],s=k.useMemo(()=>{if(!t)return[];const m=new Set;return Object.values(t).forEach(p=>{p.forEach(E=>m.add(E.time))}),Array.from(m).sort()},[t]),i=k.useMemo(()=>Object.values(t||{}).some(m=>m.length>0),[t]),o=m=>{const p=["from-blue-500 to-blue-600","from-purple-500 to-purple-600","from-green-500 to-green-600","from-orange-500 to-orange-600","from-red-500 to-red-600","from-indigo-500 to-indigo-600","from-pink-500 to-pink-600","from-teal-500 to-teal-600","from-cyan-500 to-cyan-600","from-emerald-500 to-emerald-600"],E=m.split("").reduce((N,S)=>(N<<5)-N+S.charCodeAt(0),0);return p[Math.abs(E)%p.length]},a=()=>u.jsxs("div",{className:"flex flex-col items-center justify-center min-h-96 px-6 py-12",children:[u.jsxs("div",{className:"relative mb-8",children:[u.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-gray-100 to-gray-200 rounded-3xl flex items-center justify-center shadow-lg",children:u.jsx(Cm,{className:"w-12 h-12 text-gray-400"})}),u.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center shadow-md",children:u.jsx("span",{className:"text-white text-sm font-bold",children:"!"})})]}),u.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4 text-center",children:"No Schedule Available"}),u.jsx("p",{className:"text-gray-600 text-center max-w-md leading-relaxed mb-6",children:"Your weekly class schedule is currently empty. Contact your administrator to add classes or check back later."}),u.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-xl p-4 max-w-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("span",{className:"text-blue-600 text-lg",children:""}),u.jsx("span",{className:"font-semibold text-blue-900 text-sm",children:"Quick Tip"})]}),u.jsx("p",{className:"text-blue-700 text-sm",children:"Schedules are typically updated at the beginning of each semester."})]})]});if(!i)return u.jsx(a,{});const l=({classInfo:m,day:p,time:E})=>{const N=o(m.subject),S=(e==null?void 0:e.subject)===m.subject&&(e==null?void 0:e.day)===p&&(e==null?void 0:e.time)===E;return u.jsxs("button",{className:`
          relative w-full h-20 bg-gradient-to-br ${N} rounded-xl p-3 text-white shadow-md
          transition-all duration-300 transform active:scale-95 hover:scale-105 hover:shadow-lg
          ${S?"ring-4 ring-blue-300 ring-opacity-60 scale-105":""}
          focus:outline-none focus:ring-4 focus:ring-blue-300 focus:ring-opacity-60
        `,onClick:()=>n({...m,day:p,time:E}),children:[u.jsxs("div",{className:"flex flex-col h-full justify-between text-left",children:[u.jsxs("div",{className:"flex-1 min-h-0",children:[u.jsx("h4",{className:"font-bold text-sm leading-tight mb-1 truncate",title:m.subject,children:m.subject}),u.jsx("p",{className:"text-xs opacity-90 truncate",title:m.teacher,children:m.teacher})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs opacity-80",children:[u.jsx(Cg,{className:"w-3 h-3 flex-shrink-0"}),u.jsx("span",{className:"font-medium",children:E.slice(0,5)})]})]}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-500 rounded-xl transform -skew-x-12"})]})},d=()=>u.jsx("div",{className:"w-full h-20 flex items-center justify-center border-2 border-dashed border-gray-200 rounded-xl hover:border-blue-200 hover:bg-blue-50/30 transition-all duration-200",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-4 h-4 mx-auto mb-1 rounded-full bg-gray-200"}),u.jsx("span",{className:"text-gray-400 text-xs font-medium",children:"Free"})]})}),h=m=>{const p=["bg-orange-500","bg-yellow-500","bg-green-500","bg-blue-500","bg-indigo-500"];return p[m%p.length]};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-2xl shadow-sm border border-gray-100",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl shadow-md",children:u.jsx(Cm,{className:"w-6 h-6 text-white"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Weekly Schedule"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Tap any class for details"})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("div",{className:"text-sm font-semibold text-gray-700",children:[s.length," Periods"]}),u.jsxs("div",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full mt-1",children:[r.length," Days"]})]})]}),u.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("div",{className:"min-w-max",children:[u.jsxs("div",{className:"flex bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:[u.jsxs("div",{className:"flex-shrink-0 w-32 p-4 border-r border-blue-400 font-bold flex items-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700",children:[u.jsx(sl,{className:"w-4 h-4"})," Day"]}),u.jsx("div",{className:"flex",children:s.map((m,p)=>u.jsx("div",{className:`flex-shrink-0 w-36 p-4 text-center font-semibold ${p<s.length-1?"border-r border-blue-400":""}`,children:u.jsxs("div",{className:"flex flex-col items-center gap-1",children:[u.jsx(no,{className:"w-4 h-4 opacity-90"}),u.jsx("span",{className:"text-sm",children:m})]})},m))})]}),u.jsx("div",{className:"max-h-96 overflow-y-auto",children:r.map((m,p)=>u.jsxs("div",{className:`flex border-b border-gray-200 hover:bg-blue-50/30 transition-all duration-200 ${p%2===0?"bg-white":"bg-gray-50/50"}`,children:[u.jsxs("div",{className:"flex-shrink-0 w-32 p-4 border-r border-gray-200 font-semibold text-gray-800 bg-gray-50/80 flex items-center gap-2",children:[u.jsx("div",{className:`w-3 h-3 rounded-full ${h(p)}`}),u.jsx("span",{className:"text-sm",children:m})]}),u.jsx("div",{className:"flex",children:s.map((E,N)=>{const S=(t[m]||[]).find(A=>A.time===E);return u.jsx("div",{className:`flex-shrink-0 w-36 p-3 ${N<s.length-1?"border-r border-gray-100":""}`,children:S?u.jsx(l,{classInfo:S,day:m,time:E}):u.jsx(d,{})},E)})})]},m))})]})})}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200 rounded-xl p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-blue-700",children:Object.values(t).flat().length}),u.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Total Classes"})]}),u.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-200 rounded-xl p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-purple-700",children:new Set(Object.values(t).flat().map(m=>m.subject)).size}),u.jsx("div",{className:"text-xs text-purple-600 font-medium",children:"Subjects"})]}),u.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 border border-green-200 rounded-xl p-4 text-center",children:[u.jsx("div",{className:"text-2xl font-bold text-green-700",children:s.length*r.length}),u.jsx("div",{className:"text-xs text-green-600 font-medium",children:"Total Slots"})]})]}),e&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end justify-center z-50",children:u.jsxs("div",{className:"bg-white rounded-t-3xl w-full max-w-md p-6 transform transition-transform duration-300 animate-slide-up",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-4 h-4 rounded-full bg-gradient-to-r ${o(e.subject)}`}),u.jsx("h3",{className:"text-xl font-bold text-gray-900",children:e.subject})]}),u.jsx("button",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200 transition-colors",onClick:()=>n(null),children:u.jsx(Pg,{className:"w-5 h-5 text-gray-600"})})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-xl",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:u.jsx(Rg,{className:"w-5 h-5 text-blue-600"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"Instructor"}),u.jsx("p",{className:"text-gray-800 font-semibold",children:e.teacher})]})]}),u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-xl",children:[u.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:u.jsx(no,{className:"w-5 h-5 text-green-600"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Time"}),u.jsx("p",{className:"text-gray-800 font-semibold",children:e.time})]})]}),u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-purple-50 rounded-xl",children:[u.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center",children:u.jsx(sl,{className:"w-5 h-5 text-purple-600"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-purple-600 font-medium",children:"Day"}),u.jsx("p",{className:"text-gray-800 font-semibold",children:e.day})]})]})]}),u.jsx("button",{className:"w-full mt-6 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold py-4 rounded-xl hover:from-blue-600 hover:to-purple-700 transition-all duration-200 active:scale-95",onClick:()=>n(null),children:"Close Details"})]})}),u.jsx("style",{jsx:!0,children:`
        @keyframes slide-up {
          from { transform: translateY(100%); }
          to { transform: translateY(0); }
        }
        .animate-slide-up {
          animation: slide-up 0.3s ease-out;
        }
      `})]})},S5=({isOpen:t,onClose:e,initialTimeSlots:n,onSave:r,isOnline:s})=>{const[i,o]=k.useState([]),[a,l]=k.useState(!1),[d,h]=k.useState({});if(k.useEffect(()=>{t&&(o(n||[]),h({}))},[t,n]),!t)return null;const m=(y,T)=>y.trim()?/^\d{1,2}:\d{2}$/.test(y)?i.filter((j,O)=>O!==T&&j===y).length>0?"Duplicate time not allowed.":null:"Invalid time format (HH:MM).":"Time cannot be empty.",p=()=>o([...i,""]),E=y=>{const T=[...i];T.splice(y,1),o(T),h(j=>{const O={...j};return delete O[y],O})},N=(y,T)=>{const j=[...i];j[y]=T,o(j);const O=m(T,y);h(I=>{const _={...I};return O?_[y]=O:delete _[y],_})},S=async()=>{l(!0);try{await r(i),l(!1),e()}catch(y){console.error("Save failed:",y),l(!1)}},A=y=>{y.target===y.currentTarget&&e()},w=({time:y,index:T})=>u.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[u.jsx(no,{className:"text-gray-500"}),u.jsx("input",{type:"text",placeholder:"HH:MM",value:y,onChange:j=>N(T,j.target.value),className:`flex-1 border rounded-lg px-3 py-2 focus:outline-none ${d[T]?"border-red-500":"border-gray-300"}`}),u.jsx("button",{type:"button",onClick:()=>E(T),className:"text-red-500 hover:text-red-700",children:u.jsx(Dd,{size:20})})]}),v=!s||a||Object.keys(d).length>0||i.filter(y=>y.trim()).length===0;return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-end sm:items-center justify-center z-50 p-4",onClick:A,children:u.jsxs("div",{className:"bg-white rounded-t-3xl sm:rounded-2xl w-full max-w-lg max-h-[90vh] flex flex-col shadow-2xl transform transition-transform duration-300",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[u.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[u.jsx(Oj,{className:"text-gray-600"}),"Edit Time Slots"]}),u.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:u.jsx(Ag,{size:24})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[i.map((y,T)=>u.jsxs("div",{children:[u.jsx(w,{time:y,index:T}),d[T]&&u.jsxs("p",{className:"text-red-500 text-sm ml-7 flex items-center gap-1",children:[u.jsx($s,{})," ",d[T]]})]},T)),u.jsxs("button",{type:"button",onClick:p,className:"flex items-center gap-2 text-green-600 font-medium mt-4",children:[u.jsx(yj,{size:20}),"Add Time Slot"]})]}),u.jsx("div",{className:"p-6 border-t border-gray-100 bg-gray-50 rounded-b-3xl sm:rounded-b-2xl",children:u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:e,className:"flex-1 bg-white text-gray-700 border border-gray-300 py-3 rounded-xl font-medium hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 active:scale-95",children:"Cancel"}),u.jsx("button",{onClick:S,disabled:v,className:`flex-1 py-3 rounded-xl font-medium transition-all duration-200 active:scale-95 flex items-center justify-center gap-2 ${v?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-green-600 text-white hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg"}`,children:a?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}),u.jsx("span",{children:"Saving..."})]}):s?u.jsxs(u.Fragment,{children:[u.jsx(yo,{className:"w-4 h-4"}),u.jsx("span",{children:"Save Changes"})]}):u.jsx("span",{children:"Offline"})})]})})]})})},z_=X.memo(({onClick:t,to:e,icon:n,children:r,variant:s="secondary",fullWidth:i=!1,disabled:o=!1})=>{}),N5=X.memo(()=>u.jsx("div",{className:"space-y-4 p-4"})),k5=({setHeaderTitle:t})=>{const{data:e,isOnline:n,fromCache:r,hasPendingWrites:s}=Kt(["schedules","first_year"]),{data:i,updateDocument:o,fromCache:a,hasPendingWrites:l}=Kt(["time_slots","default_periods"]);k.useEffect(()=>{t("Class Schedule")},[t]);const{currentUser:d}=Mt(),[h,m]=k.useState(!1),p=k.useMemo(()=>(e==null?void 0:e.days)||{},[e]),E=k.useMemo(()=>(i==null?void 0:i.periods)||[],[i]),N=r||a,S=s||l;k.useMemo(()=>{const y=Object.values(p).flat(),T=Object.keys(p).filter(_=>{var x;return((x=p[_])==null?void 0:x.length)>0}),j=new Set(y.map(_=>_.subject)).size,O=E.length*5,I=O>0?Math.round(y.length/O*100):0;return{totalClasses:y.length,activeDays:T.length,totalSubjects:j,utilization:I}},[p,E]);const A=k.useCallback(y=>{const T=[...y].sort();o({periods:T})},[o]),w=k.useCallback(()=>m(!0),[]),v=k.useCallback(()=>m(!1),[]);return!e||!i?u.jsx(N5,{}):u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50/20 px-4 py-2",children:[u.jsx("div",{className:"mb-6",children:d&&u.jsxs("div",{className:"flex gap-3 mb-4",children:[u.jsx(z_,{onClick:w,icon:no,variant:"secondary",fullWidth:!0,disabled:!n,children:n?"Edit Periods":"Offline"}),u.jsx(z_,{to:"/schedule-editor",icon:MI,variant:"primary",fullWidth:!0,disabled:!n,children:n?"Edit Schedule":"Offline"})]})}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"mb-4",children:u.jsx(Jt,{isOnline:n,fromCache:N,hasPendingWrites:S})}),u.jsx("div",{className:"mb-6",children:u.jsx(T5,{scheduleDays:p})})]}),u.jsx(S5,{isOpen:h,onClose:v,initialTimeSlots:E,onSave:A,isOnline:n})]})},WI=X.memo(({day:t,classInfo:e,index:n,timeSlots:r,onClassChange:s,onRemoveClass:i})=>u.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-3 mb-3 shadow-sm hover:shadow-md transition-shadow",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx(Cg,{className:"text-blue-500 w-4 h-4"}),u.jsx("input",{type:"text",value:e.subject||"",onChange:o=>s(t,n,{...e,subject:o.target.value}),placeholder:"Subject",className:"flex-1 border rounded-lg px-2 py-1 text-sm focus:ring-2 focus:ring-blue-400"})]}),u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx(Rg,{className:"text-purple-500 w-4 h-4"}),u.jsx("input",{type:"text",value:e.teacher||"",onChange:o=>s(t,n,{...e,teacher:o.target.value}),placeholder:"Teacher",className:"flex-1 border rounded-lg px-2 py-1 text-sm focus:ring-2 focus:ring-purple-400"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(no,{className:"text-green-500 w-4 h-4"}),u.jsxs("select",{value:e.timeSlot||"",onChange:o=>s(t,n,{...e,timeSlot:o.target.value}),className:"flex-1 border rounded-lg px-2 py-1 text-sm focus:ring-2 focus:ring-green-400",children:[u.jsx("option",{value:"",children:"Select Time"}),r.map((o,a)=>u.jsx("option",{value:o,children:o},a))]}),u.jsx("button",{onClick:()=>i(t,n),className:"ml-2 text-red-500 hover:text-red-600 p-1",children:u.jsx(Dd,{className:"w-4 h-4"})})]})]}));WI.displayName="ClassCard";const C5=()=>{const{data:t,loading:e,updateDocument:n,isOnline:r,fromCache:s,hasPendingWrites:i}=Kt(["schedules","first_year"]),{data:o,loading:a,fromCache:l,hasPendingWrites:d}=Kt(["time_slots","default_periods"]),[h,m]=k.useState({}),[p,E]=k.useState(!1),[N,S]=k.useState({}),A=Nt(),w=["Sunday","Monday","Tuesday","Wednesday","Thursday"],v=e&&!t||a&&!o,y=s||l,T=i||d,j=(o==null?void 0:o.periods)||[];k.useEffect(()=>{if(t){m(t.days||{});const Y={};Object.keys(t.days||{}).forEach(ie=>{var xe;((xe=t.days[ie])==null?void 0:xe.length)>0&&(Y[ie]=!0)}),S(Y)}},[t]);const O=k.useCallback((Y,ie,xe)=>{m(oe=>{const U={...oe};return U[Y][ie]=xe,U})},[]),I=k.useCallback(Y=>{m(ie=>{const xe={...ie};return xe[Y]||(xe[Y]=[]),xe[Y].push({subject:"",teacher:"",timeSlot:""}),xe}),S(ie=>({...ie,[Y]:!0}))},[]),_=k.useCallback((Y,ie)=>{m(xe=>{const oe={...xe};return oe[Y].splice(ie,1),oe})},[]),x=k.useCallback(Y=>{S(ie=>({...ie,[Y]:!ie[Y]}))},[]),C=k.useCallback(Y=>({Sunday:"from-pink-100 to-pink-50",Monday:"from-blue-100 to-blue-50",Tuesday:"from-green-100 to-green-50",Wednesday:"from-yellow-100 to-yellow-50",Thursday:"from-purple-100 to-purple-50"})[Y]||"from-gray-100 to-gray-50",[]),P=k.useCallback(Y=>{var ie;return((ie=h[Y])==null?void 0:ie.length)||0},[h]),D=async()=>{E(!0),(await n({days:h})).success?setTimeout(()=>A("/schedule"),800):E(!1)},R=()=>u.jsx("div",{className:"space-y-4",children:w.map((Y,ie)=>u.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[u.jsx(Re,{width:100,height:20}),u.jsxs("div",{className:"mt-2 space-y-2",children:[u.jsx(Re,{height:30}),u.jsx(Re,{height:30})]})]},ie))});return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50/20 px-4 py-2",children:[u.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4 mb-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(Et,{to:"/schedule",className:"w-10 h-10 rounded-xl bg-gray-100 flex items-center justify-center hover:bg-gray-200 transition-colors active:scale-95",children:u.jsx(Tn,{className:"w-5 h-5 text-gray-600"})}),u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Edit Schedule"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Manage your class timetable"})]}),u.jsx("button",{onClick:D,disabled:p||!r,className:`px-4 py-2 rounded-xl font-medium transition-all duration-200 active:scale-95 flex items-center gap-2 ${p||!r?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-green-600 text-white hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg"}`,children:p?u.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}):r?u.jsxs(u.Fragment,{children:[u.jsx(yo,{className:"w-4 h-4"}),u.jsx("span",{children:"Save"})]}):u.jsx("span",{children:"Offline"})})]}),u.jsx("div",{className:"mt-3",children:u.jsx(Jt,{isOnline:r,fromCache:y,hasPendingWrites:T})})]}),v?u.jsx(R,{}):u.jsx("div",{className:"space-y-4 pb-6",children:w.map((Y,ie)=>u.jsxs("div",{className:"rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[u.jsxs("button",{onClick:()=>x(Y),className:`w-full flex items-center justify-between p-4 bg-gradient-to-r ${C(Y)} hover:opacity-90 transition`,children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(sl,{className:"text-gray-700"}),u.jsx("span",{className:"font-semibold",children:Y})]}),u.jsxs("span",{className:"text-sm text-gray-600",children:[P(Y)," classes"]})]}),N[Y]&&u.jsxs("div",{className:"p-4",children:[(h[Y]||[]).map((xe,oe)=>u.jsx(WI,{day:Y,index:oe,classInfo:xe,timeSlots:j,onClassChange:O,onRemoveClass:_},oe)),u.jsxs("button",{onClick:()=>I(Y),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 mt-2",children:[u.jsx(vj,{className:"w-5 h-5"}),u.jsx("span",{children:"Add Class"})]})]})]},ie))})]})},qI=6048e5,A5=864e5,HI=6e4,KI=36e5,B_=Symbol.for("constructDateFrom");function Zn(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&B_ in t?t[B_](e):t instanceof Date?new t.constructor(e):new Date(e)}function Gt(t,e){return Zn(e||t,t)}let P5={};function Od(){return P5}function il(t,e){var a,l,d,h;const n=Od(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,s=Gt(t,e==null?void 0:e.in),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Mu(t,e){return il(t,{...e,weekStartsOn:1})}function GI(t,e){const n=Gt(t,e==null?void 0:e.in),r=n.getFullYear(),s=Zn(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=Mu(s),o=Zn(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Mu(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function $_(t){const e=Gt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function R5(t,...e){const n=Zn.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function Ea(t,e){const n=Gt(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function j5(t,e,n){const[r,s]=R5(n==null?void 0:n.in,t,e),i=Ea(r),o=Ea(s),a=+i-$_(i),l=+o-$_(o);return Math.round((a-l)/A5)}function D5(t,e){const n=GI(t,e),r=Zn(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Mu(r)}function O5(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function V5(t){return!(!O5(t)&&typeof t!="number"||isNaN(+Gt(t)))}function M5(t,e){const n=Gt(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const L5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},F5=(t,e,n)=>{let r;const s=L5[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Kh(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const U5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},z5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},B5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$5={date:Kh({formats:U5,defaultWidth:"full"}),time:Kh({formats:z5,defaultWidth:"full"}),dateTime:Kh({formats:B5,defaultWidth:"full"})},W5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},q5=(t,e,n,r)=>W5[t];function Ho(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const H5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},K5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},G5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Q5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Y5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},J5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},X5=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Z5={ordinalNumber:X5,era:Ho({values:H5,defaultWidth:"wide"}),quarter:Ho({values:K5,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ho({values:G5,defaultWidth:"wide"}),day:Ho({values:Q5,defaultWidth:"wide"}),dayPeriod:Ho({values:Y5,defaultWidth:"wide",formattingValues:J5,defaultFormattingWidth:"wide"})};function Ko(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?tD(a,m=>m.test(o)):eD(a,m=>m.test(o));let d;d=t.valueCallback?t.valueCallback(l):l,d=n.valueCallback?n.valueCallback(d):d;const h=e.slice(o.length);return{value:d,rest:h}}}function eD(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function tD(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function nD(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const rD=/^(\d+)(th|st|nd|rd)?/i,sD=/\d+/i,iD={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},oD={any:[/^b/i,/^(a|c)/i]},aD={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},lD={any:[/1/i,/2/i,/3/i,/4/i]},cD={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},uD={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},dD={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},hD={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},fD={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},mD={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},pD={ordinalNumber:nD({matchPattern:rD,parsePattern:sD,valueCallback:t=>parseInt(t,10)}),era:Ko({matchPatterns:iD,defaultMatchWidth:"wide",parsePatterns:oD,defaultParseWidth:"any"}),quarter:Ko({matchPatterns:aD,defaultMatchWidth:"wide",parsePatterns:lD,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ko({matchPatterns:cD,defaultMatchWidth:"wide",parsePatterns:uD,defaultParseWidth:"any"}),day:Ko({matchPatterns:dD,defaultMatchWidth:"wide",parsePatterns:hD,defaultParseWidth:"any"}),dayPeriod:Ko({matchPatterns:fD,defaultMatchWidth:"any",parsePatterns:mD,defaultParseWidth:"any"})},gD={code:"en-US",formatDistance:F5,formatLong:$5,formatRelative:q5,localize:Z5,match:pD,options:{weekStartsOn:0,firstWeekContainsDate:1}};function yD(t,e){const n=Gt(t,e==null?void 0:e.in);return j5(n,M5(n))+1}function vD(t,e){const n=Gt(t,e==null?void 0:e.in),r=+Mu(n)-+D5(n);return Math.round(r/qI)+1}function QI(t,e){var h,m,p,E;const n=Gt(t,e==null?void 0:e.in),r=n.getFullYear(),s=Od(),i=(e==null?void 0:e.firstWeekContainsDate)??((m=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??s.firstWeekContainsDate??((E=(p=s.locale)==null?void 0:p.options)==null?void 0:E.firstWeekContainsDate)??1,o=Zn((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=il(o,e),l=Zn((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const d=il(l,e);return+n>=+a?r+1:+n>=+d?r:r-1}function _D(t,e){var a,l,d,h;const n=Od(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=QI(t,e),i=Zn((e==null?void 0:e.in)||t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),il(i,e)}function xD(t,e){const n=Gt(t,e==null?void 0:e.in),r=+il(n,e)-+_D(n,e);return Math.round(r/qI)+1}function ye(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const dr={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return ye(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):ye(n+1,2)},d(t,e){return ye(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return ye(t.getHours()%12||12,e.length)},H(t,e){return ye(t.getHours(),e.length)},m(t,e){return ye(t.getMinutes(),e.length)},s(t,e){return ye(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return ye(s,e.length)}},si={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},W_={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return dr.y(t,e)},Y:function(t,e,n,r){const s=QI(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return ye(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):ye(i,e.length)},R:function(t,e){const n=GI(t);return ye(n,e.length)},u:function(t,e){const n=t.getFullYear();return ye(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ye(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ye(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return dr.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return ye(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=xD(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):ye(s,e.length)},I:function(t,e,n){const r=vD(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):ye(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):dr.d(t,e)},D:function(t,e,n){const r=yD(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ye(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return ye(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return ye(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return ye(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=si.noon:r===0?s=si.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=si.evening:r>=12?s=si.afternoon:r>=4?s=si.morning:s=si.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return dr.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):dr.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ye(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):ye(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):dr.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):dr.s(t,e)},S:function(t,e){return dr.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return H_(r);case"XXXX":case"XX":return ms(r);case"XXXXX":case"XXX":default:return ms(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return H_(r);case"xxxx":case"xx":return ms(r);case"xxxxx":case"xxx":default:return ms(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+q_(r,":");case"OOOO":default:return"GMT"+ms(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+q_(r,":");case"zzzz":default:return"GMT"+ms(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return ye(r,e.length)},T:function(t,e,n){return ye(+t,e.length)}};function q_(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+ye(i,2)}function H_(t,e){return t%60===0?(t>0?"-":"+")+ye(Math.abs(t)/60,2):ms(t,e)}function ms(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=ye(Math.trunc(r/60),2),i=ye(r%60,2);return n+s+e+i}const K_=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},YI=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},wD=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return K_(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",K_(r,e)).replace("{{time}}",YI(s,e))},ED={p:YI,P:wD},ID=/^D+$/,bD=/^Y+$/,TD=["D","DD","YY","YYYY"];function SD(t){return ID.test(t)}function ND(t){return bD.test(t)}function kD(t,e,n){const r=CD(t,e,n);if(console.warn(r),TD.includes(t))throw new RangeError(r)}function CD(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const AD=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,PD=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,RD=/^'([^]*?)'?$/,jD=/''/g,DD=/[a-zA-Z]/;function Am(t,e,n){var h,m,p,E;const r=Od(),s=r.locale??gD,i=r.firstWeekContainsDate??((m=(h=r.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=r.weekStartsOn??((E=(p=r.locale)==null?void 0:p.options)==null?void 0:E.weekStartsOn)??0,a=Gt(t,n==null?void 0:n.in);if(!V5(a))throw new RangeError("Invalid time value");let l=e.match(PD).map(N=>{const S=N[0];if(S==="p"||S==="P"){const A=ED[S];return A(N,s.formatLong)}return N}).join("").match(AD).map(N=>{if(N==="''")return{isToken:!1,value:"'"};const S=N[0];if(S==="'")return{isToken:!1,value:OD(N)};if(W_[S])return{isToken:!0,value:N};if(S.match(DD))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:N}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return l.map(N=>{if(!N.isToken)return N.value;const S=N.value;(ND(S)||SD(S))&&kD(S,e,String(t));const A=W_[S[0]];return A(a,S,s.localize,d)}).join("")}function OD(t){const e=t.match(RD);return e?e[1].replace(jD,"'"):t}function VD(t,e){const n=()=>Zn(e==null?void 0:e.in,NaN),s=UD(t);let i;if(s.date){const d=zD(s.date,2);i=BD(d.restDateString,d.year)}if(!i||isNaN(+i))return n();const o=+i;let a=0,l;if(s.time&&(a=$D(s.time),isNaN(a)))return n();if(s.timezone){if(l=WD(s.timezone),isNaN(l))return n()}else{const d=new Date(o+a),h=Gt(0,e==null?void 0:e.in);return h.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),h.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),h}return Gt(o+a+l,e==null?void 0:e.in)}const mc={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},MD=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,LD=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,FD=/^([+-])(\d{2})(?::?(\d{2}))?$/;function UD(t){const e={},n=t.split(mc.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],mc.timeZoneDelimiter.test(e.date)&&(e.date=t.split(mc.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const s=mc.timezone.exec(r);s?(e.time=r.replace(s[1],""),e.timezone=s[1]):e.time=r}return e}function zD(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?s:i*100,restDateString:t.slice((r[1]||r[2]).length)}}function BD(t,e){if(e===null)return new Date(NaN);const n=t.match(MD);if(!n)return new Date(NaN);const r=!!n[4],s=Go(n[1]),i=Go(n[2])-1,o=Go(n[3]),a=Go(n[4]),l=Go(n[5])-1;if(r)return QD(e,a,l)?qD(e,a,l):new Date(NaN);{const d=new Date(0);return!KD(e,i,o)||!GD(e,s)?new Date(NaN):(d.setUTCFullYear(e,i,Math.max(s,o)),d)}}function Go(t){return t?parseInt(t):1}function $D(t){const e=t.match(LD);if(!e)return NaN;const n=Gh(e[1]),r=Gh(e[2]),s=Gh(e[3]);return YD(n,r,s)?n*KI+r*HI+s*1e3:NaN}function Gh(t){return t&&parseFloat(t.replace(",","."))||0}function WD(t){if(t==="Z")return 0;const e=t.match(FD);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return JD(r,s)?n*(r*KI+s*HI):NaN}function qD(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const s=r.getUTCDay()||7,i=(e-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+i),r}const HD=[31,null,31,30,31,30,31,31,30,31,30,31];function JI(t){return t%400===0||t%4===0&&t%100!==0}function KD(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(HD[e]||(JI(t)?29:28))}function GD(t,e){return e>=1&&e<=(JI(t)?366:365)}function QD(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function YD(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function JD(t,e){return e>=0&&e<=59}const XD=({notice:t={},onDelete:e,onEdit:n,isOnline:r})=>{var N;const{currentUser:s}=Mt(),[i,o]=k.useState(!1),a=S=>{if(!(S!=null&&S.toDate))return"Just now";const A=S.toDate();return Am(A,"MMM dd, yyyy")},l=t.content??"",d=l.length>200,h=d&&!i?l.substring(0,200)+"...":l,m=()=>{e(t.id)},p=(N=t._metadata)==null?void 0:N.hasPendingWrites,E=(S="normal")=>{switch(S){case"medium":return"border-yellow-400";case"high":return"border-red-500";case"urgent":return"border-purple-600";default:return"border-blue-500"}};return u.jsx("div",{className:`
            group relative bg-white/90 backdrop-blur-sm border border-gray-200 
            rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 
            hover:border-gray-300 overflow-hidden border-l-4 
            ${E(t.priority)}
            ${p?"opacity-60 pointer-events-none":""}
        `,children:u.jsxs("div",{className:"p-6",children:[u.jsx("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 mb-4",children:u.jsx("div",{className:"flex-1 min-w-0",children:u.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-2 pr-16 sm:pr-0 leading-tight",children:[t.title||"Untitled Notice",p&&u.jsx("span",{className:"text-sm font-normal text-gray-500",children:" (saving...)"})]})})}),u.jsx("p",{className:"text-gray-700 text-sm whitespace-pre-line",children:h}),d&&u.jsxs("button",{onClick:()=>o(!i),className:"inline-flex items-center gap-1 mt-3 text-blue-600 hover:text-blue-700 font-medium text-sm",children:[i?"Show Less":"Read More",i?u.jsx(VI,{size:16}):u.jsx(OI,{size:16})]}),s&&u.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-gray-100",children:[u.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[u.jsx(no,{}),a(t.createdAt)]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>n(t),disabled:!r||p,className:"inline-flex items-center justify-center w-9 h-9 rounded-lg text-gray-600 hover:text-blue-600 hover:bg-blue-50 transition-all duration-200 disabled:opacity-50",title:r?"Edit notice":"Cannot edit while offline",children:u.jsx(MI,{size:18})}),u.jsx("button",{onClick:m,disabled:!r||p,className:"inline-flex items-center justify-center w-9 h-9 rounded-lg text-gray-600 hover:text-red-600 hover:bg-red-50 transition-all duration-200 disabled:opacity-50",title:r?"Delete notice":"Cannot delete while offline",children:u.jsx(Dd,{size:18})})]})]})]})})},ZD=({isOpen:t,onClose:e,notice:n={},onSave:r})=>{const[s,i]=k.useState(""),[o,a]=k.useState(""),[l,d]=k.useState("normal"),[h,m]=k.useState(!1),[p,E]=k.useState({}),[N,S]=k.useState(!1),A=k.useRef(null),w=k.useRef(null),v=!!(n!=null&&n.id);k.useEffect(()=>{t&&(i(n.title||""),a(n.content||""),d(n.priority||"normal"),E({}),S(!1),setTimeout(()=>{var x;return(x=A.current)==null?void 0:x.focus()},100))},[t,n]),k.useEffect(()=>{const x=s!==(n.title||"")||o!==(n.content||"")||l!==(n.priority||"normal");S(x)},[s,o,l,n]),k.useEffect(()=>{const x=C=>{C.key==="Escape"&&t&&j()};return t&&(document.addEventListener("keydown",x),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",x),document.body.style.overflow="unset"}},[t,N]);const y=x=>{x.target===x.currentTarget&&j()},T=()=>{const x={};return s.trim()?s.trim().length<3?x.title="Title must be at least 3 characters":s.trim().length>100&&(x.title="Title must be less than 100 characters"):x.title="Title is required",o.trim()?o.trim().length<10?x.content="Content must be at least 10 characters":o.trim().length>2e3&&(x.content="Content must be less than 2000 characters"):x.content="Content is required",E(x),Object.keys(x).length===0},j=()=>{N&&!window.confirm("You have unsaved changes. Are you sure you want to close?")||e()},O=async()=>{if(!T()){re.error("Please fix the errors before saving.");return}m(!0);try{await r({id:n.id,title:s.trim(),content:o.trim(),priority:l}),e()}catch(x){console.error("Save error:",x)}finally{m(!1)}},I=x=>{(x.ctrlKey||x.metaKey)&&x.key.toLowerCase()==="s"&&(x.preventDefault(),O())};if(!t)return null;const _=[{value:"normal",label:"Normal",color:"text-gray-700"},{value:"medium",label:"Medium",color:"text-yellow-600"},{value:"high",label:"High",color:"text-red-600"},{value:"urgent",label:"Urgent",color:"text-purple-600"}];return u.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-50 p-4",onClick:y,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:u.jsxs("div",{ref:w,className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden transform transition-all duration-300 scale-100",onKeyDown:I,children:[u.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4 text-white",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:u.jsx(km,{size:24})}),u.jsxs("div",{children:[u.jsx("h2",{id:"modal-title",className:"text-xl font-bold",children:v?"Edit Notice":"Create New Notice"}),u.jsx("p",{className:"text-blue-100 text-sm",children:v?"Update your notice details":"Share important information with your team"})]})]}),u.jsx("button",{onClick:j,className:"p-2 hover:bg-white/20 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-white/50","aria-label":"Close modal",children:u.jsx(Ag,{size:24})})]})}),u.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)] space-y-6",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[u.jsx(Fj,{size:16})," Notice Title ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{ref:A,type:"text",value:s,onChange:x=>i(x.target.value),className:`w-full px-4 py-3 border-2 rounded-xl transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-500/20 ${p.title?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-blue-500"}`,placeholder:"Enter a clear, descriptive title...",maxLength:"100"}),u.jsxs("div",{className:"flex justify-between items-center mt-1",children:[p.title&&u.jsxs("p",{className:"text-red-500 text-sm flex items-center gap-1",children:[u.jsx($s,{size:14})," ",p.title]}),u.jsxs("span",{className:"text-xs text-gray-500 ml-auto",children:[s.length,"/100"]})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[u.jsx(Tj,{size:16})," Priority Level"]}),u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:_.map(x=>u.jsx("button",{type:"button",onClick:()=>d(x.value),className:`p-3 rounded-lg border-2 transition-all duration-200 text-sm font-medium ${l===x.value?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:u.jsx("div",{className:`font-semibold ${x.color}`,children:x.label})},x.value))})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[u.jsx(km,{size:16})," Notice Content ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("textarea",{value:o,onChange:x=>a(x.target.value),className:`w-full px-4 py-3 border-2 rounded-xl transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-500/20 resize-none ${p.content?"border-red-300 focus:border-red-500":"border-gray-300 focus:border-blue-500"}`,placeholder:"Write your notice content here...",rows:"8",maxLength:"2000"}),u.jsxs("div",{className:"flex justify-between items-center mt-1",children:[p.content&&u.jsxs("p",{className:"text-red-500 text-sm flex items-center gap-1",children:[u.jsx($s,{size:14})," ",p.content]}),u.jsxs("span",{className:"text-xs text-gray-500 ml-auto",children:[o.length,"/2000"]})]})]})]}),u.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between",children:[u.jsxs("div",{className:"text-sm text-gray-600",children:[u.jsx("kbd",{className:"px-2 py-1 text-xs font-semibold text-gray-800 bg-gray-100 border border-gray-200 rounded-lg",children:"Ctrl + S"}),u.jsx("span",{className:"ml-2",children:"to save"})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:j,className:"px-4 py-2 text-gray-700 font-medium rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-300",disabled:h,children:"Cancel"}),u.jsx("button",{onClick:O,disabled:h||Object.keys(p).length>0,className:"inline-flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-500/30 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:h?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Saving..."]}):u.jsxs(u.Fragment,{children:[u.jsx(yo,{size:18}),v?"Update Notice":"Create Notice"]})})]})]})]})})},eO=({setHeaderTitle:t})=>{const{currentUser:e}=Mt(),[n,r]=k.useState(!1),[s,i]=k.useState(null),[o,a]=k.useState(""),[l,d]=k.useState("desc");k.useEffect(()=>t("Notices"),[t]);const h=k.useMemo(()=>Td(On(Ut,"notices"),gg("createdAt",l)),[l]),{data:m,loading:p,isOnline:E,fromCache:N,hasPendingWrites:S,addItem:A,updateItem:w,deleteItem:v}=mn(h),y=k.useMemo(()=>m?o.trim()?m.filter(D=>{var R,Y;return((R=D.title)==null?void 0:R.toLowerCase().includes(o.toLowerCase()))||((Y=D.content)==null?void 0:Y.toLowerCase().includes(o.toLowerCase()))}):m:[],[o,m]),T=()=>{i({}),r(!0)},j=D=>{i(D),r(!0)},O=()=>{r(!1),i(null)},I=async D=>{const{id:R,title:Y,content:ie,priority:xe}=D;R?await w(R,{title:Y,content:ie,priority:xe}):await A({title:Y,content:ie,priority:xe})},_=async D=>await v(D,!1),x=()=>d(D=>D==="desc"?"asc":"desc"),C=()=>u.jsx("div",{className:"space-y-4",children:[...Array(3)].map((D,R)=>u.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-sm border border-gray-100",children:[u.jsx(Re,{height:24,width:"70%",className:"mb-3"}),u.jsx(Re,{count:3})]},R))}),P=()=>u.jsxs("div",{className:"text-center py-20",children:[u.jsx(UI,{size:64,className:"mx-auto text-gray-300 mb-4"}),u.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-2",children:"No Notices Found"}),u.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:o?`We couldn't find any notices matching "${o}".`:"There are no announcements right now. Please check back later."})]});return m?u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[u.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[u.jsxs("div",{className:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Notice Board"}),u.jsx("p",{className:"text-gray-600",children:"Stay updated with the latest announcements"})]}),e&&u.jsxs("button",{onClick:T,disabled:!E,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 disabled:opacity-50",children:[u.jsx(Sn,{className:"mr-2"}),E?"Add Notice":"Offline"]})]}),u.jsx("div",{className:"bg-white/70 backdrop-blur-sm border border-gray-200 rounded-xl p-4 shadow-sm mb-6",children:u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(Jj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),u.jsx("input",{type:"text",placeholder:"Search notices...",value:o,onChange:D=>a(D.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),u.jsxs("button",{onClick:x,className:"inline-flex items-center px-4 py-3 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50",children:[u.jsx(bj,{className:"mr-2"}),l==="desc"?"Newest":"Oldest"]})]})}),u.jsx("div",{className:"mb-6",children:u.jsx(Jt,{isOnline:E,fromCache:N,hasPendingWrites:S})}),p&&y.length===0?u.jsx(C,{}):y.length>0?u.jsx("div",{className:"space-y-6",children:y.map(D=>u.jsx(XD,{notice:D,onDelete:_,onEdit:j,isOnline:E},D.id))}):u.jsx(P,{})]}),u.jsx(ZD,{isOpen:n,onClose:O,onSave:I,notice:s,isOnline:E})]}):u.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:u.jsx(C,{})})},XI=X.memo(({subject:t,stats:e,draftStatus:n,onStatusChange:r,isHistoricalDate:s})=>{const i=a=>a>=75?"text-green-600":a>=60?"text-yellow-600":"text-red-600",o=a=>a>=75?"from-green-50 to-green-100":a>=60?"from-yellow-50 to-yellow-100":"from-red-50 to-red-100";return u.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[u.jsxs("div",{className:`bg-gradient-to-r ${o(e.percentage)} p-4 border-b border-gray-100`,children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900",children:t}),u.jsxs("div",{className:"text-right",children:[u.jsxs("p",{className:`text-3xl font-bold ${i(e.percentage)}`,children:[e.percentage,"%"]}),u.jsxs("p",{className:"text-xs text-gray-600",children:[e.present," / ",e.total," classes"]})]})]}),u.jsx("div",{className:"mt-3 bg-white/50 rounded-full h-2 overflow-hidden",children:u.jsx("div",{className:`h-full transition-all duration-300 ${e.percentage>=75?"bg-green-500":e.percentage>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(e.percentage,100)}%`}})})]}),u.jsxs("div",{className:"p-4",children:[s&&u.jsxs("div",{className:"mb-3 p-2 bg-gray-100 rounded-lg flex items-center gap-2",children:[u.jsx($s,{className:"w-4 h-4 text-gray-600"}),u.jsx("span",{className:"text-xs text-gray-600",children:"Editing past attendance"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("button",{onClick:()=>r(t,"present"),className:`p-4 rounded-xl flex items-center justify-center font-semibold transition-all duration-200 active:scale-95 ${n==="present"?"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg hover:shadow-xl":"bg-gray-100 hover:bg-green-100 text-gray-700 hover:text-green-700 border-2 border-transparent hover:border-green-200"}`,children:[u.jsx(_j,{className:"mr-2 w-5 h-5"}),"Present"]}),u.jsxs("button",{onClick:()=>r(t,"absent"),className:`p-4 rounded-xl flex items-center justify-center font-semibold transition-all duration-200 active:scale-95 ${n==="absent"?"bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg hover:shadow-xl":"bg-gray-100 hover:bg-red-100 text-gray-700 hover:text-red-700 border-2 border-transparent hover:border-red-200"}`,children:[u.jsx(xj,{className:"mr-2 w-5 h-5"}),"Absent"]})]})]})]})});XI.displayName="AttendanceCard";const ZI=X.memo(()=>u.jsxs("div",{className:"p-4 space-y-6",children:[u.jsx("div",{className:"bg-white p-4 rounded-2xl shadow-sm",children:u.jsxs("div",{className:"flex justify-between items-center animate-pulse",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-32"}),u.jsx("div",{className:"h-10 bg-gray-200 rounded w-40"})]})}),u.jsx("div",{className:"space-y-4",children:[1,2,3].map(t=>u.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm animate-pulse",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("div",{className:"h-6 bg-gray-200 rounded w-20"}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"h-8 bg-gray-200 rounded w-12 mb-1"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsx("div",{className:"h-12 bg-gray-200 rounded-xl"}),u.jsx("div",{className:"h-12 bg-gray-200 rounded-xl"})]})]},t))})]}));ZI.displayName="AttendanceSkeleton";const tO=({setHeaderTitle:t})=>{const{value:e,setValue:n}=Tl("attendanceRecords",[]),[r,s]=k.useState(Am(Ea(new Date),"yyyy-MM-dd")),[i,o]=k.useState({}),[a,l]=k.useState(!1),[d,h]=k.useState(!0);k.useEffect(()=>{t("Attendance")},[t]);const m=k.useMemo(()=>["Major","NM-PHY","NM-STAT"],[]),p=k.useMemo(()=>{const y=Ea(new Date);return Ea(VD(r))<y},[r]);k.useEffect(()=>{h(!0);const y={};e.forEach(T=>{T.date===r&&(y[T.subject]={status:T.status})}),o(y),l(!1),h(!1)},[e,r]);const E=k.useMemo(()=>{const y={};return m.forEach(T=>{const j=e.filter(x=>x.subject===T),O=j.length,I=j.filter(x=>x.status==="present").length,_=O>0?Math.round(I/O*100):0;y[T]={percentage:_,present:I,total:O}}),y},[e,m]),N=k.useMemo(()=>{const y=e.length,T=e.filter(O=>O.status==="present").length,j=y>0?Math.round(T/y*100):0;return{totalClasses:y,totalPresent:T,overallPercentage:j}},[e]),S=k.useCallback((y,T)=>{o(j=>{var _;const O=(_=j[y])==null?void 0:_.status,I={...j};return O===T?delete I[y]:I[y]={status:T},I}),l(!0)},[]),A=k.useCallback(()=>{if(window.confirm(`Save attendance changes for ${r}?`))try{const y=e.filter(j=>j.date!==r),T=Object.entries(i).map(([j,{status:O}])=>({date:r,subject:j,status:O,timestamp:new Date().toISOString()}));n([...y,...T]),re.success(`Attendance for ${r} saved locally!`),l(!1)}catch(y){console.error("Error saving attendance to local storage: ",y),re.error("Failed to save changes.")}},[r,i,e,n]),w=k.useCallback(()=>{try{const y=JSON.stringify(e,null,2),T=new Blob([y],{type:"application/json"}),j=URL.createObjectURL(T),O=document.createElement("a");O.href=j,O.download=`attendance-data-${Am(new Date,"yyyy-MM-dd")}.json`,O.click(),URL.revokeObjectURL(j),re.success("Attendance data exported successfully!")}catch(y){console.error("Export error:",y),re.error("Failed to export data.")}},[e]),v=k.useCallback(()=>{window.confirm("Are you sure you want to delete ALL attendance data? This cannot be undone.")&&(n([]),o({}),l(!1),re.success("All attendance data cleared."))},[n]);return d?u.jsx(ZI,{}):u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50/20 px-4 py-2",children:[u.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4 mb-6",children:u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:u.jsx(sl,{className:"w-6 h-6 text-white"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Attendance Tracker"}),u.jsx("label",{htmlFor:"attendance-date",className:"text-sm text-gray-600",children:"Select date to track attendance"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[u.jsx("input",{id:"attendance-date",type:"date",value:r,onChange:y=>s(y.target.value),className:"flex-1 md:flex-initial border-2 border-gray-200 p-2 rounded-xl shadow-sm focus:border-blue-300 focus:ring-2 focus:ring-blue-300 focus:ring-opacity-20 transition-all"}),a&&u.jsxs("button",{onClick:A,className:"flex items-center justify-center px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-semibold rounded-xl shadow-md hover:shadow-lg transition-all duration-200 active:scale-95 animate-pulse",children:[u.jsx(yo,{className:"mr-2 w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Save Changes"}),u.jsx("span",{className:"sm:hidden",children:"Save"})]})]})]})}),u.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-2xl p-4 mb-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:u.jsx(Lj,{className:"w-5 h-5 text-white"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-blue-900",children:"Overall Statistics"}),u.jsxs("p",{className:"text-xs text-blue-700",children:[N.totalPresent," / ",N.totalClasses," total classes"]})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[N.overallPercentage,"%"]}),u.jsx("p",{className:"text-xs text-blue-600",children:"Overall Attendance"})]})]})}),u.jsx("div",{className:"space-y-4 mb-6",children:m.map(y=>{var O;const T=E[y]||{percentage:0,present:0,total:0},j=(O=i[y])==null?void 0:O.status;return u.jsx(XI,{subject:y,stats:T,draftStatus:j,onStatusChange:S,isHistoricalDate:p},y)})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-6",children:[u.jsxs("button",{onClick:w,disabled:e.length===0,className:"flex items-center justify-center gap-2 p-4 bg-white border-2 border-gray-200 rounded-xl hover:border-blue-300 hover:bg-blue-50 transition-all duration-200 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx(Ej,{className:"w-5 h-5 text-blue-600"}),u.jsx("span",{className:"font-medium text-gray-700",children:"Export Data"})]}),u.jsxs("button",{onClick:v,disabled:e.length===0,className:"flex items-center justify-center gap-2 p-4 bg-white border-2 border-red-200 rounded-xl hover:border-red-300 hover:bg-red-50 transition-all duration-200 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx(Dd,{className:"w-5 h-5 text-red-600"}),u.jsx("span",{className:"font-medium text-red-700",children:"Clear All Data"})]})]}),u.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-2xl p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center flex-shrink-0",children:u.jsx($s,{className:"w-4 h-4 text-white"})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-blue-900 text-sm mb-1",children:"Local Storage Notice"}),u.jsx("p",{className:"text-blue-700 text-xs leading-relaxed",children:"Your attendance data is stored locally on this device. Export your data regularly to avoid loss. Data will not sync across different devices or browsers."})]})]})})]})},eb=()=>{const{value:t,setValue:e}=Tl("theme","light");return k.useEffect(()=>{const r=window.document.documentElement;r.classList.remove("light","dark"),r.classList.add(t)},[t]),{theme:t,toggleTheme:()=>{e(r=>r==="light"?"dark":"light")}}},Qh=({title:t,icon:e,children:n})=>u.jsxs("div",{className:"mb-6 p-4 bg-white dark:bg-gray-800 rounded-xl shadow-md",children:[u.jsxs("div",{className:"flex items-center mb-4",children:[e&&u.jsx(e,{className:"w-6 h-6 mr-2 text-gray-600 dark:text-gray-300"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:t})]}),u.jsx("div",{children:n})]}),G_=({checked:t,onChange:e,label:n,description:r})=>u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:n}),r&&u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r})]}),u.jsx("button",{onClick:()=>e(!t),className:`w-12 h-6 flex items-center rounded-full p-1 transition-colors duration-300 ${t?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`,children:u.jsx("div",{className:`bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-300 ${t?"translate-x-6":"translate-x-0"}`})})]}),nO=({setHeaderTitle:t})=>{const{theme:e,toggleTheme:n}=eb(),r=e==="dark";return k.useEffect(()=>{t("Settings")},[t]),u.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 min-h-screen",children:u.jsxs("div",{className:"max-w-2xl mx-auto",children:[u.jsx(Qh,{title:"Appearance",icon:r?Rj:Hh,children:u.jsx(G_,{checked:r,onChange:n,label:"Dark Mode",description:"Switch between light and dark themes"})}),u.jsx(Qh,{title:"Notifications",icon:Hh,children:u.jsx(G_,{checked:!1,onChange:()=>{},label:"Enable Push Notifications",description:"Receive notifications for important updates"})}),u.jsx(Qh,{title:"Account",icon:Hh,children:u.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Manage your account preferences"})})]})})};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tb=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=k.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>k.createElement("svg",{ref:l,...sO,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:tb("lucide",s),...a},[...o.map(([d,h])=>k.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=(t,e)=>{const n=k.forwardRef(({className:r,...s},i)=>k.createElement(iO,{ref:i,iconNode:e,className:tb(`lucide-${rO(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=_o("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=_o("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=_o("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=_o("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=_o("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=_o("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);function dO(){const[t,e]=k.useState(""),[n,r]=k.useState(""),[s,i]=k.useState(""),[o,a]=k.useState(!1),[l,d]=k.useState(!1),[h,m]=k.useState(""),p=Nt(),E=async S=>{S.preventDefault(),i(""),a(!0);try{await u3(kg,t,n),p("/")}catch(A){i(A.message||"Login failed. Please try again.")}finally{a(!1)}},N=()=>{d(!l)};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4",children:[u.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[u.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse"}),u.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse delay-1000"})]}),u.jsxs("div",{className:"relative w-full max-w-md",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl shadow-2xl p-8 space-y-6",children:[u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center mb-4",children:u.jsx(Q_,{className:"w-8 h-8 text-white"})}),u.jsx("h1",{className:"text-3xl font-bold text-white",children:"Admin Portal"}),u.jsx("p",{className:"text-gray-300",children:"Sign in to access the dashboard"})]}),u.jsxs("div",{className:"mb-4 p-3 bg-blue-500/20 border border-blue-500/30 rounded-lg text-blue-200 text-sm",children:[u.jsx("p",{className:"font-semibold mb-1",children:"Demo Mode Active"}),u.jsx("p",{children:"Email: admin@demo.com"}),u.jsx("p",{children:"Password: demo123"})]}),s&&u.jsxs("div",{className:"flex items-center space-x-3 bg-red-500/20 border border-red-500/30 rounded-lg p-3 text-red-200 animate-in slide-in-from-top-1",children:[u.jsx(oO,{className:"w-5 h-5 flex-shrink-0"}),u.jsx("p",{className:"text-sm",children:s})]}),u.jsxs("form",{onSubmit:E,className:"space-y-5",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{htmlFor:"email",className:`block text-sm font-medium transition-colors duration-200 ${h==="email"?"text-purple-300":"text-gray-300"}`,children:"Email Address"}),u.jsxs("div",{className:"relative",children:[u.jsx(uO,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 transition-colors duration-200 ${h==="email"?"text-purple-400":"text-gray-400"}`}),u.jsx("input",{type:"email",id:"email",value:t,onChange:S=>e(S.target.value),onFocus:()=>m("email"),onBlur:()=>m(""),className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:border-purple-400 focus:ring-2 focus:ring-purple-400/20 focus:outline-none transition-all duration-200",placeholder:"admin@company.com",required:!0,autoComplete:"email"})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{htmlFor:"password",className:`block text-sm font-medium transition-colors duration-200 ${h==="password"?"text-purple-300":"text-gray-300"}`,children:"Password"}),u.jsxs("div",{className:"relative",children:[u.jsx(cO,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 transition-colors duration-200 ${h==="password"?"text-purple-400":"text-gray-400"}`}),u.jsx("input",{type:l?"text":"password",id:"password",value:n,onChange:S=>r(S.target.value),onFocus:()=>m("password"),onBlur:()=>m(""),className:"w-full pl-10 pr-12 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:border-purple-400 focus:ring-2 focus:ring-purple-400/20 focus:outline-none transition-all duration-200",placeholder:"",required:!0,autoComplete:"current-password"}),u.jsx("button",{type:"button",onClick:N,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-purple-400 focus:text-purple-400 focus:outline-none transition-colors duration-200","aria-label":l?"Hide password":"Show password",children:l?u.jsx(aO,{className:"w-5 h-5"}):u.jsx(lO,{className:"w-5 h-5"})})]})]}),u.jsx("button",{type:"submit",disabled:o||!t||!n,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 disabled:from-gray-600 disabled:to-gray-600 text-white font-semibold py-3 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-transparent transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98] disabled:scale-100 disabled:cursor-not-allowed shadow-lg",children:o?u.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[u.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),u.jsx("span",{children:"Signing In..."})]}):"Sign In"})]}),u.jsx("div",{className:"text-center pt-4 border-t border-white/10",children:u.jsx("p",{className:"text-sm text-gray-400",children:"Secure admin access  Protected by encryption"})})]}),u.jsx("div",{className:"mt-4 text-center",children:u.jsxs("div",{className:"inline-flex items-center space-x-2 text-xs text-gray-400 bg-white/5 backdrop-blur-sm rounded-full px-4 py-2 border border-white/10",children:[u.jsx(Q_,{className:"w-3 h-3"}),u.jsx("span",{children:"SSL Secured Connection"})]})})]})]})}const hO=({toggleSidebar:t,title:e,isSidebarOpen:n})=>{const[r,s]=k.useState(!1),[i,o]=k.useState(!1),a=k.useMemo(()=>{const p=On(Ut,"notifications");return Td(p,gg("createdAt","desc"))},[]),{data:l,updateItem:d}=mn(a),h=k.useMemo(()=>l?l.filter(p=>!p.seen).length:0,[l]),m=()=>{o(p=>!p),!i&&h>0&&l&&l.forEach(p=>{p.seen||d(p.id,{seen:!0})})};return k.useEffect(()=>{const p=()=>s(window.scrollY>10);return window.addEventListener("scroll",p),()=>window.removeEventListener("scroll",p)},[]),u.jsxs("header",{className:`sticky top-0 z-40 transition-all duration-300 ${r?"bg-white/95 backdrop-blur-md shadow-lg border-b border-gray-100":"bg-white shadow-md"}`,children:[u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex items-center justify-between h-16 sm:h-20",children:[u.jsx("div",{className:"flex items-center space-x-4",children:u.jsx("button",{onClick:t,className:"flex items-center justify-center w-10 h-10 rounded-lg md:hidden",children:n?u.jsx(Pg,{size:20}):u.jsx(Wj,{size:18})})}),u.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[u.jsx("button",{className:"hidden md:flex items-center justify-center w-10 h-10 text-gray-600 hover:bg-gray-100 rounded-lg",children:u.jsx(U_,{size:20})}),u.jsxs("div",{className:"relative",children:[u.jsxs("button",{onClick:m,className:"flex items-center justify-center w-10 h-10 text-gray-600 hover:bg-gray-100 rounded-lg relative",children:[u.jsx(jj,{size:20}),h>0&&u.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-medium",children:h})]}),i&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>o(!1)}),u.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-20",children:[u.jsx("div",{className:"p-4 border-b border-gray-100",children:u.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Notifications"})}),u.jsx("div",{className:"max-h-64 overflow-y-auto",children:l===null?u.jsx("p",{className:"p-4 text-sm text-gray-500",children:"Loading..."}):l.length>0?l.map(p=>u.jsx(fO,{notification:p},p.id)):u.jsx("p",{className:"p-4 text-sm text-gray-500 text-center py-8",children:"No new notifications."})}),u.jsx("div",{className:"p-3 border-t border-gray-100",children:u.jsx("button",{className:"w-full text-sm text-blue-500 hover:text-blue-600 font-medium",children:"View all notifications"})})]})]})]}),u.jsx("div",{className:"flex items-center space-x-3 pl-2 sm:pl-4 border-l border-gray-200",children:u.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-white text-sm sm:text-base font-semibold",children:"U"})})})]})]})}),u.jsx("div",{className:"md:hidden px-4 pb-4",children:u.jsxs("div",{className:"relative",children:[u.jsx(U_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),u.jsx("input",{type:"text",placeholder:"Search...",className:"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm"})]})})]})},fO=({notification:t})=>{},mO=({isSidebarOpen:t,toggleSidebar:e})=>{var S;const n=Mt(),r=n?n.currentUser:null,s=Nt(),[i,o]=k.useState(!1),[a,l]=k.useState({academic:!0,personal:!1}),d=async()=>{o(!0);try{await kg.signOut(),e(),s("/login")}catch(A){console.error("Failed to log out",A)}finally{o(!1)}},h=A=>{l(w=>({...w,[A]:!w[A]}))},m=[{section:"main",items:[{path:"/",icon:Sj,label:"Dashboard",badge:null},{path:"/schedule",icon:sl,label:"Schedule",badge:"3"}]},{section:"academic",title:"Academic",expandable:!0,items:[{path:"/notes",icon:km,label:"Official Notes",badge:null},{path:"/resources",icon:FI,label:"Resources",badge:"New"},{path:"/attendance",icon:DI,label:"Attendance",badge:null}]},{section:"personal",title:"Personal",expandable:!0,items:[{path:"/personal-notes",icon:Rg,label:"Personal Notes",badge:null},{path:"/bookmarks",icon:Mj,label:"Bookmarks",badge:"5"}]},{section:"communication",title:"Communication",items:[{path:"/notices",icon:UI,label:"Notices",badge:"2"}]}],p=({item:A,onClick:w})=>u.jsxs(Rh,{to:A.path,onClick:w,className:({isActive:v})=>`group flex items-center justify-between py-3 px-4 rounded-xl transition-all duration-200 ${v?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg transform scale-[1.02]":"text-gray-300 hover:bg-gray-700/50 hover:text-white hover:transform hover:scale-[1.01]"}`,children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(A.icon,{className:"mr-3 transition-colors duration-200",size:20}),u.jsx("span",{className:"font-medium",children:A.label})]}),A.badge&&u.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${A.badge==="New"?"bg-green-500 text-white":"bg-gray-600 text-gray-200"}`,children:A.badge})]}),E=({section:A,title:w})=>u.jsxs("button",{onClick:()=>h(A.section),className:"w-full flex items-center justify-between py-2 px-4 text-gray-400 hover:text-gray-300 transition-colors duration-200",children:[u.jsx("span",{className:"text-sm font-semibold uppercase tracking-wider",children:w}),A.expandable&&(a[A.section]?u.jsx(VI,{size:16}):u.jsx(OI,{size:16}))]}),N=`
        bg-gradient-to-b from-gray-900 via-gray-800 to-gray-900 text-white w-72 flex flex-col fixed inset-y-0 left-0 transform 
        md:relative md:translate-x-0 transition-all duration-300 ease-out
        ${t?"translate-x-0 shadow-2xl":"-translate-x-full"}
        z-50 border-r border-gray-700/50
    `;return u.jsxs(u.Fragment,{children:[t&&u.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden transition-opacity duration-300",onClick:e}),u.jsxs("div",{className:N,children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700/50",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl flex items-center justify-center",children:u.jsx(Yj,{size:20,className:"text-white"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-bold text-white",children:"MathMate AHC"}),u.jsx("p",{className:"text-xs text-gray-400",children:"Academic Hub"})]})]}),u.jsx("button",{onClick:e,className:"md:hidden p-2 rounded-lg text-gray-400 hover:text-white hover:bg-gray-700/50 transition-all duration-200",children:u.jsx(Ag,{size:20})})]}),r&&u.jsx("div",{className:"p-4 mx-4 mt-4 bg-gray-700/30 backdrop-blur-sm rounded-xl border border-gray-600/30",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-white font-semibold text-sm",children:((S=r.email)==null?void 0:S.charAt(0).toUpperCase())||"U"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-white truncate",children:r.displayName||"User"}),u.jsx("p",{className:"text-xs text-gray-400 truncate",children:r.email})]})]})}),u.jsx("nav",{className:"flex-1 p-4 space-y-6 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-transparent",children:m.map((A,w)=>u.jsxs("div",{children:[A.title&&u.jsx(E,{section:A,title:A.title}),u.jsx("div",{className:`space-y-1 transition-all duration-300 ${A.expandable&&!a[A.section]?"max-h-0 overflow-hidden opacity-0":"max-h-96 opacity-100"}`,children:A.items.map((v,y)=>u.jsx(p,{item:v,onClick:e},y))})]},w))}),u.jsxs("div",{className:"p-4 border-t border-gray-700/50 space-y-2",children:[u.jsxs(Rh,{to:"/settings",onClick:e,className:({isActive:A})=>`flex items-center py-3 px-4 rounded-xl transition-all duration-200 ${A?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg":"text-gray-300 hover:bg-gray-700/50 hover:text-white"}`,children:[u.jsx(Vj,{className:"mr-3",size:20}),u.jsx("span",{className:"font-medium",children:"Settings"})]}),u.jsxs("button",{className:"w-full flex items-center py-3 px-4 rounded-xl text-gray-300 hover:bg-gray-700/50 hover:text-white transition-all duration-200",children:[u.jsx(Nj,{className:"mr-3",size:20}),u.jsx("span",{className:"font-medium",children:"Help & Support"})]}),u.jsx("div",{className:"border-t border-gray-700/50 pt-4",children:r?u.jsxs("button",{onClick:d,disabled:i,className:"w-full flex items-center justify-center py-3 px-4 rounded-xl bg-red-500/10 text-red-400 hover:bg-red-500/20 hover:text-red-300 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx(Pj,{className:"mr-3",size:20}),u.jsx("span",{className:"font-medium",children:i?"Logging out...":"Logout"})]}):u.jsxs(Rh,{to:"/login",onClick:e,className:"flex items-center justify-center py-3 px-4 rounded-xl bg-blue-500/10 text-blue-400 hover:bg-blue-500/20 hover:text-blue-300 transition-all duration-200",children:[u.jsx(Aj,{className:"mr-3",size:20}),u.jsx("span",{className:"font-medium",children:"Login"})]})}),u.jsx("div",{className:"flex items-center justify-center pt-2",children:u.jsx("span",{className:"text-xs text-gray-500",children:"v2.1.0"})})]})]})]})};function nb(){eb();const[t,e]=k.useState(!1),[n,r]=k.useState(""),s=()=>e(!t);return ao().pathname==="/login"?u.jsx(Hy,{children:u.jsx(He,{path:"/login",element:u.jsx(dO,{})})}):u.jsxs("div",{className:"relative min-h-screen md:flex bg-gray-100 dark:bg-gray-900",children:[u.jsx(mO,{isSidebarOpen:t,toggleSidebar:s}),u.jsxs("div",{className:"flex-1 flex flex-col h-screen overflow-hidden",children:[u.jsx(hO,{toggleSidebar:s,title:n}),u.jsx("main",{className:"flex-1 overflow-y-auto",children:u.jsx(dk,{children:u.jsxs(Hy,{children:[u.jsx(He,{path:"/",element:u.jsx(Bj,{setHeaderTitle:r})}),u.jsx(He,{path:"/notes",element:u.jsx(n5,{setHeaderTitle:r})}),u.jsx(He,{path:"/notes/:subjectId",element:u.jsx(s5,{setHeaderTitle:r})}),u.jsx(He,{path:"/notes/:subjectId/:chapterId",element:u.jsx(o5,{setHeaderTitle:r})}),u.jsx(He,{path:"/notes/:subjectId/:chapterId/:itemId",element:u.jsx(d5,{setHeaderTitle:r})}),u.jsx(He,{path:"/personal-notes",element:u.jsx(h5,{setHeaderTitle:r})}),u.jsx(He,{path:"/personal-notes/:subjectId",element:u.jsx(m5,{setHeaderTitle:r})}),u.jsx(He,{path:"/personal-notes/:subjectId/:chapterId",element:u.jsx(g5,{setHeaderTitle:r})}),u.jsx(He,{path:"/personal-notes/:subjectId/:chapterId/:itemId",element:u.jsx(v5,{setHeaderTitle:r})}),u.jsx(He,{path:"/resources",element:u.jsx(_5,{setHeaderTitle:r})}),u.jsx(He,{path:"/resources/:categoryId",element:u.jsx(w5,{setHeaderTitle:r})}),u.jsx(He,{path:"/resources/:categoryId/:chapterId",element:u.jsx(I5,{setHeaderTitle:r})}),u.jsx(He,{path:"/schedule",element:u.jsx(k5,{setHeaderTitle:r})}),u.jsx(He,{path:"/schedule-editor",element:u.jsx(C5,{setHeaderTitle:r})}),u.jsx(He,{path:"/notices",element:u.jsx(eO,{setHeaderTitle:r})}),u.jsx(He,{path:"/attendance",element:u.jsx(tO,{setHeaderTitle:r})}),u.jsx(He,{path:"/settings",element:u.jsx(nO,{setHeaderTitle:r})})]})})})]})]})}const rb=X.createContext({isOnline:!0}),sb=()=>X.useContext(rb),pO=({children:t})=>{const[e,n]=X.useState(navigator.onLine),[r,s]=X.useState(!1);return X.useEffect(()=>{const i=()=>{n(!0),s(!0),setTimeout(()=>s(!1),3e3)},o=()=>{n(!1),s(!0)};return window.addEventListener("online",i),window.addEventListener("offline",o),navigator.onLine||s(!0),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",o)}},[]),u.jsxs(rb.Provider,{value:{isOnline:e},children:[t,r&&u.jsx("div",{style:{position:"fixed",top:10,right:10,backgroundColor:e?"#4CAF50":"#f44336",color:"white",padding:"8px 16px",borderRadius:4,fontSize:14,fontWeight:"bold",zIndex:9999,boxShadow:"0 2px 8px rgba(0,0,0,0.2)",animation:"slideIn 0.3s ease-out"},children:e?" Back Online":" Offline Mode"}),u.jsx("style",{children:`
        @keyframes slideIn {
          from { transform: translateX(100%); opacity: 0; }
          to { transform: translateX(0); opacity: 1; }
        }
      `})]})},gO=()=>u.jsx(AI,{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light",limit:navigator.onLine?5:2}),yO=async()=>{var t;if(await new Promise(e=>setTimeout(e,100)),typeof window<"u"&&((t=navigator.storage)!=null&&t.estimate))try{const e=await navigator.storage.estimate();console.log(" Storage estimate:",{used:`${(e.usage/1024/1024).toFixed(2)} MB`,available:`${(e.quota/1024/1024).toFixed(2)} MB`,percentage:`${(e.usage/e.quota*100).toFixed(1)}%`})}catch{console.log("Storage estimate not available")}Uc.createRoot(document.getElementById("root")).render(u.jsx(X.StrictMode,{children:u.jsx(ww,{children:u.jsx(pO,{children:u.jsxs(BI,{children:[u.jsx(nb,{}),u.jsx(gO,{})]})})})}))};yO().catch(t=>{console.error("Failed to initialize app:",t),Uc.createRoot(document.getElementById("root")).render(u.jsx(X.StrictMode,{children:u.jsx(ww,{children:u.jsxs(BI,{children:[u.jsx(nb,{}),u.jsx(AI,{})]})})}))});
